<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Learning React</title>

  <link rel="icon" type="image/x-icon" href="mc2/images/favicon.ico">

  <link rel="stylesheet" href="mc2/styles/print.css">
<link rel="stylesheet" href="mc2/styles/print-code.css">
  <link rel="stylesheet" href="styles/print.css">
</head>
<body>

<div id="bodycontainer">
  <div id="frontpage">
    <h1>Learning React</h1>
    <div class="splash"><p>...and Redux!</p>
</div>
    <img class="logo" src="mc2/images/edument_logo_blue.svg">
  </div>
  <div id="footer">
    <span id="delivery">AddSkills Sthlm, 11 dec 2017</span>
    <span id="copyright">&copy; Edument 2017</span>
  </div>
  <div id="overview">
    <h2>Course overview</h2>
    <div class="overviewlist"><div class="detailedoverview"><div><h4><span>1.</span> Welcome</h4><ol><li>Who am I</li><li>Course structure</li><li>The Web platform</li><li>Approaching the web</li><li>The JavaScript language</li><li>Course resources</li></ol></div><div><h4><span>2.</span> Introducing React</h4><ol><li>Templating</li><li>Enter React</li><li>Expressing the UI</li><li>JSX Basics</li><li>Installing JSX</li><li>Updating the UI</li><li>Nested components</li><li>Connecting to the DOM</li><li>React devtools</li><li>Exercise 1</li></ol></div><div><h4><span>3.</span> Rendering lessons</h4><ol><li>Faulty render return</li><li>Close all elements</li><li>Single VS double braces</li><li>Reserved names</li><li>Translation issues</li><li>Spacing trick</li><li>Conditional render</li><li>Component children</li><li>Component props VS Element props</li><li>Rendering a list</li><li>Rendering HTML strings</li><li>Exercise 2</li></ol></div><div><h4><span>4.</span> React level 2</h4><ol><li>Class syntax</li><li>Stateful components</li><li>Event handling</li><li>Lifecycle methods</li><li>Refs</li><li>Forms</li><li>Communication</li><li>Styling</li><li>Exercise 3</li></ol></div><div><h4><span>5.</span> Introducing Redux</h4><ol><li>What Redux is</li><li>State and actions</li><li>The reducer</li><li>The store</li><li>Action creators</li><li>Redux resources</li></ol></div><div><h4><span>6.</span> A Redux example</h4><ol><li>App idea</li><li>State shape</li><li>Initial state</li><li>Action shapes</li><li>Reducer</li><li>Store</li><li>Action creators</li><li>UI</li><li>UI updater</li><li>Interaction</li><li>Tying it together</li><li>Exercise 4</li></ol></div></div><div><div><h4><span>7.</span> React and Redux</h4><ol><li>Presenting the app</li><li>Redux parts</li><li>React parts</li><li>Vanilla integration</li><li>Examining React-Redux</li><li>React-Redux integration</li><li>Exercise 5</li></ol></div><div><h4><span>8.</span> Redux Thunk</h4><ol><li>Store enhancers</li><li>Middlewares</li><li>The thunk problem</li><li>The thunk solution</li><li>Trying it out</li></ol></div><div><h4><span>9.</span> Redux level 2</h4><ol><li>Redux devtools</li><li>Combined reducers</li><li>Caching with Reselect</li><li>Where to put logic</li><li>Flavours of state</li></ol></div><div><h4><span>10.</span> Advanced React</h4><ol><li>setState take 2</li><li>The React Context API</li><li>Context in React-Redux</li><li>Firebase</li><li>Recompose</li><li>Isomorphic apps</li><li>Performance</li><li>Working with the DOM</li></ol></div><div><h4><span>11.</span> Appendix - ES6 features</h4><ol><li>Versatile object definitions</li><li>Destructuring and rest</li><li>Versatile function definitions</li><li>Spreads</li><li>Modules</li><li>Classes</li><li>Decorators</li><li>Miscellaneous</li><li>Exercise - trying it out</li></ol></div><div><h4><span>12.</span> Appendix - Graveyard</h4><ol><li>createClass syntax</li><li>Declaring props</li><li>Mixins</li></ol></div></div></div>
  </div>
  <div id="slides">
    <div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 1 / 12</span>
    <h2>Welcome</h2>
    <p>to the jungle</p>
</p>
  </div>
  
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Who am I</li>
<li>2. Course structure</li>
<li>3. The Web platform</li>
<li>4. Approaching the web</li>
<li>5. The JavaScript language</li>
<li>6. Course resources</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>1-1.</span> Who am I</h3>
      <p>Know thy enemy</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="1-1-1">
<span class="pos">1-1-1</span>
<div class="slidecontent"><p>Let&#39;s <strong>start with the most important</strong> part - me!</p>
<p><img src="resources/graphviz/me.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-1-2">
<span class="pos">1-1-2</span>
<div class="slidecontent"><p>Contact information: </p>
<ul>
<li><strong>Email</strong>: <a href="mailto:david.waller@edument.se">david.waller@edument.se</a></li>
<li><strong>Blog</strong>: <a href="http://blog.krawaller.se">http://blog.krawaller.se</a></li>
<li><strong>Twitter</strong>: <a href="http://twitter.com/krawaller">krawaller</a></li>
<li><strong>Phone</strong>: +46708293094</li>
</ul>
<p>Don&#39;t be a stranger! :)</p>
</div></section><section class="slide" data-pos="1-1-3">
<span class="pos">1-1-3</span>
<div class="slidecontent"><p>But, <strong>fair warning</strong> - I spend my days singing this gospel:</p>
<div class="equality">
  <img src="resources/images/js-logo.png" alt="js">
  <span>=</span>
  <img src="resources/images/heart.png" alt="heart">
</div></div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>1-2.</span> Course structure</h3>
      <p>How we&#39;ll go about things</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="1-2-1">
<span class="pos">1-2-1</span>
<div class="slidecontent"><p>The course is divided into several <strong>chapters</strong>, where you&#39;re currently in the first.</p>
<p><img src="resources/graphviz/course-structure.svg" alt="index and chapters"></p>
<p>We access the chapters from an <strong>index</strong>, giving you a <strong>birds-eye view</strong> of the entire contents.</p>
</div></section><section class="slide" data-pos="1-2-2">
<span class="pos">1-2-2</span>
<div class="slidecontent"><p>Each <strong>chapter</strong> has many <strong>sections</strong>:</p>
<p><img src="resources/graphviz/course-structure-chapter.svg" alt="index and chapters"></p>
</div></section><section class="slide" data-pos="1-2-3">
<span class="pos">1-2-3</span>
<div class="slidecontent"><p>In the <strong>printed material</strong> (or PDF) and in the <strong>presentation top-right corner</strong>, the slides are numbered <strong><code>X‑Y‑Z</code></strong> where...</p>
<ul>
<li><code>X</code> is the number of the current <strong>chapter</strong></li>
<li><code>Y</code> is the number of the section <strong>section</strong> within that chapter</li>
<li><code>Z</code> is the number of the <strong>slide</strong> within that section</li>
</ul>
</div></section><section class="slide" data-pos="1-2-4">
<span class="pos">1-2-4</span>
<div class="slidecontent"><p>Some sections are <strong>exercises</strong>, where you&#39;ll get to internalise what we&#39;ve been talking about through a 
<strong>practical task</strong>.</p>
<p>These are all <strong>tied together</strong> in that it is one single app that you will keep tinkering with.</p>
</div></section><section class="slide" data-pos="1-2-5">
<span class="pos">1-2-5</span>
<div class="slidecontent"><p>The latest bunch of chapters are <strong>Appendixes</strong>, meant to be used as references as needed.</p>
<p>For example, if you&#39;re not comfortable with <strong>new language features</strong> you can check out the <strong>ES6 appendix</strong>!</p>
</div></section><section class="slide" data-pos="1-2-6">
<span class="pos">1-2-6</span>
<div class="slidecontent"><p>Finally - it is <strong>forbidden to keep a question to yourself</strong>. Ask away!</p>
<p>Because, <strong>there are no stupid questions</strong>! <span style='text-decoration: line-through;'>Only stupid people.</span></p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>1-3.</span> The Web platform</h3>
      <p>a.k.a. the holy trinity</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="1-3-1">
<span class="pos">1-3-1</span>
<div class="slidecontent"><p>The <strong>Web platform</strong> is really the combination of three separate technologies:</p>
<p><img src="resources/graphviz/platform.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-3-2">
<span class="pos">1-3-2</span>
<div class="slidecontent"><p>(There was also a dark time when <strong>Java applets</strong> were used in webpages, but we don&#39;t talk about that...)</p>
<p><img src="resources/graphviz/platform-java.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-3-3">
<span class="pos">1-3-3</span>
<div class="slidecontent"><p>(And we don&#39;t acknowledge the existence of <strong>flash</strong> either)</p>
<p><img src="resources/graphviz/platform-flash.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-3-4">
<span class="pos">1-3-4</span>
<div class="slidecontent"><p>Traditionally, <strong>web apps looked like this</strong>:</p>
<p><img src="resources/graphviz/webapp-before.svg" alt=""></p>
<p>Web tech was <strong>just the UI</strong>. The real coding was done in <code>php</code> / <code>ruby</code> / <code>java</code> / <code>.NET</code>.</p>
</div></section><section class="slide" data-pos="1-3-5">
<span class="pos">1-3-5</span>
<div class="slidecontent"><p>But a <strong>modern SPA</strong> (Single Page Application) is more like this:</p>
<p><img src="resources/graphviz/webapp-now.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-3-6">
<span class="pos">1-3-6</span>
<div class="slidecontent"><p>Additionally, web tech has <strong>escaped from the browser</strong>:</p>
<p><img src="resources/graphviz/webapp-deploy.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-3-7">
<span class="pos">1-3-7</span>
<div class="slidecontent"><p>And blurring the lines even further - there are frameworks to <strong>compile web to native code</strong>:</p>
<p><img src="resources/graphviz/webapp-deploy-compile.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-3-8">
<span class="pos">1-3-8</span>
<div class="slidecontent"><p>In essence: <strong>web tech is on the (high) rise</strong>, and even if you intend to stay in a sheltered Java garden, knowledge about the web platform will serve you well.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>1-4.</span> Approaching the web</h3>
      <p>this and this and this and</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="1-4-1">
<span class="pos">1-4-1</span>
<div class="slidecontent"><p>We must admit something up front regarding <strong>learning the web platform</strong>.</p>
</div></section><section class="slide" data-pos="1-4-2">
<span class="pos">1-4-2</span>
<div class="slidecontent"><p>It is often <strong>overwhelming to newcomers</strong> that there is an <strong>abundance of choices</strong> to make, for many different aspects;</p>
<ul>
<li>what <strong>framework</strong> to use</li>
<li>what <strong>build chain</strong> to use</li>
<li>which <strong>JS language flavour</strong> to use</li>
<li>what <strong>CSS preprocessor</strong> to use</li>
<li>what <strong>style rules</strong> to enforce</li>
<li><strong>how to enforce</strong> those rules</li>
</ul>
<p>...and many more.</p>
</div></section><section class="slide" data-pos="1-4-3">
<span class="pos">1-4-3</span>
<div class="slidecontent"><p>And for <strong>each of those choices</strong>, you must consider;</p>
<p><img src="resources/graphviz/choiceaspects-1.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-4-4">
<span class="pos">1-4-4</span>
<div class="slidecontent"><p>...and <strong>also</strong>:</p>
<p><img src="resources/graphviz/choiceaspects-2.svg" alt=""></p>
<p>...and likely a few more that we&#39;ve forgotten.</p>
</div></section><section class="slide" data-pos="1-4-5">
<span class="pos">1-4-5</span>
<div class="slidecontent"><p>Regarding the <strong>choice of framework</strong>, the <strong>most important aspect</strong> is perhaps that of <strong>complexity</strong>:</p>
<p><img src="resources/graphviz/frameworkcomplexity.svg" alt=""></p>
</div></section><section class="slide" data-pos="1-4-6">
<span class="pos">1-4-6</span>
<div class="slidecontent"><p>Observe that there is <strong>no right or wrong</strong> in the complexity choice.</p>
<p>The important thing is to <strong>be aware of where on the scale you are</strong>, and <strong>understand the consequences of that</strong>.</p>
</div></section><section class="slide" data-pos="1-4-7">
<span class="pos">1-4-7</span>
<div class="slidecontent"><p>To ease into adopting the web, here are some humble pointers!</p>
</div></section><section class="slide" data-pos="1-4-8">
<span class="pos">1-4-8</span>
<div class="slidecontent"><blockquote>
<p>Don&#39;t worry about <strong>having the latest</strong>. That&#39;ll be old next week anyway.</p>
</blockquote>
</div></section><section class="slide" data-pos="1-4-9">
<span class="pos">1-4-9</span>
<div class="slidecontent"><blockquote>
<p><strong>Respect the role of the architect</strong>. He/she needs to make informed decisions, the rest of us can just relax and use the tools!</p>
</blockquote>
</div></section><section class="slide" data-pos="1-4-10">
<span class="pos">1-4-10</span>
<div class="slidecontent"><blockquote>
<p>If you find a setup that works, <strong>go with it</strong>. You won&#39;t find the ideal setup to begin with anyway.</p>
</blockquote>
</div></section><section class="slide" data-pos="1-4-11">
<span class="pos">1-4-11</span>
<div class="slidecontent"><blockquote>
<p>Don&#39;t let your pride prevent you from <strong>using starter kits</strong>. For example, in the world of React, <a href="https://github.com/facebookincubator/create-react-app">create-react-app</a> is an excellent low-cost entryway!</p>
</blockquote>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>1-5.</span> The JavaScript language</h3>
      <p>lingua franca of the web</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="1-5-1">
<span class="pos">1-5-1</span>
<div class="slidecontent"><p>So - <strong>JavaScript</strong>! Let&#39;s kick things off with a <strong>chopper view of the language</strong>.</p>
</div></section><section class="slide" data-pos="1-5-2">
<span class="pos">1-5-2</span>
<div class="slidecontent"><p>First, here is an overview of the <strong>different JavaScript versions</strong>:</p>
<p><img src="resources/graphviz/js-versions.svg" alt="versions"></p>
<p>We will <strong>mostly use ES5</strong>, with some more modern stuff sprinkled in.</p>
</div></section><section class="slide" data-pos="1-5-3">
<span class="pos">1-5-3</span>
<div class="slidecontent"><p>...as well as some <strong>more stuff beyond the borders of JavaScript</strong>, but <strong>that comes later too</strong>!</p>
</div></section><section class="slide question" data-pos="1-5-4">
<span class="pos">1-5-4</span>
<div class="slidecontent">
<p>So, just <strong>how small is ES7</strong>? Err, I mean, ES206.</p>
</div></section><section class="slide answer" data-pos="1-5-5">
<span class="pos">1-5-5</span>
<div class="slidecontent">
<p>Well, if you go to <a href="https://getgood.at/js/es7-in-7-days">https://getgood.at/js/es7-in-7-days</a>...</p>
<p><img src="resources/images/es7in7days.png" alt=""></p>
</div></section><section class="slide" data-pos="1-5-6">
<span class="pos">1-5-6</span>
<div class="slidecontent"><p>...then you have <strong>3.5 days to learn this</strong>:</p>
<pre><code class="lang-javascript">myArr.includes(<span class="hljs-string">'foo'</span>) <span class="hljs-comment">// returns true or false</span>
</code></pre>
<p>...and <strong>3.5 days to learn this</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-number">5</span> ** <span class="hljs-number">3</span> <span class="hljs-comment">// 125, same as Math.pow(5, 3)</span>
</code></pre>
</div></section><section class="slide" data-pos="1-5-7">
<span class="pos">1-5-7</span>
<div class="slidecontent"><p>After ES6 (ES2015), TC39 switched to a <strong>yearly release cycle</strong> where <strong>features compete individually</strong>.</p>
<p><img src="resources/images/gauntlet.jpg" alt=""></p>
</div></section><section class="slide" data-pos="1-5-8">
<span class="pos">1-5-8</span>
<div class="slidecontent"><p>The <strong>TC39 process</strong>:</p>
<p><img src="resources/graphviz/tc39process.svg" alt="versions"></p>
<p>Formal description <a href="https://tc39.github.io/process-document/">here</a></p>
</div></section><section class="slide" data-pos="1-5-9">
<span class="pos">1-5-9</span>
<div class="slidecontent"><p>So <strong>what&#39;s in the pipeline</strong>?</p>
<ul>
<li><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">Stage 0 list</a> (23)</li>
<li><a href="https://github.com/tc39/proposals">Stage 1-3</a> (26, 7, 16)</li>
<li><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">Stage 4</a> (7, not counting ES2016)</li>
</ul>
<p>(counts valid as of November 2017)</p>
</div></section><section class="slide" data-pos="1-5-10">
<span class="pos">1-5-10</span>
<div class="slidecontent"><p>Curious what a <strong>finished feature spec</strong> looks like?</p>
<p>Let&#39;s check out the spec for Exponentiation](<a href="http://rwaldron.github.io/exponentiation-operator/">http://rwaldron.github.io/exponentiation-operator/</a>)</p>
</div></section><section class="slide" data-pos="1-5-11">
<span class="pos">1-5-11</span>
<div class="slidecontent"><p>A <strong>recommended learning resource</strong> for new and upcoming syntaxes are these books by Alex Rauschmayer:</p>
<ul>
<li><a href="https://leanpub.com/exploring-es6">Exploring ES6</a></li>
<li><a href="https://leanpub.com/exploring-es2016-es2017">Exploring ES2016 and ES2017</a></li>
</ul>
<p>Both are <strong>free online</strong>.</p>
</div></section><section class="slide list" data-pos="1-5-12">
<span class="pos">1-5-12</span>
<div class="slidecontent">
<p>Since we <strong>can&#39;t trust all browsers to know the latest JS</strong>, we must <strong>convert our code</strong>. We do this either by...</p>
<ul>
<li><span>a</span><strong>polyfilling</strong></li>
<li><span>b</span><strong>transpiling</strong></li>
</ul>
</div></section><section class="slide num numA" data-pos="1-5-13">
<span class="pos">1-5-13</span>
<div class="slidecontent">
<p><strong>Polyfilling</strong> means <strong>adding a homebrew version</strong> of a method if a native one isn&#39;t available. This <strong>can be done programmatically</strong>, like this:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">Array</span>.isArray = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> + a !== a &amp;&amp; {}.toString.call(a) == <span class="hljs-string">'[object Array]'</span>;
});
</code></pre>
</div></section><section class="slide num numB" data-pos="1-5-14">
<span class="pos">1-5-14</span>
<div class="slidecontent">
<p>But <strong>syntax changes</strong> requires a <strong>transpilation step</strong> that must be done <strong>prior to running the code</strong>. We <strong>cannot do this programmatically</strong>.</p>
</div></section><section class="slide" data-pos="1-5-15">
<span class="pos">1-5-15</span>
<div class="slidecontent"><p>Speaking of JavaScript&#39;s character - are you familiar with the <strong>3 levels of programming</strong>?</p>
<p><img src="resources/graphviz/programmerlevels.svg" alt=""></p>
</div></section><section class="slide question" data-pos="1-5-16">
<span class="pos">1-5-16</span>
<div class="slidecontent">
<p>They were interesting, but <strong>what do they have to do with JavaScript</strong>?</p>
</div></section><section class="slide answer" data-pos="1-5-17">
<span class="pos">1-5-17</span>
<div class="slidecontent">
<p>JavaScript&#39;s flexible nature <strong>encourages and empowers level 2 behaviour</strong>.</p>
<p>So <strong>take care</strong>, and remember:</p>
<blockquote>
<p>With great power comes great responsibility</p>
</blockquote>
</div></section><section class="slide" data-pos="1-5-18">
<span class="pos">1-5-18</span>
<div class="slidecontent"><p>Wielding of that power requires you to <strong>have a grasp JS&#39;s quirks</strong>, of which there are many. </p>
<p>These ones are <strong>especially important</strong>:</p>
<ul>
<li><strong>Loose typing</strong> and <strong>truthiness</strong></li>
<li>The <strong>implicit <code>this</code> parameter</strong></li>
<li><strong>Lexical scoping</strong></li>
<li><strong>closures</strong></li>
</ul>
</div></section><section class="slide" data-pos="1-5-19">
<span class="pos">1-5-19</span>
<div class="slidecontent"><p>Here are two <strong>succinct primers</strong> for getting up to speed quickly:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">MDN:s reintroduction to JS</a></li>
<li><a href="http://bonsaiden.github.io/JavaScript-Garden/">JavaScript Garden</a></li>
</ul>
<p>For more <strong>general JS references</strong> we recommend <a href="https://developer.mozilla.org/en-US/">MDN</a> (and <strong>not W3Schools</strong>).</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>1-6.</span> Course resources</h3>
      <p>Goodie bag time!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="1-6-1">
<span class="pos">1-6-1</span>
<div class="slidecontent"><p>You will be provided with a link to a <strong>course resource</strong> bundle, containing:</p>
<ul>
<li>A set of <strong>Demos</strong> - we&#39;ll show them off during the course, but this way you can peruse them at your leasure later on</li>
<li><strong>Exercises</strong>, which you&#39;ll be tasked with accomplishing at set points during the course</li>
<li>A <strong>PDF</strong> of this very presentation</li>
</ul>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 2 / 12</span>
    <h2>Introducing React</h2>
    <p>What&#39;s the fuss about?</p>
</p>
  </div>
  
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Templating</li>
<li>2. Enter React</li>
<li>3. Expressing the UI</li>
<li>4. JSX Basics</li>
<li>5. Installing JSX</li>
<li>6. Updating the UI</li>
<li>7. Nested components</li>
<li>8. Connecting to the DOM</li>
<li>9. React devtools</li>
<li>10. Exercise 1</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-1.</span> Templating</h3>
      <p>Converting data to UI</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-1-1">
<span class="pos">2-1-1</span>
<div class="slidecontent"><p>Here&#39;s the <strong>first thing</strong> you should <strong>learn about React</strong>: it is, at its heart, a <strong>templating solution</strong> for dynamic web sites.</p>
<p>That means that React <strong>converts data to UI</strong>. Commonly this step in an application is called the <strong>View layer</strong>, also known as the <strong>V in MVC</strong>.</p>
</div></section><section class="slide" data-pos="2-1-2">
<span class="pos">2-1-2</span>
<div class="slidecontent"><p>(...although React is <strong>more than that</strong>, but this is where we start!)</p>
</div></section><section class="slide" data-pos="2-1-3">
<span class="pos">2-1-3</span>
<div class="slidecontent"><p>If you have ever used an <strong>application framework</strong> on any platform, you have already used <strong>some sort of templating</strong>.</p>
<p>But even so, let&#39;s take a <strong>closer look at the templating problem</strong> before we get started with React.</p>
<p>We&#39;ll use the <a href="http://handlebarsjs.com" class="link" target="_blank">Handlebars</a> templating library, for no other reason than the fact that it is <strong>very typical</strong>.</p>
</div></section><section class="slide" data-pos="2-1-4">
<span class="pos">2-1-4</span>
<div class="slidecontent"><p>Here&#39;s a <strong>Handlebars template definition</strong> for showing a <strong>user</strong>. Likely this is harboured in a file called <code>user.hbt</code>, where <code>.hbt</code> is short for HandleBars Template.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{imgurl}}"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>{{firstname}} {{lastname}}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{description}}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>Notice the <strong>double curly braces</strong> which are of course <strong>data placeholders</strong>.</p>
</div></section><section class="slide" data-pos="2-1-5">
<span class="pos">2-1-5</span>
<div class="slidecontent"><p>If we send the content of such a file into <strong><code>Handlebars.compile</code></strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> usertemplate = Handlebars.compile(definition);
</code></pre>
<p>...then we get back a <strong>template function</strong> that, when called with some <code>data</code>, will <strong>return the corresponding DOM</strong> structure.</p>
</div></section><section class="slide" data-pos="2-1-6">
<span class="pos">2-1-6</span>
<div class="slidecontent"><p>So if we have this user object...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> data = {
    <span class="hljs-attr">firstname</span>: <span class="hljs-string">'John'</span>,
    <span class="hljs-attr">lastname</span>: <span class="hljs-string">'Doe'</span>,
    <span class="hljs-attr">imgurl</span>: <span class="hljs-string">'http://some.url'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'Best imagination EVER.'</span>
};
</code></pre>
<p>...and feed it to the template function...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> DOM = usertemplate(data);
</code></pre>
</div></section><section class="slide" data-pos="2-1-7">
<span class="pos">2-1-7</span>
<div class="slidecontent"><p>...then <code>DOM</code> will be:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://some.url"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>John Doe<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Best imagination EVER.<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>Here&#39;s the original template definition for comparison:</p>
<pre><code class="lang-handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{imgurl}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span></span><span class="hljs-template-variable">{{firsname}}</span><span class="xml"> </span><span class="hljs-template-variable">{{lastname}}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{description}}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
</div></section><section class="slide" data-pos="2-1-8">
<span class="pos">2-1-8</span>
<div class="slidecontent"><p>Let&#39;s look at the flow zoomed out.</p>
<p>First we <strong>compiled</strong> a <strong>template</strong> from a <strong>definition</strong>:</p>
<p><img src="resources/graphviz/template-compile.svg" alt="Handlebars flow"></p>
<p>That <strong>template</strong> can then <strong>transform data to DOM</strong>:</p>
<p><img src="resources/graphviz/template-usefunc.svg" alt="Handlebars flow"></p>
</div></section><section class="slide" data-pos="2-1-9">
<span class="pos">2-1-9</span>
<div class="slidecontent"><p>We&#39;ve now peeked at how <strong>Handlebars solves the data-to-UI problem</strong>.</p>
<p><strong>What about React?</strong> Let&#39;s find out!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-2.</span> Enter React</h3>
      <p>There&#39;s a new sheriff in town</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-2-1">
<span class="pos">2-2-1</span>
<div class="slidecontent"><p>At <a href="https://www.youtube.com/watch?v=GW0rj4sNH2w" class="link" target="_blank">JSConfUS 2013</a>, <strong>Facebook introduced a new library</strong> - React - with a <strong>radically different approach</strong> to the templating problem that <strong>lifted quite a few eyebrows</strong>.</p>
<p>Then at <a href="https://www.youtube.com/watch?v=x7cQ3mrcKaY" class="link" target="_blank">JSConfEU 2013</a> they gave <strong>more details</strong>, which made people <strong>even more sceptic</strong>.</p>
</div></section><section class="slide" data-pos="2-2-2">
<span class="pos">2-2-2</span>
<div class="slidecontent"><p>Both these videos are <strong>well worth watching</strong>, both for their <strong>explanation of React</strong> and their <strong>historical significance</strong>!</p>
</div></section><section class="slide" data-pos="2-2-3">
<span class="pos">2-2-3</span>
<div class="slidecontent"><p>So! Remember how a <strong>template function</strong> turns data into UI?</p>
<p><img src="resources/graphviz/template-usefunc.svg" alt="Handlebars flow"></p>
</div></section><section class="slide" data-pos="2-2-4">
<span class="pos">2-2-4</span>
<div class="slidecontent"><p><strong>React</strong> does the exact <strong>same thing</strong>, just with a couple of <strong>name changes</strong>:</p>
<p><img src="resources/graphviz/react-basic-component.svg" alt="React flow"></p>
</div></section><section class="slide" data-pos="2-2-5">
<span class="pos">2-2-5</span>
<div class="slidecontent"><p>So a React app is made up by <strong>components</strong>. They are <strong>functions</strong> which you <strong>feed data</strong>, called <strong>props</strong> in React lingo, and you <strong>get DOM back</strong>.</p>
</div></section><section class="slide question" data-pos="2-2-6">
<span class="pos">2-2-6</span>
<div class="slidecontent">
<p>Ok, so a React component <strong>serves the same purpose</strong> as a handlebars template. Then what is the fuss about? <strong>What is different</strong> about React?</p>
</div></section><section class="slide answer" data-pos="2-2-7">
<span class="pos">2-2-7</span>
<div class="slidecontent">
<p>Many things;</p>
<ul>
<li>We <strong>express the UI in JS</strong> instead of HTML</li>
<li>We <strong>rerender the whole UI on every update</strong> (what‽)</li>
<li>Components are <strong>inherently composable</strong></li>
</ul>
</div></section><section class="slide" data-pos="2-2-8">
<span class="pos">2-2-8</span>
<div class="slidecontent"><p>We&#39;ll <strong>take a look</strong> at these differences, and more, in the upcoming sections!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-3.</span> Expressing the UI</h3>
      <p>Dissecting a React component</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-3-1">
<span class="pos">2-3-1</span>
<div class="slidecontent"><p>In Handlebars you <strong>write a definition</strong> in <strong>html</strong> which is then <strong>compiled</strong> into a <strong>template function</strong></p>
<p>In React there is <strong>no compilation</strong>. Instead you <strong>work with JS</strong> and <strong>write the template function yourself</strong>!</p>
</div></section><section class="slide" data-pos="2-3-2">
<span class="pos">2-3-2</span>
<div class="slidecontent"><p>Here&#39;s the mandatory <a href="resources/site/demos/helloworld/index.html" target="_blank">HelloWorld</a> demo!</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> HelloWorld = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> &lt;div&gt;Hello world!<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p>As you can see the <code>HelloWorld</code> <strong>component</strong> is a <strong>plain JavaScript function</strong>, although with some <strong>weird xml syntax</strong> mixed in! That&#39;s called <strong>JSX</strong>, short for <strong>JavaScript XML</strong>.</p>
</div></section><section class="slide" data-pos="2-3-3">
<span class="pos">2-3-3</span>
<div class="slidecontent"><p>The previous example was a bit boring as it was <strong>completely static</strong>. Here instead is a <a href="resources/site/demos/hellosomeone/index.html" target="_blank">HelloSomeone</a> component which greets whoever you tell it to:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> HelloSomeone = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> &lt;div&gt;Hello, {props.who}!<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p>So, <strong>inside JSX</strong> we use <strong>single braces</strong> to <strong>switch back to JavaScript</strong>.</p>
</div></section><section class="slide question" data-pos="2-3-4">
<span class="pos">2-3-4</span>
<div class="slidecontent">
<p>Hang on - how was that better than Handlebars? Wasn&#39;t the earlier Handlebars version...</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, {{who}}!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>...much easier to both read and write?</p>
</div></section><section class="slide answer" data-pos="2-3-5">
<span class="pos">2-3-5</span>
<div class="slidecontent">
<p>For this simple example, yes. But! Just <strong>regular HTML is rarely enough</strong> to formulate the view.</p>
<p>A competent templating solution needs to <strong>provide more opportunity to express logic</strong> in connection with describing what the output should look like.</p>
</div></section><section class="slide" data-pos="2-3-6">
<span class="pos">2-3-6</span>
<div class="slidecontent"><p>Consider for example a view that is supposed to render a bunch of <strong>links to a list of posts</strong>. We need to...</p>
<ul>
<li><strong>repeat</strong> some HTML for every link</li>
<li>or <strong>conditionally</strong> display an apologetic message if there are no posts yet.</li>
</ul>
</div></section><section class="slide" data-pos="2-3-7">
<span class="pos">2-3-7</span>
<div class="slidecontent"><p>Here&#39;s a <strong>Handlebars solution</strong> to the aforementioned problem:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"posts"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Posts<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  {{#if posts}}
    {{#each posts}}
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{this.url}}"</span>&gt;</span>{{this.title}}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    {{/each}}
  {{else}}
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No posts :(<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  {{/if}}
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="2-3-8">
<span class="pos">2-3-8</span>
<div class="slidecontent"><p>As you saw, <strong>Handlebars</strong> - like so many other templating solutions - has <strong>augmented HTML</strong> with <strong>additional logic helpers</strong>, to accommodate for the fact that <strong>views often need logic</strong>.</p>
</div></section><section class="slide" data-pos="2-3-9">
<span class="pos">2-3-9</span>
<div class="slidecontent"><p>This invariably means that you <strong>have to learn these augmentations</strong>, which are always <strong>solution-specific</strong>. Your knowledge on Handlebars helpers is <strong>useless outside a Handlebars context</strong>.</p>
</div></section><section class="slide" data-pos="2-3-10">
<span class="pos">2-3-10</span>
<div class="slidecontent"><p>Here is a <strong>React solution</strong> to the same problem:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> ListOfPosts = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> posts = (props.posts || []).map(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{p.url}</span>&gt;</span>{p.title}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
  );
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"posts"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Posts<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      { props.posts.length &gt; 0 ? posts : <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No posts ☹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> }
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
</div></section><section class="slide" data-pos="2-3-11">
<span class="pos">2-3-11</span>
<div class="slidecontent"><p>Apart from the JSX syntax, everything else in the code is <strong>just pure JavaScript</strong>. Being an actual programming language, it has <strong>no problem with expressing logic</strong>.</p>
</div></section><section class="slide" data-pos="2-3-12">
<span class="pos">2-3-12</span>
<div class="slidecontent"><p><strong>HTML</strong> is of course <strong>better</strong> at <strong>expressing markup</strong>, since it is a markup language. This is why Facebook added the <strong>JSX syntax</strong> to JavaScript.</p>
</div></section><section class="slide" data-pos="2-3-13">
<span class="pos">2-3-13</span>
<div class="slidecontent"><p>In essense: In a view we need to <strong>describe nested data</strong> (HTML) in connection with <strong>logic</strong>. This gives us two options:</p>
<ol>
<li>Use a <strong>nested data language</strong> with <strong>logic helpers</strong></li>
<li>Use a <strong>logic langauge</strong> with <strong>nested data helpers</strong></li>
</ol>
</div></section><section class="slide" data-pos="2-3-14">
<span class="pos">2-3-14</span>
<div class="slidecontent"><p>Since <strong>logic is much more complex than nested data</strong>, option 2 seems much easier.</p>
<p>Yet, <strong>everyone but React chose option 1</strong>!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-4.</span> JSX Basics</h3>
      <p>Waiter, there&#39;s HTML in my JS!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-4-1">
<span class="pos">2-4-1</span>
<div class="slidecontent"><p>As the previous section taught us, <strong>JSX</strong> is a <strong>light syntactic sugar</strong> aiming to make it <strong>easier to express nested data structures</strong> with JavaScript. Let&#39;s explore how it works!</p>
</div></section><section class="slide" data-pos="2-4-2">
<span class="pos">2-4-2</span>
<div class="slidecontent"><p>Consider this line of JSX code:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">foo</span>=<span class="hljs-string">"bar"</span>&gt;</span>Hello <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>WORLD<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="2-4-3">
<span class="pos">2-4-3</span>
<div class="slidecontent"><p>If we <strong>indent</strong> it to show off the <strong>structure</strong>, then it would look like this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">foo</span>=<span class="hljs-string">"bar"</span>&gt;</span>
  Hello
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>
    WORLD
  <span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  !
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="2-4-4">
<span class="pos">2-4-4</span>
<div class="slidecontent"><p>Here&#39;s the <strong>same structure as a diagram</strong>:</p>
<p><img src="resources/graphviz/htmlexample.svg" alt=""></p>
</div></section><section class="slide" data-pos="2-4-5">
<span class="pos">2-4-5</span>
<div class="slidecontent"><p>The JSX is simply <strong>transformed</strong> into matching <strong>nested <code>React.createElement</code></strong> calls:</p>
<pre><code class="lang-javascript">React.createElement(
  <span class="hljs-string">"div"</span>,                 <span class="hljs-comment">// tagname</span>
  {<span class="hljs-attr">foo</span>:<span class="hljs-string">"bar"</span>},           <span class="hljs-comment">// properties</span>
  <span class="hljs-string">"Hello "</span>,              <span class="hljs-comment">// child 1 </span>
  React.createElement(   <span class="hljs-comment">// child 2</span>
    <span class="hljs-string">"strong"</span>,                  <span class="hljs-comment">// tagname</span>
    <span class="hljs-literal">null</span>,                      <span class="hljs-comment">// properties</span>
    <span class="hljs-string">"WORLD"</span>                    <span class="hljs-comment">// child 1</span>
  ),
  <span class="hljs-string">"!"</span>                    <span class="hljs-comment">// child 3</span>
)
</code></pre>
</div></section><section class="slide" data-pos="2-4-6">
<span class="pos">2-4-6</span>
<div class="slidecontent"><p>Here&#39;s the signature for <code>React.createElement</code>:</p>
<pre><code class="lang-javascript">React.createElement(tagNameOrReactClass, props, child1, child2,...)
</code></pre>
<p>Only the <strong>first parameter</strong> is <strong>required</strong>.</p>
</div></section><section class="slide" data-pos="2-4-7">
<span class="pos">2-4-7</span>
<div class="slidecontent"><p>Each <strong>child</strong> is either...</p>
<ul>
<li>a <strong>string</strong> in which case it is treated as a <strong>text node</strong></li>
<li>another <strong><code>React.createElement</code> call</strong>.</li>
</ul>
</div></section><section class="slide" data-pos="2-4-8">
<span class="pos">2-4-8</span>
<div class="slidecontent"><p>Some developers <strong>don&#39;t much care for the JSX syntax</strong>. Especially with some <strong>clever aliasing</strong> it is perfectly fine to <strong>make the calls manually</strong>.</p>
</div></section><section class="slide" data-pos="2-4-9">
<span class="pos">2-4-9</span>
<div class="slidecontent"><p>If we up top do this <strong>aliasing</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> E = React.createElement, N = <span class="hljs-literal">null</span>;
</code></pre>
<p>...then this JSX line...</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">foo</span>=<span class="hljs-string">"bar"</span>&gt;</span>Hello <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>WORLD<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>...can be replaced by this:</p>
<pre><code class="lang-javascript">E(<span class="hljs-string">"div"</span>,{<span class="hljs-attr">foo</span>:<span class="hljs-string">"bar"</span>},<span class="hljs-string">"Hello "</span>,E(<span class="hljs-string">"strong"</span>,N,<span class="hljs-string">"WORLD"</span>),<span class="hljs-string">"!"</span>)
</code></pre>
</div></section><section class="slide" data-pos="2-4-10">
<span class="pos">2-4-10</span>
<div class="slidecontent"><p>Some even take it a step further and create <strong>methods for all tag names</strong>. So instead of doing this...</p>
<pre><code class="lang-javascript">E(<span class="hljs-string">"div"</span>,{<span class="hljs-attr">foo</span>:<span class="hljs-string">"bar"</span>},<span class="hljs-string">"Hello "</span>,E(<span class="hljs-string">"strong"</span>,N,<span class="hljs-string">"WORLD"</span>),<span class="hljs-string">"!"</span>)
</code></pre>
<p>...they can do this:</p>
<pre><code class="lang-javascript">div({<span class="hljs-attr">foo</span>:<span class="hljs-string">"bar"</span>},<span class="hljs-string">"Hello "</span>,strong(N,<span class="hljs-string">"WORLD"</span>),<span class="hljs-string">"!"</span>)
</code></pre>
</div></section><section class="slide" data-pos="2-4-11">
<span class="pos">2-4-11</span>
<div class="slidecontent"><p>The <strong>point</strong> of showing you this isn&#39;t that you shouldn&#39;t use JSX (because you should), but that <strong>JSX isn&#39;t magic</strong>.</p>
<p>It is just a <strong>very small syntax extension</strong> to let us <strong>describe nested data</strong> in a convenient and familiar manner.</p>
</div></section><section class="slide" data-pos="2-4-12">
<span class="pos">2-4-12</span>
<div class="slidecontent"><p>We keep saying the <strong>syntax is simple</strong>, but, <strong>how exactly do we use it</strong>?</p>
<p>Well - we <strong>enter JSX mode</strong> simply by <strong>opening a tag</strong>. If you <strong>close the (last) tag</strong> then you are <strong>back in JS mode</strong> again.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> License = <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Steal this and we'll <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>SMACK YOU SILLY<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
);
</code></pre>
</div></section><section class="slide" data-pos="2-4-13">
<span class="pos">2-4-13</span>
<div class="slidecontent"><p>If we want to <strong>go to JS</strong> from <strong>inside JSX</strong> mode, we use curly braces:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> msg = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Hello, {target || 'mate'}!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
</code></pre>
</div></section><section class="slide" data-pos="2-4-14">
<span class="pos">2-4-14</span>
<div class="slidecontent"><p>Thus the <strong>map</strong> for <strong>travelling between JS and JSX</strong> could be described like this:</p>
<p><img src="resources/graphviz/jsx-js.svg" alt="JS-JSX"></p>
</div></section><section class="slide" data-pos="2-4-15">
<span class="pos">2-4-15</span>
<div class="slidecontent"><p>Although note that this can be <strong>nested to any depth</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{"Inception!"}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-5.</span> Installing JSX</h3>
      <p>Who put the HTML in the JS?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-5-1">
<span class="pos">2-5-1</span>
<div class="slidecontent"><p>Since <strong>JSX isn&#39;t</strong> (yet) a <strong>part of the language</strong>, some kind of <strong>transpilation</strong> must occur. </p>
<p><img src="resources/graphviz/jsx-transpile.svg" alt="transpile"></p>
<p>Otherwise the <strong>browser wouldn&#39;t know</strong> how to interpret the code. But <strong>where does this happen</strong>?</p>
</div></section><section class="slide" data-pos="2-5-2">
<span class="pos">2-5-2</span>
<div class="slidecontent"><p>The absolute <strong>majority of React developers</strong> have a <strong>build step</strong> that doesn&#39;t just take care of <strong>JSX</strong>, but also allows the use of <strong>modules</strong> and perhaps <strong>other ES6/ES7 features</strong>.</p>
<p>This isn&#39;t unique to React, but true for <strong>JavaScript development in general</strong>.</p>
</div></section><section class="slide" data-pos="2-5-3">
<span class="pos">2-5-3</span>
<div class="slidecontent"><p>The <strong>most popular tools</strong> for this are <a href="https://webpack.github.io/" class="link" target="_blank">Webpack</a> and <a href="http://browserify.org/" class="link" target="_blank">Browserify</a>.</p>
<p>They run <strong>JavaScript code on your local machine</strong> using <a href="https://nodejs.org/en/" class="link" target="_blank">Node</a>, which in turn allows you to <strong>download dependencies</strong> using <a href="https://www.npmjs.com/" class="link" target="_blank">npm</a>.</p>
</div></section><section class="slide" data-pos="2-5-4">
<span class="pos">2-5-4</span>
<div class="slidecontent"><p>There&#39;s a lot <strong>more to be said about the build step</strong>, but we&#39;ll leave it for now as we&#39;ll use an <strong>in-browser solution</strong> to avoid complexity.</p>
</div></section><section class="slide" data-pos="2-5-5">
<span class="pos">2-5-5</span>
<div class="slidecontent"><p>What we&#39;ll do is use a browser version of <a href="https://babeljs.io/" class="link" target="_blank">Babel</a>, a library that can do all sorts of <strong>transformations on JavaScript code</strong>, including handling JSX.</p>
</div></section><section class="slide" data-pos="2-5-6">
<span class="pos">2-5-6</span>
<div class="slidecontent"><p>Our setup is very easy - we <strong>include babel as a script tag</strong> along with everything else we need...</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Playing with React<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"lib/react.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"lib/react-dom.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"lib/babel.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="2-5-7">
<span class="pos">2-5-7</span>
<div class="slidecontent"><p>...and then we put our <strong>code</strong> in <strong>script tags</strong> with <strong>type</strong> set to <strong><code>text/babel</code></strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/babel"</span>&gt;</span>
  let MyReactComponent = props =&gt; (
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>I can use <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>JSX<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  );
<span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
</code></pre>
<p>Babel will <strong>notice the type</strong> and <strong>perform the conversion</strong> to regular JS when the <strong>document loads</strong>.</p>
</div></section><section class="slide" data-pos="2-5-8">
<span class="pos">2-5-8</span>
<div class="slidecontent"><p>Note however that this solution is <strong>only for toying and demoing</strong>!</p>
<p>In a <strong>production environment</strong> you should <strong>precompile</strong> in a <strong>build step</strong> as previously discussed.</p>
</div></section><section class="slide question" data-pos="2-5-9">
<span class="pos">2-5-9</span>
<div class="slidecontent">
<p>Whether we do it in a build step or in the browser - why isn&#39;t <strong>converting JSX</strong> a <strong>part of React</strong>?</p>
</div></section><section class="slide answer" data-pos="2-5-10">
<span class="pos">2-5-10</span>
<div class="slidecontent">
<p>Two main reasons;</p>
<ul>
<li>As shown <strong>JSX isn&#39;t mandatory</strong>, you can use React just fine without it.</li>
<li>Also, <strong>JSX has uses outside of React</strong>. It <strong>isn&#39;t a part of React</strong>, but a convenient way to <strong>express nested data</strong>.</li>
</ul>
</div></section><section class="slide" data-pos="2-5-11">
<span class="pos">2-5-11</span>
<div class="slidecontent"><p>As a <strong>non-React example</strong>: here&#39;s JSX being used in <a href="http://cycle.js.org/" class="link" target="_blank">CycleJS</a> code:</p>
<pre><code class="lang-javascript">/** @jsx hJSX */   // &lt;-- this points JSX to use hJSX instead

import {hJSX} from '@cycle/dom';

function main(drivers) {
  return {
    DOM: Observable.timer(0, 1000)
      .map(i =&gt; &lt;div&gt;Seconds elapsed: {i}&lt;/div&gt;)
  };
}
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-6.</span> Updating the UI</h3>
      <p>acting on changes</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-6-1">
<span class="pos">2-6-1</span>
<div class="slidecontent"><p>Let&#39;s zoom back out for a bit and consider the problem of <strong>updating our UI</strong> whenever <strong>data changes</strong>.</p>
<p>Handlebars doesn&#39;t solve this problem at all, it just provides the <strong>initial DOM</strong>. In a dynamic app we need <strong>additional functionality</strong> to <strong>update</strong> the UI when something happens.</p>
</div></section><section class="slide" data-pos="2-6-2">
<span class="pos">2-6-2</span>
<div class="slidecontent"><p>React instead takes a super-simple, brute force approach; it <strong>rerenders everything on every data update</strong>, using the <strong>same function</strong> for the <strong>initial render</strong> and every <strong>subsequent update</strong>.</p>
</div></section><section class="slide question" data-pos="2-6-3">
<span class="pos">2-6-3</span>
<div class="slidecontent">
<p>Fine, <strong>rerendering everything on every update</strong> makes life easier for us developers, but surely that must have a huge <strong>performance penalty</strong>, lead to <strong>loss of scroll position</strong> and lots of other headaches for the user?</p>
</div></section><section class="slide answer" data-pos="2-6-4">
<span class="pos">2-6-4</span>
<div class="slidecontent">
<p>Nope! And here&#39;s why. We actually lied before - a <strong>React component</strong> doesn&#39;t output DOM, but <strong>virtual DOM</strong>.</p>
<p><img src="resources/graphviz/react-basic-component-virtual.svg" alt="React flow"></p>
</div></section><section class="slide" data-pos="2-6-5">
<span class="pos">2-6-5</span>
<div class="slidecontent"><p>The <strong>virtual DOM</strong> is simply a <strong>JavaScript representation</strong> of a DOM structure. For example, this HTML...</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"excerpt"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Chapter 1<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>When MacGyver learned to fly<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="2-6-6">
<span class="pos">2-6-6</span>
<div class="slidecontent"><p>...could be <strong>represented in JS</strong> through something like this:</p>
<pre><code>let virtualDOM = {
<span class="hljs-symbol">  type:</span> <span class="hljs-string">"div"</span>,
<span class="hljs-symbol">  attributes:</span> {<span class="hljs-string">"class"</span>:<span class="hljs-string">"excerpt"</span>},
<span class="hljs-symbol">  children:</span> [{
<span class="hljs-symbol">    type:</span> <span class="hljs-string">"h2"</span>,
<span class="hljs-symbol">    children:</span> [<span class="hljs-string">"Chapter 1"</span>]
  },{
<span class="hljs-symbol">    type:</span> <span class="hljs-string">"p"</span>,
<span class="hljs-symbol">    children:</span> [<span class="hljs-string">"When MacGyver learned to fly"</span>]
  }]
};
</code></pre></div></section><section class="slide" data-pos="2-6-7">
<span class="pos">2-6-7</span>
<div class="slidecontent"><p>To see what <strong>virtual DOM actually looks like</strong>, check out the <a href="resources/site/demos/virtualdom/index.html" target="_blank">VirtualDOM</a> demo!</p>
</div></section><section class="slide" data-pos="2-6-8">
<span class="pos">2-6-8</span>
<div class="slidecontent"><p>The point of the <strong>virtual DOM</strong> is that it <strong>allows React to compare new output with the previous output</strong>, and figure out what changes needs to be made to the actual DOM.</p>
<p><strong>Only those changes</strong> are actually made, so the <strong>complete rerender is just conceptual</strong>.</p>
</div></section><section class="slide" data-pos="2-6-9">
<span class="pos">2-6-9</span>
<div class="slidecontent"><p>So here is what <strong>actually happens</strong> when the props of a component updates:</p>
<p><img src="resources/graphviz/react-basic-component-actual.svg" alt="virtual DOM flow"></p>
</div></section><section class="slide" data-pos="2-6-10">
<span class="pos">2-6-10</span>
<div class="slidecontent"><p>This seemingly simple idea is one of the <strong>biggest advantages of React</strong>, as it <strong>removes lots of complexity</strong> and makes <strong>components easy to reason about</strong>.</p>
</div></section><section class="slide" data-pos="2-6-11">
<span class="pos">2-6-11</span>
<div class="slidecontent"><p>Perhaps you&#39;ve heard of <strong>React Fiber</strong>? That was a <strong>complete rewrite of the diffing engine</strong> for React v16, resulting in <strong>faster diffing and rendering</strong>.</p>
</div></section><section class="slide" data-pos="2-6-12">
<span class="pos">2-6-12</span>
<div class="slidecontent"><p>You don&#39;t need to know more than that since it is <strong>backwards compatible</strong>, buf if you&#39;re interested the <a href="https://github.com/acdlite/react-fiber-architecture">detailed explanation</a> of the rewrite is rather fascinating.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-7.</span> Nested components</h3>
      <p>Matryoshka time!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-7-1">
<span class="pos">2-7-1</span>
<div class="slidecontent"><p>It might already be evident, but still worth emphasising: we can <strong>use components within components</strong>.</p>
<p>This sounds banal, but the <strong>composability</strong> that follows from this is a <strong>huge advantage</strong> of React.</p>
</div></section><section class="slide" data-pos="2-7-2">
<span class="pos">2-7-2</span>
<div class="slidecontent"><p>As an example, let&#39;s say we&#39;ve made <strong>components</strong> for the three <strong>sections of a news site</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Topbar = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>The Superhero Tattler<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>;
);

<span class="hljs-keyword">let</span> Main = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="hljs-keyword">return</span> <span class="hljs-comment">// lots of stuff to generate the main section;</span>
);

<span class="hljs-keyword">let</span> Footer = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div"</span>&gt;</span>© The Tattler 2016<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
);
</code></pre>
</div></section><section class="slide" data-pos="2-7-3">
<span class="pos">2-7-3</span>
<div class="slidecontent"><p>We can now <strong>use these components</strong> in an all-encompassing <strong><code>Site</code> component</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Site = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Topbar</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Main</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>You can try this example in the <a href="resources/site/demos/nestedcomponents/index.html" target="_blank">Nested components</a> demo.</p>
</div></section><section class="slide question" data-pos="2-7-4">
<span class="pos">2-7-4</span>
<div class="slidecontent">
<p>How can JSX <strong>tell the difference between an HTML element and a component</strong>?</p>
<pre><code><span class="hljs-keyword">let</span> output1 = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Topbar</span>/&gt;</span></span>;  <span class="hljs-comment">// Here we mean a component</span>
<span class="hljs-keyword">let</span> output2 = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>/&gt;</span></span>;     <span class="hljs-comment">// Here we mean a regular HTML div element</span>
</code></pre></div></section><section class="slide answer" data-pos="2-7-5">
<span class="pos">2-7-5</span>
<div class="slidecontent">
<p>It is ridiculously simple - if the <strong>name is lower case</strong>, it is assumed to be a <strong>DOM tag</strong>, </p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> output1 = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>/&gt;</span></span>; <span class="hljs-comment">// --&gt; React.createElement("div");</span>
</code></pre>
<p>While <strong>upper case</strong> means a <strong>component</strong> which has to be an actual name in your code.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> output2 = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Div</span>/&gt;</span></span>; <span class="hljs-comment">// --&gt; React.createElement(Div);</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-8.</span> Connecting to the DOM</h3>
      <p>Where does the plug go?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-8-1">
<span class="pos">2-8-1</span>
<div class="slidecontent"><p>We&#39;ve mentioned that <strong>React components don&#39;t output DOM</strong>, but <strong>virtual DOM</strong> (expressed with JSX). But eventually we do of course want to <strong>turn that into actual DOM</strong>.</p>
<p>How is this done?</p>
</div></section><section class="slide" data-pos="2-8-2">
<span class="pos">2-8-2</span>
<div class="slidecontent"><p>Meet <strong><code>ReactDOM</code></strong>. This tiny helper library takes <strong>virtual DOM</strong> and puts it into a <strong>target DOM node</strong>.</p>
<pre><code class="lang-javascript">ReactDOM.render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello world!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"container"</span>)
);
</code></pre>
</div></section><section class="slide" data-pos="2-8-3">
<span class="pos">2-8-3</span>
<div class="slidecontent"><p>The <strong>virtual DOM input</strong> can of course also be the result of a <strong>component render</strong>:</p>
<pre><code class="lang-javascript">let User = props =&gt; &lt;div&gt;Name: {props.name}&lt;/div&gt;;

ReactDOM.render(
  &lt;User name="David"/&gt;,
  document.getElementById("container")
);
</code></pre>
</div></section><section class="slide" data-pos="2-8-4">
<span class="pos">2-8-4</span>
<div class="slidecontent"><p>Note that <strong><code>ReactDOM</code> is sold separately</strong>! We have to <strong>explicitly include it</strong>, as the fox-eyed among you noticed already in our Babel example:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Playing with React<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"lib/react.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"lib/react-dom.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scripτ</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"lib/babel.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">scripτ</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="2-8-5">
<span class="pos">2-8-5</span>
<div class="slidecontent"><p>There is <strong>much to tell still</strong>, but now you have <strong>enough to say hello to the world</strong>!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-9.</span> React devtools</h3>
      <p>The component petri dish</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-9-1">
<span class="pos">2-9-1</span>
<div class="slidecontent"><p>So, hopefully you <strong>remember</strong> the <a href="resources/site/demos/nestedcomponents/index.html" target="_blank">Nested components</a> from a couple sections seconds back? If we open the demo and check <strong>webkit inspector</strong> we&#39;d see something like this:</p>
<p><img src="resources/images/react-devtools-without.png" alt="webkit inspector"></p>
</div></section><section class="slide" data-pos="2-9-2">
<span class="pos">2-9-2</span>
<div class="slidecontent"><p>That is <strong>not super useful</strong>, as there is <strong>no way of telling what output comes from what component</strong>.</p>
<p>As React developers it is very convenient to <strong>think in components</strong>, so not being able to do that in the debugger is <strong>very detrimental</strong>!</p>
</div></section><section class="slide" data-pos="2-9-3">
<span class="pos">2-9-3</span>
<div class="slidecontent"><p>Enter <strong>React devtools</strong>, a <strong>plugin</strong> to <strong>Chrome</strong> or <strong>Firefox</strong>. It provide a <strong>React tab</strong>, which gives the following view instead:</p>
<p><img src="resources/images/react-devtools-with.png" alt="webkit inspector"></p>
<p>Now we can <strong>easily distinguish between the components</strong>!</p>
</div></section><section class="slide" data-pos="2-9-4">
<span class="pos">2-9-4</span>
<div class="slidecontent"><p>It can also <strong>show component details</strong> such as <strong>what props were passed</strong>. Below we show this for the <a href="resources/site/demos/hellosomeone/index.html" target="_blank">HelloSomeone</a> demo:</p>
<p><img src="resources/images/react-devtools-details.png" alt="webkit inspector"></p>
</div></section><section class="slide" data-pos="2-9-5">
<span class="pos">2-9-5</span>
<div class="slidecontent"><p>For more details, check the <a href="https://github.com/facebook/react-devtools" class="link" target="_blank">React Devtools</a> homepage.</p>
<p>The devtools also do <strong>a lot more</strong>, such as showing <strong>state</strong> and <strong>context</strong>. But you don&#39;t know about any of that yet, so, never mind!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>2-10.</span> Exercise 1</h3>
      <p>Dipping our toe in the water</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="2-10-1">
<span class="pos">2-10-1</span>
<div class="slidecontent"><p>Now you are ready to try your hand at the first exercise! You&#39;ll find it in the course resources, named <a href="resources/site/exercises/01_myfirstcomponent/" target="_blank">MyFirstComponent</a>.</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 3 / 12</span>
    <h2>Rendering lessons</h2>
    <p>reindeering</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p><strong>Before</strong> we turn to <strong>more involved components</strong>, let&#39;s <strong>master</strong> the art of <strong>rendering</strong>!</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Faulty render return</li>
<li>2. Close all elements</li>
<li>3. Single VS double braces</li>
<li>4. Reserved names</li>
<li>5. Translation issues</li>
<li>6. Spacing trick</li>
<li>7. Conditional render</li>
<li>8. Component children</li>
<li>9. Component props VS Element props</li>
<li>10. Rendering a list</li>
<li>11. Rendering HTML strings</li>
<li>12. Exercise 2</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-1.</span> Faulty render return</h3>
      <p>There can be only 1</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-1-1">
<span class="pos">3-1-1</span>
<div class="slidecontent"><p>There&#39;s a <strong>very common mistake</strong> that&#39;ll trip most people up at least once regarding <strong>render output</strong>, which involves doing something like this:</p></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Sidebar!<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span>
  &lt;MyComp somedata={data} /&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>Copyright<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span>
);
</code></pre>
</div></section><section class="slide" data-pos="3-1-2">
<span class="pos">3-1-2</span>
<div class="slidecontent"><p>That <strong>won&#39;t work</strong>, since <strong>each element corresponds to a <code>React.createElement</code> call</strong>.</p>
<p>It makes no sense to return 3 function calls.</p>
</div></section><section class="slide" data-pos="3-1-3">
<span class="pos">3-1-3</span>
<div class="slidecontent"><p>If we want to <strong>return 3 things</strong> from a regular function, we have to <strong>put those in an array</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">someData</span>)</span>{
  <span class="hljs-comment">// ... lots of advanced computations</span>
  <span class="hljs-keyword">return</span> [
    something,
    somethingElse,
    sometOtherThing
  ];
}
</code></pre>
</div></section><section class="slide" data-pos="3-1-4">
<span class="pos">3-1-4</span>
<div class="slidecontent"><p>The equivalent in React prior to version 16 was to <strong>wrap it all in a <code>div</code></strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">return</span> (
  &lt;div&gt;
    &lt;h4&gt;Sidebar!&lt;/h4&gt;
    &lt;MyComp somedata={data} /&gt;
    &lt;footer&gt;Copyright&lt;/footer&gt;
  &lt;div&gt;
);
</code></pre>
</div></section><section class="slide" data-pos="3-1-5">
<span class="pos">3-1-5</span>
<div class="slidecontent"><p>In essence we had to always <strong>return exactly 1 element</strong> from the render function.</p>
<p>Even if you wanted to return <strong>just a string</strong>, you <strong>had to wrap that in an element</strong>.</p>
</div></section><section class="slide" data-pos="3-1-6">
<span class="pos">3-1-6</span>
<div class="slidecontent"><p>But, starting from <strong>React v16</strong>, a component can render:</p>
<ul>
<li>an element</li>
<li>a string (or number)</li>
<li>an array</li>
</ul>
<p>No more pointless divs and spans!</p>
<p>See this in action in the <a href="resources/site/demos/react16/index.html" target="_blank">React16</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-2.</span> Close all elements</h3>
      <p>lock all doors</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-2-1">
<span class="pos">3-2-1</span>
<div class="slidecontent"><p>In HTML there are several elements which are considered to be <strong>self-closing</strong> (the proper term is <strong>void elements</strong> if you want to get specific).</p>
<p>For example, you <strong>don&#39;t need to close an image</strong> element:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../imgs/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Edument<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="3-2-2">
<span class="pos">3-2-2</span>
<div class="slidecontent"><p>But in JSX we <strong>have to close all elements</strong>, since they are translated to function calls.</p>
<p>The <strong>closing tag</strong> becomes the <strong>end parens</strong> of the invocation.</p>
</div></section><section class="slide" data-pos="3-2-3">
<span class="pos">3-2-3</span>
<div class="slidecontent"><p>Thus when we want to render an image in JSX, we have to either <strong>self-close</strong> it or provide a <strong>closing tag</strong>.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../imgs/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../imgs/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="3-2-4">
<span class="pos">3-2-4</span>
<div class="slidecontent"><p>If you forget this then the transpiler will throw a <strong>compile time error</strong>.</p>
<p>In other words, this particular error is <strong>easy to catch</strong> and <strong>cannot cause bugs</strong> in your application.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-3.</span> Single VS double braces</h3>
      <p>The more the merrier?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-3-1">
<span class="pos">3-3-1</span>
<div class="slidecontent"><p>As you&#39;ve seen, we go from JSX to JS through using a <strong>single pair of curly braces</strong>. In many other templating languages (Angular, Handlebars) we use double braces.</p>
</div></section><section class="slide" data-pos="3-3-2">
<span class="pos">3-3-2</span>
<div class="slidecontent"><p>In JSX, <strong>double braces</strong> would mean <strong>switching to JS</strong> (the outer braces) and then <strong>defining an object</strong> (the inner braces).</p>
<p>This is sometimes useful if we want to <strong>pass an object to a prop on a component</strong>:</p>
<pre><code class="lang-javascript">&lt;User data={{<span class="hljs-attr">name</span>:<span class="hljs-string">'Steve'</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">7</span>}} /&gt;
</code></pre>
</div></section><section class="slide" data-pos="3-3-3">
<span class="pos">3-3-3</span>
<div class="slidecontent"><p>A <strong>more clear</strong> but also <strong>verbose</strong> way is to <strong>first define the object</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> user = {<span class="hljs-attr">name</span>:<span class="hljs-string">'Steve'</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">7</span>}
</code></pre>
<p>...and then <strong>pass in the variable</strong> instead:</p>
<pre><code class="lang-javascript">&lt;User data={user} /&gt;
</code></pre>
</div></section><section class="slide question" data-pos="3-3-4">
<span class="pos">3-3-4</span>
<div class="slidecontent">
<p>What happens if you forget yourself and <strong>just use single braces</strong> when you <strong>declare an object in a property</strong>?</p>
<pre><code class="lang-javascript">&lt;User data={<span class="hljs-attr">name</span>:<span class="hljs-string">'Steve'</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">7</span>} /&gt;
</code></pre>
</div></section><section class="slide answer" data-pos="3-3-5">
<span class="pos">3-3-5</span>
<div class="slidecontent">
<p>An <strong>error is thrown</strong> when the JSX is being parsed, since this...</p>
<pre><code class="lang-javascript">&lt;User data={<span class="hljs-attr">name</span>:<span class="hljs-string">'Steve'</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">7</span>} /&gt;
</code></pre>
<p>...means that we try to do this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> dataprop = name:<span class="hljs-string">'Steve'</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">7</span> <span class="hljs-comment">// syntax error!</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-4.</span> Reserved names</h3>
      <p>Lost in translation</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-4-1">
<span class="pos">3-4-1</span>
<div class="slidecontent"><p>Because <strong>JSX translates to JavaScript</strong>, words that are <strong>reserved in JS</strong> are <strong>avoided as attribute names</strong>.</p>
</div></section><section class="slide" data-pos="3-4-2">
<span class="pos">3-4-2</span>
<div class="slidecontent"><p>Remember how this JSX string...</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">foo</span>=<span class="hljs-string">"bar"</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>...is translated to this JS call:</p>
<pre><code class="lang-javascript">React.createElement(<span class="hljs-string">"div"</span>,{<span class="hljs-attr">foo</span>:<span class="hljs-string">"bar"</span>},<span class="hljs-string">"Hello"</span>);
</code></pre>
</div></section><section class="slide" data-pos="3-4-3">
<span class="pos">3-4-3</span>
<div class="slidecontent"><p>The <strong>attribute names</strong> in JSX become <strong>object keys</strong> in JS.</p>
<p>So if we write...</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"heading"</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>...then the transpiler would output...</p>
<pre><code class="lang-javascript">React.createElement(<span class="hljs-string">"div"</span>,{<span class="hljs-attr">class</span>:<span class="hljs-string">"heading"</span>},<span class="hljs-string">"Hello"</span>);
</code></pre>
<p>...which would <strong>blow up</strong> in older browsers since <strong><code>class</code> previously wasn&#39;t allowed as a key name</strong>.</p>
</div></section><section class="slide" data-pos="3-4-4">
<span class="pos">3-4-4</span>
<div class="slidecontent"><p>To work around that we <strong>use <code>className</code> instead</strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"heading"</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>React</strong> will <strong>take care of making sure</strong> that the resulting DOM node gets the <strong>correct <code>class</code> attribute</strong>.</p>
</div></section><section class="slide" data-pos="3-4-5">
<span class="pos">3-4-5</span>
<div class="slidecontent"><p>For the same reason we also <strong>use <code>htmlFor</code> instead of <code>for</code></strong> in form labels.</p>
<p>Forgetting about all this and typing <code>class</code> instead of <code>className</code> is a <strong>very common mistake</strong> among beginners and veterans alike, so be warned!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-5.</span> Translation issues</h3>
      <p>English to French to English shenanigans</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-5-1">
<span class="pos">3-5-1</span>
<div class="slidecontent"><p>When we &quot;<strong>send JS into JSX</strong>&quot; using curly braces...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{someValue}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p>...what can we send, and <strong>how is it interpreted</strong>?</p>
</div></section><section class="slide" data-pos="3-5-2">
<span class="pos">3-5-2</span>
<div class="slidecontent"><p>Here&#39;s what!</p>
<p><strong>Strings</strong> or <strong>numbers</strong> end up as <strong>text nodes</strong>, as we&#39;ve seen many times already:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> name = <span class="hljs-string">'Steve'</span>, number = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>My friend {name} has {number} bottles of beer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
<span class="hljs-comment">// --&gt; "&lt;div&gt;My friend Steve has 5 bottles of beer&lt;/div&gt;"</span>
</code></pre>
<p><strong>Earlier versions</strong> of React put a <strong><code>span</code> around the strings</strong>, but that <strong>doesn&#39;t happen anymore</strong>.</p>
</div></section><section class="slide" data-pos="3-5-3">
<span class="pos">3-5-3</span>
<div class="slidecontent"><p><strong>JSX</strong> elements are passed straight through:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> friend = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Steve<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span></span>;
<span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>My friend {friend} is thirsty<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
<span class="hljs-comment">// --&gt; "&lt;div&gt;My friend &lt;strong&gt;Steve&lt;/strong&gt; is thirsty&lt;/div&gt;"</span>
</code></pre>
</div></section><section class="slide" data-pos="3-5-4">
<span class="pos">3-5-4</span>
<div class="slidecontent"><p><strong><code>undefined</code>, <code>null</code> and <code>false</code></strong> don&#39;t create anything:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> favourite = <span class="hljs-literal">null</span>; 
<span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Steve's favourite meal: {favourite}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
<span class="hljs-comment">// --&gt; "&lt;div&gt;Steve's favourite meal: &lt;/div&gt;"</span>
</code></pre>
<p>Curiously, <strong>neither does <code>true</code> or functions</strong>.</p>
</div></section><section class="slide" data-pos="3-5-5">
<span class="pos">3-5-5</span>
<div class="slidecontent"><p>Items in an <strong>array</strong> will be <strong>interpreted individually</strong> (with no space in-between):</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];
<span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Steve can count: {numbers} bottles of beer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="hljs-comment">// --&gt; "&lt;div&gt;Steve can count: 123 bottles of beer&lt;/div&gt;"</span>
</code></pre>
</div></section><section class="slide" data-pos="3-5-6">
<span class="pos">3-5-6</span>
<div class="slidecontent"><p>And finally, for completion&#39;s sake</p>
<ul>
<li>an <strong>object</strong> throws an <strong>error</strong></li>
<li><code>NaN</code> renders the string <code>&quot;NaN&quot;</code>.</li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-6.</span> Spacing trick</h3>
      <p>Room to breathe</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-6-1">
<span class="pos">3-6-1</span>
<div class="slidecontent"><p>Here&#39;s what happens. You define your structure like this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Comp1</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Comp2</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>...but since both <code>Comp1</code> and <code>Comp2</code> are <strong>inline elements</strong>, you need a 
<strong>space between them</strong>. There won&#39;t be.</p>
</div></section><section class="slide" data-pos="3-6-2">
<span class="pos">3-6-2</span>
<div class="slidecontent"><p>Solve through this little trick:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Comp1</span>/&gt;</span>{' '}
  <span class="hljs-tag">&lt;<span class="hljs-name">Comp2</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>The little <code>{&#39; &#39;}</code> spacing will result in a <strong>one-space string</strong> at the correct location:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Comp1</span>/&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Comp2</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-7.</span> Conditional render</h3>
      <p>It depends</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-7-1">
<span class="pos">3-7-1</span>
<div class="slidecontent"><p>Let&#39;s talk a bit about how to <strong>return different things</strong> depending on the data!</p>
<p>First off, in React, this is a <strong>pure JavaScript problem</strong>. We don&#39;t have to look up any specific logic helpers tacked on to the side of HTML, as in Handlebars.</p>
</div></section><section class="slide" data-pos="3-7-2">
<span class="pos">3-7-2</span>
<div class="slidecontent"><p>The <strong>simplest solution</strong>, as shown in the <a href="resources/site/demos/conditionalreturn/index.html" target="_blank">ConditionalReturn</a> demo, is to simply <strong>branch the return statement</strong>:</p>
<pre><code class="lang-javascript">Mirror = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (props.betruthful){
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>The fairest of all is <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Snow-white<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>The fairest of all is <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>You<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
};
</code></pre>
</div></section><section class="slide" data-pos="3-7-3">
<span class="pos">3-7-3</span>
<div class="slidecontent"><p>Often, as in this case, it is more convenient to do the <strong>branching inside the return statement</strong>:</p>
<pre><code class="lang-javascript">Mirror = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    The fairest of all is
    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{props.betruthful ? "Snow-white" : "You"}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>We show this in the <a href="resources/site/demos/conditionalreturn2/index.html" target="_blank">ConditionalReturn2</a> demo.</p>
</div></section><section class="slide" data-pos="3-7-4">
<span class="pos">3-7-4</span>
<div class="slidecontent"><p>Some prefer to <strong>do the branching before returning</strong> by using <strong>variables</strong>, which also works fine:</p>
<pre><code class="lang-javascript">Mirror = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> prettiest = props.betruthful ? <span class="hljs-string">"Snow-white"</span> : <span class="hljs-string">"You"</span>;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      The fairest of all is <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{prettiest}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
</div></section><section class="slide" data-pos="3-7-5">
<span class="pos">3-7-5</span>
<div class="slidecontent"><p>Sometimes we don&#39;t need to branch between different output, but instead display <strong>something or nothing</strong>.</p>
<p>A convenient solution is to use the <strong>JavaScript <code>&amp;&amp;</code> operator</strong> inside JSX as in the <a href="resources/site/demos/onlyiftrue/index.html" target="_blank">OnlyIfTrue</a> demo:</p>
<pre><code class="lang-javascript">Mirror = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The fairest of all is you!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    {props.betruthful &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>...no, actually it's Snow-white.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
</div></section><section class="slide question" data-pos="3-7-6">
<span class="pos">3-7-6</span>
<div class="slidecontent">
<p>There&#39;s a <strong>common related mistake</strong>; can you spot the bug below?</p>
<pre><code><span class="hljs-built_in">return</span> (
  &lt;<span class="hljs-keyword">div</span>&gt;
    {generalInfo}
    {reviews.<span class="hljs-built_in">length</span> &amp;&amp; (
      &lt;p&gt;There are {reviews.<span class="hljs-built_in">length</span>} reviews <span class="hljs-keyword">for</span> you <span class="hljs-keyword">to</span> <span class="hljs-built_in">read</span>!&lt;/p&gt;
    )}
  &lt;/<span class="hljs-keyword">div</span>&gt;
);
</code></pre></div></section><section class="slide answer" data-pos="3-7-7">
<span class="pos">3-7-7</span>
<div class="slidecontent">
<p>Since...</p>
<ul>
<li><strong>numbers become text nodes</strong></li>
<li>the <code>&amp;&amp;</code> operator <strong>returns the falsy value</strong></li>
<li>the <strong>falsy value is 0</strong> in our case</li>
</ul>
<p>...the component will <strong>print the number 0</strong> if there are no reviews! See it happen in the <a href="resources/site/demos/conditionalreturnfail/index.html" target="_blank">ConditionalFail</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-8.</span> Component children</h3>
      <p>What happens to the little ones?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-8-1">
<span class="pos">3-8-1</span>
<div class="slidecontent"><p>It is a <strong>very natural thing</strong> to wrap elements in other elements. That is how we <strong>express the nested structure</strong> of what we want.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>milk<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>toilet paper<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>bread<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="3-8-2">
<span class="pos">3-8-2</span>
<div class="slidecontent"><p>But what happens when we <strong>wrap elements inside a component</strong>?</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>What will happen to me?<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Component</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="3-8-3">
<span class="pos">3-8-3</span>
<div class="slidecontent"><p>Inside a component, we can <strong>access elements</strong> that were passed in like this through <strong><code>props.children</code></strong>:</p>
<pre><code class="lang-javascript">Highlighter = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"highlight"</span>&gt;</span>{props.children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
);

<span class="hljs-keyword">let</span> output = (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Highlighter</span>&gt;</span>
    Clean up <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>NOW<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>!
  <span class="hljs-tag">&lt;/<span class="hljs-name">Highlighter</span>&gt;</span></span>
);

<span class="hljs-comment">// output is &lt;div className="highlight"&gt;Clean... &lt;/div&gt;</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-9.</span> Component props VS Element props</h3>
      <p>You say tomato</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-9-1">
<span class="pos">3-9-1</span>
<div class="slidecontent"><p>When we <strong>render an element</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'something'</span> <span class="hljs-attr">data-myvar</span>=<span class="hljs-string">'sth else'</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p>the props will end up on the actual DOM node:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">'something'</span> <span class="hljs-attr">data-myvar</span>=<span class="hljs-string">'sth else'</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="3-9-2">
<span class="pos">3-9-2</span>
<div class="slidecontent"><p>But when we render a <strong>component</strong>, the <strong>attributes become properties</strong> that are passed to the component, as we&#39;ve seen many times already.</p>
<pre><code class="lang-javascript">let User = props =&gt; &lt;span&gt;Name: {props.name}&lt;/span&gt;;

let output = &lt;User name="David"/&gt;; // ---&gt; Name: David
</code></pre>
</div></section><section class="slide" data-pos="3-9-3">
<span class="pos">3-9-3</span>
<div class="slidecontent"><p>A <strong>common mistake</strong> is to confuse this and type:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">MyComp</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'someclass'</span>&gt;</span>
</code></pre>
<p>This <strong>won&#39;t put the className on the DOM node</strong>, unless <code>MyComp.render</code> explicitly passes it on to its output:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{props.className}</span>&gt;</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-10.</span> Rendering a list</h3>
      <p>What makes me special?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-10-1">
<span class="pos">3-10-1</span>
<div class="slidecontent"><p>It is quite common to want to <strong>render a dynamic array</strong> of something.</p>
<pre><code><span class="hljs-keyword">let</span> <span class="hljs-attr">chores</span> = [<span class="hljs-string">"do dishes"</span>, <span class="hljs-string">"take out trash"</span>, <span class="hljs-string">"water plants"</span>];

<span class="hljs-keyword">let</span> <span class="hljs-attr">output</span> = &lt;Chores <span class="hljs-attr">chores={chores}</span> /&gt;;
</code></pre></div></section><section class="slide" data-pos="3-10-2">
<span class="pos">3-10-2</span>
<div class="slidecontent"><p>This can be easily accomplished by <strong>prerendering</strong> the list in a <strong>variable</strong> which is then <strong>referenced</strong> in the <strong>output</strong>.</p>
<pre><code class="lang-javascript">let Chores = props =&gt; {
  let renderedChores = props.chores.map(chore =&gt; &lt;li&gt;{chore}&lt;/li&gt;);
  return (
    &lt;div&gt;
      &lt;h4&gt;My chores:&lt;/h4&gt;
      &lt;ul&gt;{renderedChores}&lt;/ul&gt;
    &lt;/div&gt;
  );
};
</code></pre>
</div></section><section class="slide" data-pos="3-10-3">
<span class="pos">3-10-3</span>
<div class="slidecontent"><p>However, if we run the code on the previous slide, React will give a <strong>warning</strong> in the <strong>console</strong>:</p>
<p><img src="resources/images/react-listwarning.png" alt="warning"></p>
</div></section><section class="slide" data-pos="3-10-4">
<span class="pos">3-10-4</span>
<div class="slidecontent"><p>Since the <code>map</code> method is called with the <strong>index</strong> as second argument, we can use that <strong>as unique key</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> renderedChores = props.chores.map(<span class="hljs-function">(<span class="hljs-params">chore,n</span>)=&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{n}</span>&gt;</span>{chore}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>; <span class="hljs-comment">// &lt;-- note the `key` prop</span>
);
</code></pre>
<p>Now we will no longer be given a warning.</p>
</div></section><section class="slide" data-pos="3-10-5">
<span class="pos">3-10-5</span>
<div class="slidecontent"><p><strong>Try this out</strong> in the <a href="resources/site/demos/renderlist/index.html" target="_blank">Renderlist</a> demo.</p>
</div></section><section class="slide question" data-pos="3-10-6">
<span class="pos">3-10-6</span>
<div class="slidecontent">
<p>Hey, but, since the code <strong>worked without a key</strong> you might wonder - <strong>what&#39;s the big deal?</strong></p>
</div></section><section class="slide answer" data-pos="3-10-7">
<span class="pos">3-10-7</span>
<div class="slidecontent">
<p>It usually doesn&#39;t matter, but if we do <strong>dynamic updates</strong> in a list, then React <strong>must be able to distinguish</strong> between components.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-11.</span> Rendering HTML strings</h3>
      <p>microwave meals ftw</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-11-1">
<span class="pos">3-11-1</span>
<div class="slidecontent"><p>Imagine you got a string of HTML from somewhere:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> longList = <span class="hljs-string">"&lt;ul&gt;&lt;li&gt;...&lt;/li&gt;&lt;/ul&gt;"</span>;
</code></pre>
<p>How do we <strong>render that from inside a component</strong>?</p>
</div></section><section class="slide" data-pos="3-11-2">
<span class="pos">3-11-2</span>
<div class="slidecontent"><p>Simply <strong>outputting the string doesn&#39;t work</strong>, it will just render as plain text.</p>
<pre><code class="lang-javascript">let Static = props =&gt; &lt;div&gt;{props.static}&lt;/div&gt;;

let output = &lt;Static static="&lt;h2&gt;Hello!&lt;/h2&gt;"/&gt;;
// ---&gt; "&lt;h2&gt;Hello!&lt;/h2&gt;"
</code></pre>
</div></section><section class="slide" data-pos="3-11-3">
<span class="pos">3-11-3</span>
<div class="slidecontent"><p>Here&#39;s how to do it: We <strong>put the string in the <code>__html</code> prop</strong> of an object:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> htmlObj = {<span class="hljs-attr">__html</span>:longList};
</code></pre>
<p>...and then we <strong>feed that to the <code>dangerouslySetInnerHTML</code> attribute</strong> of a container tag:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{htmlObj}</span> /&gt;</span>
</code></pre></div></section><section class="slide" data-pos="3-11-4">
<span class="pos">3-11-4</span>
<div class="slidecontent"><p>Or we can <strong>do it in one swoop</strong> without going via <code>htmlObj</code>:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{__html:longList}}</span> /&gt;</span>
</code></pre><p>Note how we end up with <strong>double braces</strong> - the <strong>outer pair</strong> is to <strong>shift from JSX to JavaScript</strong>, and the <strong>inner pair declares an object</strong>.</p>
</div></section><section class="slide question" data-pos="3-11-5">
<span class="pos">3-11-5</span>
<div class="slidecontent">
<p>Wasn&#39;t that <strong>needlessly complicated</strong>?</p>
</div></section><section class="slide answer" data-pos="3-11-6">
<span class="pos">3-11-6</span>
<div class="slidecontent">
<p>Yes. This is <strong>by design</strong> as injecting html like this is often a bad (and unsafe) idea.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>3-12.</span> Exercise 2</h3>
      <p>Turning up the heat</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="3-12-1">
<span class="pos">3-12-1</span>
<div class="slidecontent"><p>Let us now hone our rendering skills by taking on <strong>Exercise 2</strong>!</p>
<p>Find it in the course resources with the name <a href="resources/site/exercises/02_renderchallenges/" target="_blank">RenderChallenges</a>.</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 4 / 12</span>
    <h2>React level 2</h2>
    <p>Things&#39;re getting serious</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p>Armed with the <strong>basics</strong> of <strong>components</strong> and <strong>JSX</strong>, we&#39;re now ready to explore <strong>more powerful API:s</strong>!</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Class syntax</li>
<li>2. Stateful components</li>
<li>3. Event handling</li>
<li>4. Lifecycle methods</li>
<li>5. Refs</li>
<li>6. Forms</li>
<li>7. Communication</li>
<li>8. Styling</li>
<li>9. Exercise 3</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-1.</span> Class syntax</h3>
      <p>When plain clothes just won&#39;t cut it</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-1-1">
<span class="pos">4-1-1</span>
<div class="slidecontent"><p>So far we have <strong>defined components</strong> as <strong>plain functions</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> User = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> &lt;div&gt;Name: {props.name}&lt;<span class="hljs-regexp">/div&gt;;</span>
</code></pre>
</div></section><section class="slide" data-pos="4-1-2">
<span class="pos">4-1-2</span>
<div class="slidecontent"><p>But there are actually <strong>two ways to define a component</strong>. The plain function components (or PFC:s) are a <strong>shorthand</strong> for this <strong>full definition</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="4-1-3">
<span class="pos">4-1-3</span>
<div class="slidecontent"><p>Our <strong>initial plain function</strong> ended up as a <strong><code>render</code> method</strong> in the class definition.</p>
<p>...with <strong>one key difference</strong> however. Did you notice it?</p>
</div></section><section class="slide" data-pos="4-1-4">
<span class="pos">4-1-4</span>
<div class="slidecontent"><p>The <strong>props</strong> are <strong>not passed in</strong> to the render method. Instead we <strong>access them using <code>this.props</code></strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide question" data-pos="4-1-5">
<span class="pos">4-1-5</span>
<div class="slidecontent">
<p>This syntax seems <strong>clunkier in every way</strong>. Why would we ever want to use it?</p>
</div></section><section class="slide answer" data-pos="4-1-6">
<span class="pos">4-1-6</span>
<div class="slidecontent">
<p>The reason is that for more advanced components, there is <strong>more to the story than the render method</strong>.</p>
<p>If we need to <strong>say more than one thing</strong>, we must have a <strong>definition object</strong> - or a <strong>class</strong> - to encapsulate those things.</p>
</div></section><section class="slide" data-pos="4-1-7">
<span class="pos">4-1-7</span>
<div class="slidecontent"><p>There&#39;s <strong>more details</strong> on classes in the <strong>ES6 appendix</strong>.</p>
<p>We&#39;ll also get exposed to more class mechanisms in the upcoming <strong>event handling section</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-2.</span> Stateful components</h3>
      <p>I have my secrets</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-2-1">
<span class="pos">4-2-1</span>
<div class="slidecontent"><p>Remember when we said that <strong>a component UI</strong> is the <strong>result of its props</strong>?</p>
<p><img src="resources/graphviz/react-basic-component-virtual.svg" alt="component"></p>
</div></section><section class="slide" data-pos="4-2-2">
<span class="pos">4-2-2</span>
<div class="slidecontent"><p>That was a <strong>lie</strong>. The UI is a result of props <strong>and state</strong>.</p>
<p><img src="resources/graphviz/react-basic-component-state.svg" alt="component"></p>
</div></section><section class="slide" data-pos="4-2-3">
<span class="pos">4-2-3</span>
<div class="slidecontent"><p>So <strong>what is the difference</strong> between these two?</p>
<ul>
<li><strong>Props</strong> are <strong>passed down from the parent</strong>. They are <strong>immutable</strong>, from the perspective of the receiving component.</li>
<li><strong>State</strong> is <strong>data</strong> that is <strong>only of internal interest</strong>. It lives only inside the component, and the <strong>component is in control</strong> of it.</li>
</ul>
</div></section><section class="slide" data-pos="4-2-4">
<span class="pos">4-2-4</span>
<div class="slidecontent"><p>The <strong>similarity</strong> however is that when <strong>either of them change</strong>, we <strong>rerun the render</strong> method.</p>
</div></section><section class="slide" data-pos="4-2-5">
<span class="pos">4-2-5</span>
<div class="slidecontent"><p>Also, much like props, <strong>state is always an object</strong>.</p>
<pre><code>{
  <span class="hljs-attribute">editing</span>: false,
  currentValue: <span class="hljs-string">'Batman'</span>
}
</code></pre><p>We can think of the <strong>individual keys</strong> in that object as <strong>state variables</strong>.</p>
</div></section><section class="slide list" data-pos="4-2-6">
<span class="pos">4-2-6</span>
<div class="slidecontent">
<p>There are <strong>three parts</strong> to component state:</p>
<ul>
<li><span>a</span>setting initial state</li>
<li><span>b</span>reading current state</li>
<li><span>c</span>updating state</li>
</ul>
</div></section><section class="slide num numA" data-pos="4-2-7">
<span class="pos">4-2-7</span>
<div class="slidecontent">
<p>The <strong>initial state</strong> is set inside the <strong><code>constructor</code></strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StateExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {<span class="hljs-attr">data1</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">data2</span>: <span class="hljs-string">'bar'</span>};
  }
  <span class="hljs-comment">// ... more code here ...</span>
}
</code></pre>
<p>This means that <strong>PFC:s cannot have state</strong>, as they are just a rendering function.</p>
</div></section><section class="slide num numB" data-pos="4-2-8">
<span class="pos">4-2-8</span>
<div class="slidecontent">
<p>We <strong>read from state</strong> simply by <strong>accessing <code>this.state</code></strong>:</p>
<pre><code><span class="hljs-function"><span class="hljs-title">render</span><span class="hljs-params">()</span></span>{
  <span class="hljs-keyword">if</span> (this<span class="hljs-selector-class">.state</span><span class="hljs-selector-class">.editing</span>){
    <span class="hljs-comment">// return editing version</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// return view version</span>
  }
}
</code></pre></div></section><section class="slide num numC" data-pos="4-2-9">
<span class="pos">4-2-9</span>
<div class="slidecontent">
<p>To <strong>update state</strong> we must call <strong><code>this.setState</code></strong>. That method expects an object with all parts we want to update:</p>
<pre><code class="lang-javascript">cancel() {
  <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">editing</span>: <span class="hljs-literal">false</span>});
}
</code></pre>
<p>Note that any <strong>existing state keys not mentioned</strong> here will be <strong>unchanged</strong>.</p>
</div></section><section class="slide" data-pos="4-2-10">
<span class="pos">4-2-10</span>
<div class="slidecontent"><p>Also - we might need to do some gymnastics to <strong>make sure <code>this</code> is correct inside the method</strong>:</p>
<pre><code class="lang-javascript">cancel() {
  <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">editing</span>: <span class="hljs-literal">false</span>});
}
</code></pre>
<p>But we&#39;ll address that in the <strong>upcoming section</strong>!</p>
</div></section><section class="slide" data-pos="4-2-11">
<span class="pos">4-2-11</span>
<div class="slidecontent"><p>Remember to <strong>never mutate <code>this.state</code> directly</strong>!</p>
<pre><code class="lang-javascript">cancel() {
  <span class="hljs-keyword">this</span>.state.editing = <span class="hljs-literal">false</span>; <span class="hljs-comment">// this should use setState instead!</span>
}
</code></pre>
<p>The state will be updated, but the <strong>component will not rerender</strong> since React doesn&#39;t know something just happened!</p>
</div></section><section class="slide" data-pos="4-2-12">
<span class="pos">4-2-12</span>
<div class="slidecontent"><p>Let&#39;s internalise the <strong>concepts of state</strong> in a demo: <a href="resources/site/demos/state/index.html" target="_blank">State</a></p>
<p>There&#39;s <strong>more to say</strong> about <code>setState</code>, but we&#39;re saving that for a later chapter!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-3.</span> Event handling</h3>
      <p>Waiter, there are inline event handlers in my HTML!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-3-1">
<span class="pos">4-3-1</span>
<div class="slidecontent"><p>Something we haven&#39;t seen yet - how do we <strong>attach event handlers</strong> in React?</p>
<p>We can already realise that it is <strong>not done through regular means</strong>, since we <strong>don&#39;t have access to the real DOM</strong>.</p>
</div></section><section class="slide" data-pos="4-3-2">
<span class="pos">4-3-2</span>
<div class="slidecontent"><p>The answer will feel like <strong>going back in time</strong>: we simply declare <strong>inline event handlers</strong> as props!</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> ClickableWord = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> clickHandler = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> alert(<span class="hljs-string">"You clicked me!"</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{clickHandler}</span>&gt;</span>Click me!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
}
</code></pre>
</div></section><section class="slide" data-pos="4-3-3">
<span class="pos">4-3-3</span>
<div class="slidecontent"><p>When rendering, React will <strong>notice the prop</strong> named onClick, and <strong>attach an event handler</strong> accordingly.</p>
<p>This works for <strong>all DOM events</strong>; <code>onSubmit</code>, <code>onFocus</code>, etc.</p>
</div></section><section class="slide" data-pos="4-3-4">
<span class="pos">4-3-4</span>
<div class="slidecontent"><p>Much like jQuery it will pass in a <strong>normalised event object</strong> to the callback.</p>
<p>For the full <strong>list of supported events</strong> and <strong>contents of the event object</strong>, see the <strong>API docs</strong> here: <a href="https://facebook.github.io/react/docs/events.html" class="link" target="_blank">Events</a></p>
</div></section><section class="slide question" data-pos="4-3-5">
<span class="pos">4-3-5</span>
<div class="slidecontent">
<p>Aren&#39;t we <strong>mixing behaviour and visuals</strong> when we declare event handlers in the render function?</p>
</div></section><section class="slide answer" data-pos="4-3-6">
<span class="pos">4-3-6</span>
<div class="slidecontent">
<p>We are mixing technologies, but <strong>not concerns</strong>. Our component definition encapsulates everything about the component.</p>
</div></section><section class="slide" data-pos="4-3-7">
<span class="pos">4-3-7</span>
<div class="slidecontent"><p>When using <strong>Class components</strong> it is customary (but not technically necessary) to <strong>use component methods as event handlers</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClickableWord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  clickHandler() {
    alert(<span class="hljs-string">"You clicked me!"</span>);
  }
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.clickHandler}</span>&gt;</span>Click me!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="4-3-8">
<span class="pos">4-3-8</span>
<div class="slidecontent"><p>There&#39;s a trap here - the methods are <strong>not autobound to the instance</strong>, so we must be careful when we need to access <code>this</code>. This <strong>won&#39;t work</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClickableWord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  showExplanation() {
    alert(<span class="hljs-keyword">this</span>.props.explanation); <span class="hljs-comment">// BOOM! `this.props` doesnt exist</span>
  }
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.showExplanation}</span>&gt;</span>{this.props.word}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide list" data-pos="4-3-9">
<span class="pos">4-3-9</span>
<div class="slidecontent">
<p>There are <strong>many ways</strong> to solve this. Here are a few common ones:</p>
<ul>
<li><span>a</span>anonymous handler calling the method</li>
<li><span>b</span>bind the handler in the constructor</li>
<li><span>c</span>define the handler in the constructor</li>
<li><span>d</span>assign arrow funcs to class prop</li>
</ul>
</div></section><section class="slide num numA" data-pos="4-3-10">
<span class="pos">4-3-10</span>
<div class="slidecontent">
<p>By <strong>calling the handler as a method</strong> in an arrow function, <code>this</code> will be correct:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClickableWord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  showExplanation(e) {
    alert(<span class="hljs-keyword">this</span>.props.explanation);
  }
  render() {
    <span class="hljs-keyword">let</span> handler = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.showExplanation()
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handler}</span>&gt;</span>{this.props.word}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide num numB" data-pos="4-3-11">
<span class="pos">4-3-11</span>
<div class="slidecontent">
<p>...or we can <strong>bind it in the constructor</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClickableWord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props){
    <span class="hljs-keyword">super</span>(props); <span class="hljs-comment">// because we have to, see the ES6 appendix!</span>
    <span class="hljs-keyword">this</span>.showExplanation = <span class="hljs-keyword">this</span>.showExplanation.bind(<span class="hljs-keyword">this</span>);
  }
  showExplanation(e) {
    alert(<span class="hljs-keyword">this</span>.props.explanation);
  }
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.showExplanation}</span>&gt;</span>{this.props.word}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide num numC" data-pos="4-3-12">
<span class="pos">4-3-12</span>
<div class="slidecontent">
<p>...or we simply define it as an <strong>arrow function in the constructor</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClickableWord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props){
    <span class="hljs-keyword">super</span>(props);
    <span class="hljs-keyword">this</span>.showExplanation = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> alert(<span class="hljs-keyword">this</span>.props.explanation);
  }
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.showExplanation}</span>&gt;</span>{this.props.word}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide num numD" data-pos="4-3-13">
<span class="pos">4-3-13</span>
<div class="slidecontent">
<p>Finally, if you&#39;re using TypeScript, we can actually <strong>initialise instance variables in the definition</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClickableWord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  showExplanation = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> alert(<span class="hljs-keyword">this</span>.props.explanation)
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.showExplanation}</span>&gt;</span>{this.props.word}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="4-3-14">
<span class="pos">4-3-14</span>
<div class="slidecontent"><p>Curiously, the context inside the definition is actually the future instance!</p>
<p>This syntax <strong>isn&#39;t possible in regular JavaScript</strong> yet, but it is coming.</p>
</div></section><section class="slide" data-pos="4-3-15">
<span class="pos">4-3-15</span>
<div class="slidecontent"><p>You can <strong>explore the examples</strong> in the <a href="resources/site/demos/events/index.html" target="_blank">Events</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-4.</span> Lifecycle methods</h3>
      <p>The circle of life</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-4-1">
<span class="pos">4-4-1</span>
<div class="slidecontent"><p>There are several <strong>lifecycle methods</strong> that you can define to hook into certain moments in the life of a component.</p>
</div></section><section class="slide" data-pos="4-4-2">
<span class="pos">4-4-2</span>
<div class="slidecontent"><p>When the component is <strong>created</strong>, the following methods are called:</p>
<p><img src="resources/graphviz/react-lifecycle-start.svg" alt="on creation"></p>
</div></section><section class="slide" data-pos="4-4-3">
<span class="pos">4-4-3</span>
<div class="slidecontent"><p>Then, when a component will update (because <strong>state</strong> or <strong>props</strong> <strong>changed</strong>), the following are called with the new props and state:</p>
<p><img src="resources/graphviz/react-lifecycle-update.svg" alt="on creation"></p>
</div></section><section class="slide" data-pos="4-4-4">
<span class="pos">4-4-4</span>
<div class="slidecontent"><p>You can also <strong><code>forceUpdate</code></strong>:</p>
<p><img src="resources/graphviz/react-lifecycle-update-force.svg" alt="on creation"></p>
<p>But, that is <strong>rarely necessary</strong>, if ever.</p>
</div></section><section class="slide" data-pos="4-4-5">
<span class="pos">4-4-5</span>
<div class="slidecontent"><p>Finally, <strong>before</strong> a component is <strong>destroyed</strong>, <strong><code>componentWillUnmount</code></strong> is called. This is a good place to do listener and interval <strong>cleanup</strong>.</p>
</div></section><section class="slide" data-pos="4-4-6">
<span class="pos">4-4-6</span>
<div class="slidecontent"><p>Explore these methods in the <a href="resources/site/demos/lifecycle/index.html" class="demo" target="_blank">Lifecycle</a> demo.</p>
</div></section><section class="slide question" data-pos="4-4-7">
<span class="pos">4-4-7</span>
<div class="slidecontent">
<p>What are the <strong>common use cases</strong> for these methods?</p>
</div></section><section class="slide answer" data-pos="4-4-8">
<span class="pos">4-4-8</span>
<div class="slidecontent">
<p>Sometimes we might <strong>kick off something</strong> in <strong><code>componentDidMount</code></strong>, and there are times when implementing <strong><code>shouldComponentUpdate</code></strong> can <strong>help performance</strong>, but normally you <strong>don&#39;t need to bother</strong>.</p>
</div></section><section class="slide" data-pos="4-4-9">
<span class="pos">4-4-9</span>
<div class="slidecontent"><p>In React v16 a <strong>new hook</strong>, <code>componentDidCatch(error, info)</code>, is introduced. With that we can <strong>catch errors thrown by children</strong> and grandchildren (but not by the current component).</p>
<p>See it happen in the <a href="resources/site/demos/errorcatching/index.html" target="_blank">ErrorCatching</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-5.</span> Refs</h3>
      <p>There&#39;s a string attached</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-5-1">
<span class="pos">4-5-1</span>
<div class="slidecontent"><p>Sometimes you want to <strong>keep a line open to something you have rendered</strong>. This is accomplished through <strong>the <code>ref</code> syntax</strong>.</p>
</div></section><section class="slide" data-pos="4-5-2">
<span class="pos">4-5-2</span>
<div class="slidecontent"><p>It works by <strong>attaching a function to the <code>ref</code> prop</strong> of the output part you are interested in:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">Comp</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{refFunc}</span> /&gt;</span>
</code></pre><p>Now, when the above is rendered, <strong><code>refFunc</code> will be called with <code>Comp</code></strong> as a parameter. See this in action in the <a href="resources/site/demos/refcomponent/index.html" target="_blank">Refcomponent</a> demo.</p>
</div></section><section class="slide question" data-pos="4-5-3">
<span class="pos">4-5-3</span>
<div class="slidecontent">
<p>But, why would I want to reference a child component like that? Doesn&#39;t it <strong>break uni-directional flow</strong> to do that instead of passing properties?</p>
</div></section><section class="slide answer" data-pos="4-5-4">
<span class="pos">4-5-4</span>
<div class="slidecontent">
<p>Absolutely correct! This is a tool for <strong>very special cases</strong>, for example if you are gradually converting a codebase to React.</p>
</div></section><section class="slide" data-pos="4-5-5">
<span class="pos">4-5-5</span>
<div class="slidecontent"><p><code>Refs</code> are much more often used on <strong>regular DOM elements</strong>, when we want to do something with a DOM node.</p>
<p>For example, in the <a href="resources/site/demos/refjquery/index.html" target="_blank">RefjQuery</a> demo we take a rendered node and execute a (silly) jQuery plugin on it.</p>
</div></section><section class="slide" data-pos="4-5-6">
<span class="pos">4-5-6</span>
<div class="slidecontent"><p>A common use case is to <strong>interact with inputs</strong>. If we render this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{</span> (<span class="hljs-attr">el</span>)=&gt;</span> this._input = el }/&gt;
</code></pre>
<p>...then in <code>componentDidMount</code> we could do this...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">this</span>._input.focus();
</code></pre>
<p>...and elsewhere we can get the input content like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">this</span>._input.value
</code></pre>
</div></section><section class="slide" data-pos="4-5-7">
<span class="pos">4-5-7</span>
<div class="slidecontent"><p>There&#39;ll be more on form shenanigans in the upcoming Forms section, but for now you can try this example in the <a href="resources/site/demos/refinput/index.html" target="_blank">RefInput</a> demo.</p>
</div></section><section class="slide" data-pos="4-5-8">
<span class="pos">4-5-8</span>
<div class="slidecontent"><p>There is also a <strong>legacy syntax</strong> where you <strong>give <code>ref</code> a string</strong>. The previous example would become:</p>
<pre><code class="lang-jsx"><span class="hljs-comment">// render</span>
&lt;input ref=<span class="hljs-string">"_input"</span>/&gt;


<span class="hljs-comment">// interacting with the node</span>
<span class="hljs-keyword">this</span>.refs._input
</code></pre>
<p>This is demonstrated in the <a href="resources/site/demos/refbystring/index.html" target="_blank">RefByString</a> demo.</p>
</div></section><section class="slide" data-pos="4-5-9">
<span class="pos">4-5-9</span>
<div class="slidecontent"><p>At first glance the <strong>string syntax looks easier</strong>, it has been deemed <strong>unidiomatic</strong> and <strong>will eventually be deprecated</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-6.</span> Forms</h3>
      <p>Sign here and here and here and</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-6-1">
<span class="pos">4-6-1</span>
<div class="slidecontent"><p>It might not be immediately apparent, but <strong>React isn&#39;t a good fit for forms</strong>. </p>
<p>The reason is that the <strong>HTML model</strong> for forms is built on <strong>node mutation</strong>, which doesn&#39;t (or at least shouldn&#39;t) exist in React!</p>
</div></section><section class="slide" data-pos="4-6-2">
<span class="pos">4-6-2</span>
<div class="slidecontent"><p>Consider this vanilla <strong>HTML input element</strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"John Doe"</span>/&gt;</span>
</code></pre>
<p>The provided <strong><code>value</code> prop</strong> will set the <strong>initial value</strong>. When the <strong>user types</strong> in the field, the <code>value</code> prop of the node will be <strong>updated</strong>. So we can <strong>query the current value</strong> like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> val = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"name"</span>).value;
</code></pre>
</div></section><section class="slide" data-pos="4-6-3">
<span class="pos">4-6-3</span>
<div class="slidecontent"><p>This <strong>doesn&#39;t make sense</strong> in a React setting. The <strong>props are set at render</strong>, and will <strong>never mutate</strong>. If <strong>state or props for the component change</strong>, we simply <strong>rerender</strong> it, but in-between renders nothing should happen!</p>
</div></section><section class="slide" data-pos="4-6-4">
<span class="pos">4-6-4</span>
<div class="slidecontent"><p>For example, this means that if we <strong>give an input a <code>value</code></strong>, that value cannot be changed! See the <a href="resources/site/demos/petrifiedinput/index.html" target="_blank">PetrifiedInput</a> demo.</p>
</div></section><section class="slide list" data-pos="4-6-5">
<span class="pos">4-6-5</span>
<div class="slidecontent">
<p>So <strong>how do we do it</strong> in React? Well, there are <strong>two different patterns</strong>!</p>
<ul>
<li><span>a</span>Uncontrolled</li>
<li><span>b</span>Controlled</li>
</ul>
</div></section><section class="slide num numA" data-pos="4-6-6">
<span class="pos">4-6-6</span>
<div class="slidecontent">
<p>The first is the one you&#39;ve already seen in the <a href="resources/site/demos/refinput/index.html" target="_blank">RefInput</a> demo, which is called having <strong>uncontrolled inputs</strong>.</p>
<p>This pattern closely resembles what happens in a <strong>regular DOM form</strong>, where we let the DOM node keep its own state.</p>
</div></section><section class="slide" data-pos="4-6-7">
<span class="pos">4-6-7</span>
<div class="slidecontent"><p>Having an <strong>uncontrolled input</strong> involves the following:</p>
<ul>
<li>We set <strong>initial value</strong> using the <strong><code>defaultValue</code></strong> prop</li>
<li>The form control will <strong>mutate its <code>value</code> prop</strong> when the user makes changes</li>
<li>We can <strong>read the value</strong> using the <strong>event object</strong> in the <strong>change event</strong>.</li>
<li>Or we <strong>fetch the value</strong> later by using a <strong><code>ref</code></strong>!</li>
</ul>
<p>Check out the dedicated <a href="resources/site/demos/uncontrolled/index.html" target="_blank">Uncontrolled</a> demo.</p>
</div></section><section class="slide num numB" data-pos="4-6-8">
<span class="pos">4-6-8</span>
<div class="slidecontent">
<p>In contrast, the more idiomatic pattern is called having <strong>controlled inputs</strong>. It works like this:</p>
<ul>
<li>We set <strong>initial value</strong> using the <strong><code>value</code> prop</strong> as usual</li>
<li>That value is <strong>provided by component prop or state</strong></li>
<li>We update that value in the <strong>change event</strong></li>
<li>This <strong>causes a rerender</strong> which will <strong>update the component</strong>!</li>
</ul>
<p>Check it out in the <a href="resources/site/demos/controlled/index.html" target="_blank">Controlled</a> demo.</p>
</div></section><section class="slide question" data-pos="4-6-9">
<span class="pos">4-6-9</span>
<div class="slidecontent">
<p>So, <strong>comparing uncontrolled and controlled</strong> inputs - is it fair to say that...</p>
<ul>
<li>with an <strong>uncontrolled input</strong> we store the <strong>state</strong> in the <strong>DOM</strong>?</li>
<li>with a <strong>controlled input</strong> we store the <strong>state</strong> in the <strong>component state</strong></li>
</ul>
</div></section><section class="slide answer" data-pos="4-6-10">
<span class="pos">4-6-10</span>
<div class="slidecontent">
<p>Yes, exactly! :)</p>
<p>Also note that it <strong>never makes sense</strong> to have a <strong><code>ref</code> on a controlled input</strong> to access its value, since their values are in the state or props of the component. There&#39;s no need to read the value from the DOM node.</p>
</div></section><section class="slide" data-pos="4-6-11">
<span class="pos">4-6-11</span>
<div class="slidecontent"><p>You can read <strong>all the detail about forms</strong> on the <a href="https://facebook.github.io/react/docs/forms.html" class="link" target="_blank">Forms</a> documentation, but we&#39;ll mention <strong>two more things</strong> that are different about using forms in React:</p>
</div></section><section class="slide" data-pos="4-6-12">
<span class="pos">4-6-12</span>
<div class="slidecontent"><p>First off: In <strong>regular HTML</strong> you give <strong>default options</strong> a <strong><code>selected</code> attribute</strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">select</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"U"</span>&gt;</span>Urd; that what was<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"V"</span> <span class="hljs-attr">selected</span>&gt;</span>Verdandi; that which is<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"S"</span>&gt;</span>Skuld; That which will be<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
</div></section><section class="slide" data-pos="4-6-13">
<span class="pos">4-6-13</span>
<div class="slidecontent"><p>In <strong>React</strong> we instead set <code>value</code> or <code>defaultValue</code> on the <strong><code>select</code></strong> tag itself (which makes more semantic sense anyway):</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">"V"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"U"</span>&gt;</span>Urd; that what was<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"V"</span>&gt;</span>Verdandi; that which is<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"S"</span>&gt;</span>Skuld; That which will be<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p><strong>Try this out</strong> in the <a href="resources/site/demos/select/index.html" target="_blank">Select</a> demo.</p>
</div></section><section class="slide" data-pos="4-6-14">
<span class="pos">4-6-14</span>
<div class="slidecontent"><p>Finally <strong>the second difference</strong> we wanted to highlight: in <strong>regular HTML</strong> we provide <strong>initial value</strong> to a <strong>textarea</strong> by passing it as a <strong>child</strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>&gt;</span>Enter your comments here<span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
</code></pre>
<p>In React you should instead pass it as a <strong><code>value</code> or <code>defaultValue</code> prop</strong>.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">"Enter your comments here"</span>/&gt;</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-7.</span> Communication</h3>
      <p>Parent-child interaction</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-7-1">
<span class="pos">4-7-1</span>
<div class="slidecontent"><p>A <strong>parent</strong> can <strong>give data to a child</strong> easy enough by <strong>passing props</strong>.</p>
<p>But how does a <strong>child give data to a parent</strong>?</p>
</div></section><section class="slide" data-pos="4-7-2">
<span class="pos">4-7-2</span>
<div class="slidecontent"><p>An easy and decoupling pattern is for the <strong>parent</strong> to <strong>pass a callback as a prop</strong>.</p>
<p>When the child wants to <strong>give data back to the parent</strong>, it can simply <strong>invoke the callback</strong> with the data.</p>
</div></section><section class="slide" data-pos="4-7-3">
<span class="pos">4-7-3</span>
<div class="slidecontent"><p>Thus the <strong>communication cycle</strong> can be described like this:</p>
<p><img src="resources/graphviz/react-communication.svg" alt="communication cycle"></p>
</div></section><section class="slide" data-pos="4-7-4">
<span class="pos">4-7-4</span>
<div class="slidecontent"><p>Look at this <strong>parent</strong> teaching his child to count:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props){
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = {<span class="hljs-attr">count</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">feedback</span>: <span class="hljs-string">"Let's begin!"</span>};
        <span class="hljs-keyword">this</span>.receiveAnswer = <span class="hljs-keyword">this</span>.receiveAnswer.bind(<span class="hljs-keyword">this</span>);
    }
    receiveAnswer(answer) { <span class="hljs-comment">/* next slide */</span>}
    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Parent:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
        {this.state.feedback} What comes after {this.state.count}?
                <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">reply</span>=<span class="hljs-string">{this.receiveAnswer}</span> <span class="hljs-attr">number</span>=<span class="hljs-string">{this.state.count}/</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        );
    }
};</span>
</code></pre>
</div></section><section class="slide" data-pos="4-7-5">
<span class="pos">4-7-5</span>
<div class="slidecontent"><p>The parent <strong>passes <code>this.receiveAnswer</code> as a callback to <code>Child</code></strong>, along with <code>this.state.count</code>. Here&#39;s the code for <code>receiveAnswer</code>:</p>
<pre><code>receiveAnswer(answer) {
  <span class="hljs-keyword">if</span> (answer === <span class="hljs-keyword">this</span>.state.count + <span class="hljs-number">1</span>){
    <span class="hljs-keyword">this</span>.setState({
      count: <span class="hljs-keyword">this</span>.state.count+<span class="hljs-number">1</span>,
      feedback: <span class="hljs-string">'Good! Lets try the next one:'</span>
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>.setState({
      feedback: <span class="hljs-string">'No, try again!'</span>
    });
  }
}
</code></pre></div></section><section class="slide" data-pos="4-7-6">
<span class="pos">4-7-6</span>
<div class="slidecontent"><p>And here&#39;s the corresponding <strong>child</strong>, who will <strong>call the callback</strong> as appropriate.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Child = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> correctAnswer = props.number + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> cb = props.reply;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Child: <span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span>=&gt;</span> cb(correctAnswer)}&gt;{correctAnswer}!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span>=&gt;</span> cb(correctAnswer+1)}&gt;{correctAnswer+1}!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>Try this example</strong> in the <a href="resources/site/demos/communication/index.html" target="_blank">Communication</a> demo.</p>
</div></section><section class="slide" data-pos="4-7-7">
<span class="pos">4-7-7</span>
<div class="slidecontent"><p>There is also a <strong>more complex</strong> (and <strong>less silly</strong>) example of the same pattern in the <a href="resources/site/demos/communication2/index.html" target="_blank">Communication2</a> demo.</p>
<p>And finally, <a href="resources/site/demos/communication3/index.html" target="_blank">Communication3</a> is a communication version of the button race in the <a href="resources/site/demos/state/index.html" target="_blank">State</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-8.</span> Styling</h3>
      <p>Waiter, there&#39;s CSS in my HTML in my JS!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-8-1">
<span class="pos">4-8-1</span>
<div class="slidecontent"><p>Not only does React make you mix <strong>JS</strong> and <strong>HTML</strong>, it also gives you an opportunity to throw <strong>CSS</strong> into the same messy mix!</p>
</div></section><section class="slide" data-pos="4-8-2">
<span class="pos">4-8-2</span>
<div class="slidecontent"><p>The motivation is the same as before - <strong>separating technologies</strong> is <strong>not the same</strong> as <strong>separating concerns</strong>.</p>
<p>If some <strong>styles</strong> are <strong>only of concern to the component</strong>, then they <strong>belong inside the component definition</strong>.</p>
</div></section><section class="slide" data-pos="4-8-3">
<span class="pos">4-8-3</span>
<div class="slidecontent"><p>The styles are applied through giving a <strong>style object</strong> to the <strong><code>style</code></strong> prop of a tag:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> myStyles = {
  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'blue'</span>,
  <span class="hljs-attr">borderRadius</span>: <span class="hljs-string">'5px'</span>
};

<span class="hljs-keyword">let</span> output = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{myStyles}</span>&gt;</span>{somecontent}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
</div></section><section class="slide" data-pos="4-8-4">
<span class="pos">4-8-4</span>
<div class="slidecontent"><p>Note how, much like with the prop names, we must use <strong>camelCasing</strong> instead of <strong>hyphen-connection</strong>.</p>
<p>See it all in action in the <a href="resources/site/demos/style/index.html" target="_blank">Style</a> demo!</p>
</div></section><section class="slide" data-pos="4-8-5">
<span class="pos">4-8-5</span>
<div class="slidecontent"><p><strong>Style objects</strong> are a powerful way to really <strong>encapsulate a component</strong>. And since we&#39;re just dealing with objects, you can pass in <strong>global style objects</strong> and mix and match as you want, <strong>without</strong> worrying about <strong>specificity clashes</strong>.</p>
</div></section><section class="slide" data-pos="4-8-6">
<span class="pos">4-8-6</span>
<div class="slidecontent"><p>But you need to <strong>be mindful</strong> about mixing inline styles like this with regular CSS file, and maintain a good discipline on what to put where.</p>
</div></section><section class="slide" data-pos="4-8-7">
<span class="pos">4-8-7</span>
<div class="slidecontent"><p>There are also libraries like <a href="https://github.com/pluralsight/react-styleable" class="link" target="_blank">React-Styleable</a> which allows you to <strong>declare your styles in CSS files</strong> but then still <strong>scope to a specific component</strong>.</p>
<p>See the <a href="resources/site/demos/styleable/index.html" target="_blank">Styleable</a> demo for an example!</p>
</div></section><section class="slide" data-pos="4-8-8">
<span class="pos">4-8-8</span>
<div class="slidecontent"><p>Also, the community is currently exploring <strong>handling CSS from JavaScript space</strong>. This has <strong>immense potential</strong> as there&#39;s <strong>no global scope</strong> (unless we want there to be), but the idea is very young and <strong>best practices has yet to settle</strong>.</p>
<p>If you&#39;re curious, check out <a href="https://github.com/Khan/aphrodite">Aphrodite</a>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>4-9.</span> Exercise 3</h3>
      <p>It&#39;s getting hotter still</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-9-1">
<span class="pos">4-9-1</span>
<div class="slidecontent"><p>The next exercise, named <a href="resources/site/exercises/03_roster/" target="_blank">Roster</a>, will task you with creating components involving the concepts from this chapter!</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 5 / 12</span>
    <h2>Introducing Redux</h2>
    <p>rewho?</p>
</p>
  </div>
  
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. What Redux is</li>
<li>2. State and actions</li>
<li>3. The reducer</li>
<li>4. The store</li>
<li>5. Action creators</li>
<li>6. Redux resources</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>5-1.</span> What Redux is</h3>
      <p>Exploring beyond the borders of React</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="5-1-1">
<span class="pos">5-1-1</span>
<div class="slidecontent"><p>As we said before, <strong>React has a component focus</strong>. It has <strong>no opinions</strong> on how you deal with data beyond component state.</p>
<p>But surely they must give us <strong>some pointers</strong> on how to do it?</p>
</div></section><section class="slide" data-pos="5-1-2">
<span class="pos">5-1-2</span>
<div class="slidecontent"><p>Facebook provided a &quot;pattern&quot; to follow which they call <a href="https://facebook.github.io/flux/" class="link" target="_blank">Flux</a>. This isn&#39;t a library, but an idea on how to implement <strong>uni-directional data flow</strong>.</p>
</div></section><section class="slide" data-pos="5-1-3">
<span class="pos">5-1-3</span>
<div class="slidecontent"><p><strong>Uni-directional data flow</strong> is the idea that data flows <strong>one way</strong> through the app:</p>
<p><img src="resources/graphviz/flux-flow.svg" alt="flux flow"></p>
</div></section><section class="slide" data-pos="5-1-4">
<span class="pos">5-1-4</span>
<div class="slidecontent"><p>Since Facebook preached Flux there has been a <strong>gazillion flux libraries</strong>, and the internet is littered with articles like &quot;comparing the top 10 flux libraries&quot;.</p>
</div></section><section class="slide" data-pos="5-1-5">
<span class="pos">5-1-5</span>
<div class="slidecontent"><p>Fortunately for you, now <a href="http://redux.js.org/" class="link" target="_blank">Redux</a> has come along and <strong>ended the war</strong> by virtue of being the <strong>simplest</strong> and <strong>most powerful</strong> solution!</p>
</div></section><section class="slide" data-pos="5-1-6">
<span class="pos">5-1-6</span>
<div class="slidecontent"><p>In spite of being a <strong>tiny</strong> library (less than 100 lines if we remove some warnings and dev fluff), Redux holds some <strong>big ideas</strong> that simply blew the competition out of the water.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>5-2.</span> State and actions</h3>
      <p>How Redux handles data and events</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="5-2-1">
<span class="pos">5-2-1</span>
<div class="slidecontent"><p>In Redux your <strong>entire app state</strong> is stored in <strong>one single object</strong>.</p>
<pre><code class="lang-javascript">{
  <span class="hljs-attr">users</span>: {
    <span class="hljs-attr">id1</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"David"</span>, ... }
  },
  <span class="hljs-attr">posts</span>: {
    <span class="hljs-attr">id1</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"My opinion on NEXO Knights"</span>, ... }
  },
  ...
}
</code></pre>
</div></section><section class="slide" data-pos="5-2-2">
<span class="pos">5-2-2</span>
<div class="slidecontent"><p>This is in direct <strong>contrast to most other Flux libraries</strong>, who often advocate &quot;thematic stores&quot;; a <code>userStore</code>, a <code>postStore</code>, a <code>commentStore</code>, etc.</p>
</div></section><section class="slide" data-pos="5-2-3">
<span class="pos">5-2-3</span>
<div class="slidecontent"><p>Redux&#39; seemingly simple one-store idea holds a surprising amount of power:</p>
<ul>
<li>It makes <strong>hydration</strong> easy</li>
<li>It <strong>lowers complexity</strong></li>
</ul>
</div></section><section class="slide" data-pos="5-2-4">
<span class="pos">5-2-4</span>
<div class="slidecontent"><p>The twin to that idea is that <strong>every event</strong> that affects that data should be <strong>represented by an action object</strong>:</p>
<pre><code class="lang-javascript">{<span class="hljs-attr">type</span>: <span class="hljs-string">'ADDPOST'</span>, <span class="hljs-attr">authorid</span>: <span class="hljs-string">'user1'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'...'</span>  }
{<span class="hljs-attr">type</span>: <span class="hljs-string">'RECEIVEDATA'</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">'...'</span>}
{<span class="hljs-attr">type</span>: <span class="hljs-string">'DELETEPOST'</span>, <span class="hljs-attr">postid</span>: <span class="hljs-string">'post47'</span>}
</code></pre>
<p> This object has a <strong><code>type</code></strong> property and an <strong>optional data</strong> payload.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>5-3.</span> The reducer</h3>
      <p>Deriving updated state</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="5-3-1">
<span class="pos">5-3-1</span>
<div class="slidecontent"><p>The reducer is so simple it is hard to explain: it is a <strong>pure function</strong> that <strong>takes the state and an action</strong>, and <strong>returns a new state</strong>:</p>
<p><img src="resources/graphviz/redux-reducer.svg" alt="reducer"></p>
</div></section><section class="slide" data-pos="5-3-2">
<span class="pos">5-3-2</span>
<div class="slidecontent"><p>Traditionally the reducer is coded as a <strong>switch</strong> statement with <strong>one case per action type</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> reducer = <span class="hljs-function">(<span class="hljs-params">currentstate,action</span>)=&gt;</span> {
  <span class="hljs-keyword">switch</span>(action.type){
    <span class="hljs-keyword">case</span> C.RECEIVE_QUOTES_DATA:        <span class="hljs-comment">// ..</span>
    <span class="hljs-keyword">case</span> C.AWAIT_NEW_QUOTE_RESPONSE:   <span class="hljs-comment">// ..</span>
    <span class="hljs-keyword">case</span> C.RECEIVE_NEW_QUOTE_RESPONSE: <span class="hljs-comment">// ..</span>
    <span class="hljs-keyword">case</span> C.START_QUOTE_EDIT:           <span class="hljs-comment">// ..</span>
    <span class="hljs-keyword">case</span> C.FINISH_QUOTE_EDIT:          <span class="hljs-comment">// ..</span>
    <span class="hljs-keyword">case</span> C.SUBMIT_QUOTE_EDIT:          <span class="hljs-comment">// ..</span>
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> currentstate;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="5-3-3">
<span class="pos">5-3-3</span>
<div class="slidecontent"><p><strong>In each case</strong> we do some computation depending on the action contents, and then we <strong>return a new state</strong>.</p>
<p>Note that we must <strong>not mutate the current state</strong> - it is important that the reducer stays pure and has <strong>no side effects</strong>.</p>
</div></section><section class="slide" data-pos="5-3-4">
<span class="pos">5-3-4</span>
<div class="slidecontent"><p>To prevent this from becoming unwieldy we can make <strong>separate reducers</strong> for different parts of the app state,
and then <em>combine</em> them into one big reducer. We&#39;ll take a look at that later.</p>
</div></section><section class="slide" data-pos="5-3-5">
<span class="pos">5-3-5</span>
<div class="slidecontent"><p>Perhaps you noticed the <strong>default</strong> path that just passes the current state on?</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> reducer = <span class="hljs-function">(<span class="hljs-params">currentstate,action</span>)=&gt;</span> {
  <span class="hljs-keyword">switch</span>(action.type){
    <span class="hljs-comment">// ..lots of cases..</span>
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> currentstate;
  }
}
</code></pre>
<p>This is important as Redux will fire &quot;native&quot; actions that your reducer doesn&#39;t know about.</p>
</div></section><section class="slide" data-pos="5-3-6">
<span class="pos">5-3-6</span>
<div class="slidecontent"><p>Up until this point you still haven&#39;t seen <strong>any Redux code</strong>. All we have talked about are <strong>ideas</strong>, which again goes to show the potency of the Redux model.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>5-4.</span> The store</h3>
      <p>A house for our data</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="5-4-1">
<span class="pos">5-4-1</span>
<div class="slidecontent"><p>A <strong>Redux store</strong> consists of three things:</p>
<p><img src="resources/graphviz/redux-store.svg" alt="Redux store"></p>
<ul>
<li>A <strong>reducer</strong> to calculate new state</li>
<li>An in-memory <strong>data state</strong> which is updated using the reducer when we pass in an action to the store</li>
<li>A <strong>subscription service</strong> which notifies interested parties when the in-memory data is updated</li>
</ul>
</div></section><section class="slide" data-pos="5-4-2">
<span class="pos">5-4-2</span>
<div class="slidecontent"><p>We <strong>initialize a store</strong> using a <strong>reducer</strong> and an (optional) <strong>initial state</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> store = Redux.createStore(reducer,initialstate);
</code></pre>
<p>Look, our first line of Redux code!</p>
</div></section><section class="slide" data-pos="5-4-3">
<span class="pos">5-4-3</span>
<div class="slidecontent"><p>We can then <strong>query the state</strong> from the store...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> currentstate = store.getState();
</code></pre>
<p>...and also <strong>update the state</strong> by giving it an action:</p>
<pre><code class="lang-javascript">store.dispatch(action);
<span class="hljs-keyword">let</span> updatedstate = store.getState();
</code></pre>
</div></section><section class="slide" data-pos="5-4-4">
<span class="pos">5-4-4</span>
<div class="slidecontent"><p>From what we&#39;ve seen so far, the <strong>store</strong> could be <strong>implemented</strong> like this:</p>
<pre><code class="lang-javascript">Redux.createStore: <span class="hljs-function">(<span class="hljs-params">reducer,initialstate</span>)=&gt;</span> {
  <span class="hljs-keyword">let</span> _state = initialstate;
  <span class="hljs-keyword">return</span> {
    dispatch(action) {
      _state = reducer(_state,action);
    },
    getState() {
      <span class="hljs-keyword">return</span> _state;
    }
  }
};
</code></pre>
</div></section><section class="slide" data-pos="5-4-5">
<span class="pos">5-4-5</span>
<div class="slidecontent"><p>In reality <strong>components don&#39;t often use <code>getState</code></strong> to query the store, instead the <strong>store notifies the components</strong> whenever there is a change. Remember the <strong>flux flow</strong>:</p>
<p><img src="resources/graphviz/flux-flow.svg" alt="flux flow"></p>
<p>This is accomplished through a <strong>subscription service</strong>.</p>
</div></section><section class="slide" data-pos="5-4-6">
<span class="pos">5-4-6</span>
<div class="slidecontent"><p>The store has a <strong><code>subscribe</code></strong> method...</p>
<pre><code>store.subscribe(myCallback)<span class="hljs-comment">;</span>
</code></pre><p>...which will store all listeners in an array.</p>
<pre><code class="lang-javascript">subscribe(cb) {
  _subscribers.push(cb);
},
</code></pre>
</div></section><section class="slide" data-pos="5-4-7">
<span class="pos">5-4-7</span>
<div class="slidecontent"><p>These will then be <strong>triggered on every dispatch</strong>:</p>
<pre><code class="lang-javascript">dispatch(action) {
  _state = reducer(_state,action);
  _subscribers.forEach(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> cb());
},
</code></pre>
</div></section><section class="slide" data-pos="5-4-8">
<span class="pos">5-4-8</span>
<div class="slidecontent"><p>Here&#39;s our <strong>full conceptual code</strong> again:</p>
<pre><code class="lang-javascript">Redux.createStore = <span class="hljs-function">(<span class="hljs-params">reducer,initialstate</span>)=&gt;</span> {
  <span class="hljs-keyword">let</span> _state = initialstate, _subscribers = [];
  <span class="hljs-keyword">return</span> {
    subscribe(cb) { _subscribers.push(cb); },
    dispatch(action) {
      _state = reducer(_state,action);
      _subscribers.forEach(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> cb());
    },
    getState() { <span class="hljs-keyword">return</span> _state; }
  }
};
</code></pre>
</div></section><section class="slide" data-pos="5-4-9">
<span class="pos">5-4-9</span>
<div class="slidecontent"><p>In reality the store is <strong>somewhat more complex</strong> since it allows cancellation of subscriptions, checks for faulty API usage and some other stuff. </p>
<p>But <strong>all of the important stuff</strong> fit onto the previous slide, which yet again shows the succinctness of Redux&#39; approach.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>5-5.</span> Action creators</h3>
      <p>Where do actions come from?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="5-5-1">
<span class="pos">5-5-1</span>
<div class="slidecontent"><p><strong>Action creators</strong> aren&#39;t part of the Redux API, but a useful idea that <strong>views shouldn&#39;t create actions</strong> themselves.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// a bad idea</span>
myViewClickEventHandler(e) {
  <span class="hljs-keyword">let</span> newText = <span class="hljs-keyword">this</span>.field.value;
  <span class="hljs-keyword">let</span> action = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'ADDQUOTE'</span>,
    <span class="hljs-attr">text</span>: newText
  };
  store.dispatch(action);
}
</code></pre>
</div></section><section class="slide" data-pos="5-5-2">
<span class="pos">5-5-2</span>
<div class="slidecontent"><p>Instead we make action creators that <strong>convert input to actions</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> actionCreators = {
  addQuote(newText) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'ADDQUOTE'</span>,
      <span class="hljs-attr">text</span>: newText
    }
  }
}
</code></pre>
</div></section><section class="slide" data-pos="5-5-3">
<span class="pos">5-5-3</span>
<div class="slidecontent"><p>...and use these in our views:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// a better idea, but still not optimal</span>
myViewClickEventHandler(e) {
  <span class="hljs-keyword">let</span> newText = <span class="hljs-keyword">this</span>.field.value;
  action = actionCreators.addQuote(newText);
  store.dispatch(action);
}
</code></pre>
</div></section><section class="slide" data-pos="5-5-4">
<span class="pos">5-5-4</span>
<div class="slidecontent"><p>Slightly cleaner, but it is still <strong>irksome</strong> to have to <strong>reference the store</strong> in our view. Let&#39;s make <strong>bound variants</strong> which automatically dispatches!</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> boundActionCreators = {};
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> action <span class="hljs-keyword">in</span> actionCreators){
  <span class="hljs-comment">// using rest params and array spread, see the ES6 appendix!</span>
  boundActionCreators[action] = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> action = actionCreators[action](...args);
    store.dispatch(action);
  }
}
</code></pre>
</div></section><section class="slide" data-pos="5-5-5">
<span class="pos">5-5-5</span>
<div class="slidecontent"><p>Now our views can consume the bound action creators instead, which means they can be <strong>completely unaware of Redux</strong>!</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// the best idea</span>
myViewClickEventHandler(e) {
  <span class="hljs-keyword">let</span> newText = <span class="hljs-keyword">this</span>.field.value;
  boundActionCreators.addQuote(newText);
}
</code></pre>
</div></section><section class="slide" data-pos="5-5-6">
<span class="pos">5-5-6</span>
<div class="slidecontent"><p>That was nice, but <strong>creating the bound variants</strong> was a bit of an <strong>effort</strong>! Redux therefore <strong>provides a util to do it more easily</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> boundActionCreators = Redux.bindActionCreators(
  actionCreators,
  store.dispatch
);
</code></pre>
</div></section><section class="slide" data-pos="5-5-7">
<span class="pos">5-5-7</span>
<div class="slidecontent"><p>Having action creators isn&#39;t just about <strong>avoiding store references in our views</strong>. Another advantage of action creators is that we now have <strong>every data-affecting event</strong> defined in <strong>one single place</strong>.</p>
</div></section><section class="slide" data-pos="5-5-8">
<span class="pos">5-5-8</span>
<div class="slidecontent"><p>Later we&#39;ll...</p>
<ul>
<li>find out how to do <strong>asynchronous action creators</strong> (by using <strong><code>Redux-Thunk</code></strong>)</li>
<li>look at convenient ways to <strong>marry Redux to React</strong> (by using <strong><code>React-Redux</code></strong>).</li>
</ul>
</div></section><section class="slide" data-pos="5-5-9">
<span class="pos">5-5-9</span>
<div class="slidecontent"><p>Zooming out, we can now <strong>translate</strong> the <strong>flux flow</strong>...</p>
<p><img src="resources/graphviz/flux-flow.svg" alt="flux"></p>
<p>...to use <strong>Redux terms</strong>:</p>
<p><img src="resources/graphviz/redux-flow.svg" alt="redux flow"></p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>5-6.</span> Redux resources</h3>
      <p>I want moar!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="5-6-1">
<span class="pos">5-6-1</span>
<div class="slidecontent"><p>The contents of this chapter will be solidified in the upcoming Redux example chapter, but before we go there we&#39;ll give you some <strong>pointers on where to go</strong> for <strong>more Redux content</strong> after this course.</p>
</div></section><section class="slide" data-pos="5-6-2">
<span class="pos">5-6-2</span>
<div class="slidecontent"><p>The already linked-to <a href="http://redux.js.org/" class="link" target="_blank">Redux</a> official homepage should be your first stop.</p>
<p>It doesn&#39;t just contain the <strong>API docs</strong>, but also a <strong>thorough explanation</strong> of the rationale behind the library.</p>
</div></section><section class="slide" data-pos="5-6-3">
<span class="pos">5-6-3</span>
<div class="slidecontent"><p>After that you&#39;d do well to devour the free <a href="https://egghead.io/series/getting-started-with-redux" class="link" target="_blank">Egghead Redux course</a> made by Redux&#39; creator Dan Abramov. The bite-sized and to-the-point episodes make the course <strong>very accessible</strong>. </p>
<p>The course does <strong>not involve React</strong> at all, opting to focus on the <strong>essentials of Redux</strong>.</p>
</div></section><section class="slide" data-pos="5-6-4">
<span class="pos">5-6-4</span>
<div class="slidecontent"><p>For a meatier but just-as-free video course, check out <a href="https://learnredux.com/" class="link" target="_blank">Learn Redux</a> by prolific developer and teacher Wes Bos.</p>
<p>This is a <strong>more practical course</strong> throughout which you will be building an application with React and Redux.</p>
<p>...and React Router, which you have yet to meet! The main focus of the course, however, is on Redux.</p>
</div></section><section class="slide" data-pos="5-6-5">
<span class="pos">5-6-5</span>
<div class="slidecontent"><p>Beyond these resources a good starting point is <a href="https://github.com/xgrommx/awesome-redux" class="link" target="_blank">Awesome Redux</a>, a <strong>curated collection of links</strong> to various Redux-related content around the internetz.</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 6 / 12</span>
    <h2>A Redux example</h2>
    <p>Learning by doing</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p>We&#39;ll now <strong>walk through</strong> a simple <strong>Redux example app</strong> in order to internalise the <strong>basic Redux concepts</strong>.</p>
<p>We won&#39;t use React or any other dependencies.</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. App idea</li>
<li>2. State shape</li>
<li>3. Initial state</li>
<li>4. Action shapes</li>
<li>5. Reducer</li>
<li>6. Store</li>
<li>7. Action creators</li>
<li>8. UI</li>
<li>9. UI updater</li>
<li>10. Interaction</li>
<li>11. Tying it together</li>
<li>12. Exercise 4</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-1.</span> App idea</h3>
      <p>What are we going to build?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-1-1">
<span class="pos">6-1-1</span>
<div class="slidecontent"><p>Let&#39;s make a simple <strong>counter</strong> app. The counter increases whenever the user clicks a <strong>button</strong>, by an amount controlled by an <strong>input</strong>. It should look something like this:</p>
<p><img src="resources/images/redux-example-screen.png" alt="Map"></p>
</div></section><section class="slide" data-pos="6-1-2">
<span class="pos">6-1-2</span>
<div class="slidecontent"><p>As we&#39;ll find this makes for a very tiny app, yet it will still touch on all the various aspects of Redux.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-2.</span> State shape</h3>
      <p>What should our data look like?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-2-1">
<span class="pos">6-2-1</span>
<div class="slidecontent"><p>Now that we have an <strong>app idea</strong>, let&#39;s decide on the <strong>state shape</strong> for our app!</p>
</div></section><section class="slide" data-pos="6-2-2">
<span class="pos">6-2-2</span>
<div class="slidecontent"><p>In Redux, all the <strong>app state</strong> is contained in <strong>one single object</strong>. One of the first things we need to do is therefore to design the shape of that state.</p>
</div></section><section class="slide" data-pos="6-2-3">
<span class="pos">6-2-3</span>
<div class="slidecontent"><p>However, in our simple counter app, we only need to track one single thing - the current count. Thus the state for our app could simply be a <strong>single number</strong>!</p>
</div></section><section class="slide" data-pos="6-2-4">
<span class="pos">6-2-4</span>
<div class="slidecontent"><p>But to make it somewhat less artificial, let&#39;s make it into an <strong>object</strong> like this:</p>
<pre><code class="lang-javascript">{<span class="hljs-attr">count</span>: <span class="hljs-number">7</span>}
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-3.</span> Initial state</h3>
      <p>Kicking things off</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-3-1">
<span class="pos">6-3-1</span>
<div class="slidecontent"><p>Having decided on a <strong>state shape</strong>, however simple, we can now define an <strong>initial state</strong>.</p>
</div></section><section class="slide" data-pos="6-3-2">
<span class="pos">6-3-2</span>
<div class="slidecontent"><p>For our little app that only entails <strong>one single decision</strong> - at what number should we start the count?</p>
<p>Let&#39;s go with 0!</p>
</div></section><section class="slide" data-pos="6-3-3">
<span class="pos">6-3-3</span>
<div class="slidecontent"><p>Now we can write our <strong>first line of code</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> initialstate = {<span class="hljs-attr">count</span>: <span class="hljs-number">0</span>};
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-4.</span> Action shapes</h3>
      <p>What can happen?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-4-1">
<span class="pos">6-4-1</span>
<div class="slidecontent"><p>Let&#39;s design the <strong>actions</strong> needed for our <strong>app idea</strong>!</p>
</div></section><section class="slide" data-pos="6-4-2">
<span class="pos">6-4-2</span>
<div class="slidecontent"><p>In a Redux app, everything that <strong>affects app state</strong> is represented by an <strong>action object</strong> with...</p>
<ul>
<li>a mandatory <strong><code>type</code></strong> property</li>
<li>and eventual further <strong>data</strong> payload props.</li>
</ul>
</div></section><section class="slide" data-pos="6-4-3">
<span class="pos">6-4-3</span>
<div class="slidecontent"><p><strong>Incrementing the counter</strong> is the only thing that happens in our app. Let&#39;s decide that the <strong>action</strong> describing this event looks like this:</p>
<pre><code class="lang-json">{
  type: &#39;INCREMENT&#39;,
  by: 3
}
</code></pre>
</div></section><section class="slide" data-pos="6-4-4">
<span class="pos">6-4-4</span>
<div class="slidecontent"><p>A side note - Normally we would <strong>isolate all string constants</strong> such as <code>&quot;INCREMENT&quot;</code> to a <strong>separate file</strong>, but in this simple example we&#39;ll live with having a single magic string like this.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-5.</span> Reducer</h3>
      <p>Introducing the heart</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-5-1">
<span class="pos">6-5-1</span>
<div class="slidecontent"><p>Now that we have designed the <strong>action shapes</strong> and the <strong>state shape</strong> we can move on to define our <strong>reducer</strong>!</p>
</div></section><section class="slide" data-pos="6-5-2">
<span class="pos">6-5-2</span>
<div class="slidecontent"><p>Remember: a <strong>reducer</strong> in Redux lingo is simply a function that <strong>takes the current state and an action</strong>, and <strong>returns a new state</strong>:</p>
<p><img src="resources/graphviz/redux-reducer.svg" alt="Reducer"></p>
</div></section><section class="slide" data-pos="6-5-3">
<span class="pos">6-5-3</span>
<div class="slidecontent"><p>The reducer in our app just needs to <strong>deal with a single action</strong>, namely <code>INCREMENT</code>.</p>
<p>When that action happens we <strong>create a new state</strong> with <code>count</code> increased by <code>action.by</code>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> reducer = <span class="hljs-function">(<span class="hljs-params">state,action</span>)=&gt;</span> {
  <span class="hljs-keyword">switch</span>(action.type){
    <span class="hljs-keyword">case</span> <span class="hljs-string">'INCREMENT'</span>: <span class="hljs-keyword">return</span> {<span class="hljs-attr">count</span>: state.count + action.by};
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state;
  }
};
</code></pre>
</div></section><section class="slide" data-pos="6-5-4">
<span class="pos">6-5-4</span>
<div class="slidecontent"><p>Two small <strong>comments</strong> to this code:</p>
<ul>
<li>Remember that we must <strong>always have a default case</strong> returning the current state, to deal with internal Redux startup actions.</li>
<li>Since our reducer deals with just a single action it would be <strong>better phrased as an <code>if-else</code></strong>. We only used a <code>switch</code> because that&#39;s what a reducer normally looks like.</li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-6.</span> Store</h3>
      <p>A house for the data</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-6-1">
<span class="pos">6-6-1</span>
<div class="slidecontent"><p>With the <strong>initial state</strong> and <strong>reducer</strong> in place, we can now create a <strong>store</strong> for our app state!</p>
</div></section><section class="slide" data-pos="6-6-2">
<span class="pos">6-6-2</span>
<div class="slidecontent"><p>A <strong>store</strong> is <strong>instantiated</strong> using <strong><code>Redux.createStore</code></strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> store = Redux.createStore(reducer,initialstate);
</code></pre>
</div></section><section class="slide" data-pos="6-6-3">
<span class="pos">6-6-3</span>
<div class="slidecontent"><p>An <strong>alternative</strong> to providing an <code>initialstate</code> on store creation is to have a <strong>default return value</strong> inside the <strong>reducer</strong>.</p>
<p>However it can be <strong>valuable</strong> to <strong>explicitly define</strong> the full <strong>initial state</strong> in a single place.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-7.</span> Action creators</h3>
      <p>How are actions spawned?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-7-1">
<span class="pos">6-7-1</span>
<div class="slidecontent"><p>Knowing the shape of the <strong>actions</strong> lets us define <strong>action creators</strong> to be consumed by our <strong>UI</strong>.</p>
</div></section><section class="slide" data-pos="6-7-2">
<span class="pos">6-7-2</span>
<div class="slidecontent"><p>Only one single action creator is needed in our app:</p>
<pre><code><span class="hljs-keyword">let</span> actionCreators = {
  increment(amount) {
    <span class="hljs-keyword">return</span> {<span class="hljs-keyword">type</span>: <span class="hljs-string">'INCREMENT'</span>, <span class="hljs-keyword">by</span>: amount};
  }
};
</code></pre><p>We pass in an <strong>amount</strong>, and return an <strong>action</strong> shaped according to our previous decision.</p>
</div></section><section class="slide" data-pos="6-7-3">
<span class="pos">6-7-3</span>
<div class="slidecontent"><p>Now we create a version of our action creators that is <strong>bound to our store</strong>, so they&#39;re easier to consume in our views:</p>
<pre><code>let <span class="hljs-keyword">boundActionCreators </span>= Redux.<span class="hljs-keyword">bindActionCreators(
</span>  actionCreators,
  store.<span class="hljs-keyword">dispatch
</span>)<span class="hljs-comment">;</span>
</code></pre></div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-8.</span> UI</h3>
      <p>Designing the interface</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-8-1">
<span class="pos">6-8-1</span>
<div class="slidecontent"><p>Let&#39;s design the <strong>UI</strong> needed for our <strong>app idea</strong>!</p>
</div></section><section class="slide" data-pos="6-8-2">
<span class="pos">6-8-2</span>
<div class="slidecontent"><p>To create our UI we translate our <strong>mental screenshot</strong>...</p>
<p><img src="resources/images/redux-example-screen.png" alt="screenshot"></p>
</div></section><section class="slide" data-pos="6-8-3">
<span class="pos">6-8-3</span>
<div class="slidecontent"><p>...to this <strong>html</strong>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Counter is now at <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"num"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"incbtn"</span>&gt;</span>Increase<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> by <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"amount"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">1</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-9.</span> UI updater</h3>
      <p>data templating</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-9-1">
<span class="pos">6-9-1</span>
<div class="slidecontent"><p>Now that we know the <strong>state shape</strong> and the <strong>UI</strong>, we can define a <strong>UI updater</strong> function!</p>
</div></section><section class="slide" data-pos="6-9-2">
<span class="pos">6-9-2</span>
<div class="slidecontent"><p>We need to update the <strong>UI</strong> depending on the current <strong>state</strong> which is passed in as an argument:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> updateUI = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> element = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"num"</span>);
  element.innerHTML = state.count;
};
</code></pre>
<p>All we need to do is update the <code>#num</code> element with <code>state.count</code>.</p>
</div></section><section class="slide" data-pos="6-9-3">
<span class="pos">6-9-3</span>
<div class="slidecontent"><p>In a React app this would rather be a <strong>render</strong> function that <strong>defined the whole UI</strong> instead of mutating existing DOM.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-10.</span> Interaction</h3>
      <p>connecting the user</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-10-1">
<span class="pos">6-10-1</span>
<div class="slidecontent"><p>Now we can introduce <strong>interaction</strong> through hooking up the <strong>action creators</strong> to the <strong>UI</strong> and dispatch the result to the <strong>store</strong>!</p>
</div></section><section class="slide" data-pos="6-10-2">
<span class="pos">6-10-2</span>
<div class="slidecontent"><p>So what needs to happen when the user clicks the button?</p>
<ol>
<li>We must <strong>collect the increase value</strong> from the input field</li>
<li>Then we <strong>create an action</strong> by <strong>passing the increase value</strong> to the <strong>Increment action creator</strong></li>
<li>We use a <strong>bound action creator</strong> so that the action is <strong>passed to the store</strong></li>
</ol>
</div></section><section class="slide" data-pos="6-10-3">
<span class="pos">6-10-3</span>
<div class="slidecontent"><p>Here&#39;s the code:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> button = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"incbtn"</span>);
button.addEventListener(<span class="hljs-string">"click"</span>,()=&gt; {
  <span class="hljs-keyword">let</span> input = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"amount"</span>),
    increase = <span class="hljs-built_in">parseInt</span>(input.value);
  boundActionCreators.increment(increase);
});
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-11.</span> Tying it together</h3>
      <p>Ship it!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-11-1">
<span class="pos">6-11-1</span>
<div class="slidecontent"><p>We now have all the pieces we need to finalize our app!</p>
</div></section><section class="slide" data-pos="6-11-2">
<span class="pos">6-11-2</span>
<div class="slidecontent"><p>There&#39;s only two things remaining to do:</p>
<ul>
<li>Make our <strong>UI updater</strong> run whenever the <strong>store</strong> is updated</li>
<li>Run an <strong>initial rendering</strong></li>
</ul>
</div></section><section class="slide" data-pos="6-11-3">
<span class="pos">6-11-3</span>
<div class="slidecontent"><p>It sounds easy, and it is easy! Here&#39;s the code:</p>
<pre><code class="lang-javascript">store.subscribe(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> { <span class="hljs-comment">// &lt;-- not called with state!</span>
  updateUI(store.getState());
});

updateUI(store.getState());
</code></pre>
<p>Note how the <strong>callback</strong> is <strong>not called with state</strong>, which you might expect! You have to <strong>explicitly get it</strong> if you need it.</p>
</div></section><section class="slide" data-pos="6-11-4">
<span class="pos">6-11-4</span>
<div class="slidecontent"><p>You can <strong>play with this example</strong> in the <a href="resources/site/demos/redux/index.html" target="_blank">Redux</a> demo.</p>
<p>..wait, were we <strong>already done</strong>? Yep, <strong>that was it</strong>!</p>
</div></section><section class="slide" data-pos="6-11-5">
<span class="pos">6-11-5</span>
<div class="slidecontent"><p>Note how already this simple example app <strong>demonstrate</strong> the <strong>unidirectional data flow</strong>:</p>
<p><img src="resources/graphviz/redux-flow.svg" alt="flow"></p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>6-12.</span> Exercise 4</h3>
      <p>It&#39;s getting hot in here</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="6-12-1">
<span class="pos">6-12-1</span>
<div class="slidecontent"><p>You probably saw this coming - you now get to <strong>create your own Redux application</strong>!</p>
</div></section><section class="slide" data-pos="6-12-2">
<span class="pos">6-12-2</span>
<div class="slidecontent"><p>Look for the <a href="resources/site/exercises/04_generator/" target="_blank">Generator</a> exercise in the course resources!</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 7 / 12</span>
    <h2>React and Redux</h2>
    <p>sitting in a tree</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p>We have looked at <strong>React</strong> and <strong>Redux</strong> in <strong>isolation</strong>. The time has now come to <strong>marry the two</strong>!</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Presenting the app</li>
<li>2. Redux parts</li>
<li>3. React parts</li>
<li>4. Vanilla integration</li>
<li>5. Examining React-Redux</li>
<li>6. React-Redux integration</li>
<li>7. Exercise 5</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-1.</span> Presenting the app</h3>
      <p>Prepare to be dazzled!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="7-1-1">
<span class="pos">7-1-1</span>
<div class="slidecontent"><p>Here&#39;s what we&#39;re going to build:</p>
<p><img src="resources/images/reactredux-example-screen.png" alt="screen"></p>
</div></section><section class="slide" data-pos="7-1-2">
<span class="pos">7-1-2</span>
<div class="slidecontent"><p>The functionality is very simple; there is a <strong>list of quotes</strong>, and the user can also <strong>add new quotes</strong>.</p>
</div></section><section class="slide" data-pos="7-1-3">
<span class="pos">7-1-3</span>
<div class="slidecontent"><p>In the upcoming sections we will...</p>
<ul>
<li>first build the <strong>Redux parts</strong>,</li>
<li>then the <strong>React parts</strong>, and finally we&#39;ll</li>
<li>look at how to <strong>merge the two together</strong>.</li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-2.</span> Redux parts</h3>
      <p>Installing the plumbing</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="7-2-1">
<span class="pos">7-2-1</span>
<div class="slidecontent"><p>Our <strong>app state</strong> will be an <strong>array of strings</strong>.</p>
<p>Let&#39;s make our <strong>initial state</strong> prepopulated with a quote to set the tone:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> initial = [<span class="hljs-string">'Carpe diem'</span>];
</code></pre>
</div></section><section class="slide" data-pos="7-2-2">
<span class="pos">7-2-2</span>
<div class="slidecontent"><p>The single <strong>action</strong> that can happen, <strong>adding a quote</strong>, should look like this:</p>
<pre><code class="lang-javascript">{
  <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD'</span>,
  <span class="hljs-attr">text</span>: <span class="hljs-string">'Do unto others etc etc'</span>
}
</code></pre>
</div></section><section class="slide" data-pos="7-2-3">
<span class="pos">7-2-3</span>
<div class="slidecontent"><p>Here&#39;s the <strong>reducer</strong> to handle this setup:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> reducer = <span class="hljs-function">(<span class="hljs-params">state,action</span>)=&gt;</span> {
  <span class="hljs-keyword">switch</span>(action.type){
    <span class="hljs-keyword">case</span> <span class="hljs-string">'ADD'</span>: <span class="hljs-keyword">return</span> state.concat(action.text);
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state;
  }
};
</code></pre>
</div></section><section class="slide" data-pos="7-2-4">
<span class="pos">7-2-4</span>
<div class="slidecontent"><p>A <strong>side note</strong> regarding this statement:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">return</span> state.concat(action.text);
</code></pre>
<p>Because <code>.concat</code> <strong>returns a new array</strong> we <strong>don&#39;t need to copy the state</strong>.</p>
<p>If we used <code>.push</code> instead we would have to.</p>
</div></section><section class="slide" data-pos="7-2-5">
<span class="pos">7-2-5</span>
<div class="slidecontent"><p>We <strong>instantiate the store</strong> as per usual:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> store = Redux.createStore(reducer,initial);
</code></pre>
</div></section><section class="slide" data-pos="7-2-6">
<span class="pos">7-2-6</span>
<div class="slidecontent"><p>We only need <strong>one action creator</strong> to interact with our store:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> actionCreators = {
  addQuote(text) {
    <span class="hljs-keyword">return</span> {<span class="hljs-attr">type</span>:<span class="hljs-string">'ADD'</span>,<span class="hljs-attr">text</span>:text};
  }
};
</code></pre>
</div></section><section class="slide" data-pos="7-2-7">
<span class="pos">7-2-7</span>
<div class="slidecontent"><p>Now <strong>all the Redux parts</strong> needed to support our functionality <strong>are in place</strong>!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-3.</span> React parts</h3>
      <p>Dressing the doll</p>
</p>
    </div>
  </section>
  <section class="slide list" data-pos="7-3-1">
<span class="pos">7-3-1</span>
<div class="slidecontent">
<p>Let&#39;s say your team has prepared <strong>a couple of React components</strong> for the app:</p>
<ul>
<li><span>a</span><code>QuoteList</code> to <strong>display the quotes</strong></li>
<li><span>b</span><code>QuoteForm</code> to hold the <strong>form for new quotes</strong></li>
</ul>
</div></section><section class="slide" data-pos="7-3-2">
<span class="pos">7-3-2</span>
<div class="slidecontent"><p>Because they didn&#39;t know what data handling solution the app would use, they&#39;ve made the components <strong>portable</strong>.</p>
<p>This of course is <strong>good practice</strong> in any scenario, as it makes the code <strong>easier to test</strong> and <strong>less coupled</strong>.</p>
</div></section><section class="slide num numA" data-pos="7-3-3">
<span class="pos">7-3-3</span>
<div class="slidecontent">
<p>Let&#39;s check out <strong><code>QuoteList</code></strong>, responsible for <strong>rendering the list of quotes</strong>.</p>
<p>It <strong>expects to receive an array of quotes</strong> as a property.</p>
<p><img src="resources/graphviz/quotelist.svg" alt="quotelist"></p>
</div></section><section class="slide" data-pos="7-3-4">
<span class="pos">7-3-4</span>
<div class="slidecontent"><p>Here&#39;s the <strong>code</strong> for the <code>QuoteList</code> component:</p>
<pre><code class="lang-javascript">let QuoteList = props =&gt; {
  let list = props.quotes.map((q,n) =&gt; &lt;li key={n}&gt;{q}&lt;/li&gt;);
  return (
    &lt;div className="quoteslist"&gt;
      &lt;h3&gt;Words of Wisdom&lt;/h3&gt;
      &lt;ul&gt;{list}&lt;/ul&gt;
    &lt;/div&gt;
  );
};
</code></pre>
</div></section><section class="slide num numB" data-pos="7-3-5">
<span class="pos">7-3-5</span>
<div class="slidecontent">
<p>And then we have <strong><code>QuoteForm</code></strong>, which <strong>renders the form</strong> where the user enters a new quote.</p>
<p>This components <strong>expects to receive a callback</strong> which will be invoked with the text of the new quote when the user clicks the button.</p>
<p><img src="resources/graphviz/quoteform.svg" alt="quoteform"></p>
</div></section><section class="slide" data-pos="7-3-6">
<span class="pos">7-3-6</span>
<div class="slidecontent"><p>Here&#39;s the source code:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuoteForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  submit(e){
    <span class="hljs-keyword">this</span>.props.callback(<span class="hljs-keyword">this</span>.field.value);
    <span class="hljs-keyword">this</span>.field.value = <span class="hljs-string">''</span>;
    e.preventDefault();
  }
  render(){
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{e</span>=&gt;</span> this.submit(e)}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{i</span>=&gt;</span> this.field = i} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'submit'</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    );
  }
}</span>
</code></pre>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-4.</span> Vanilla integration</h3>
      <p>Marriage attempt, take 1</p>
</p>
    </div>
  </section>
  <section class="slide num numA" data-pos="7-4-1">
<span class="pos">7-4-1</span>
<div class="slidecontent">
<p>It is customary to create <strong>container components</strong> around <strong>portable components</strong> like we have now, in order to <strong>provide them what they need</strong>. So let&#39;s do that for our two components:</p>
<ul>
<li>QuoteListContainer</li>
<li>QuoteFormContainer</li>
</ul>
</div></section><section class="slide num numB" data-pos="7-4-2">
<span class="pos">7-4-2</span>
<div class="slidecontent">
<p>First we have <code>QuoteList</code>, which expects to be given an <strong>array of quotes</strong> as a prop. Since we must also <strong>update when the data changes</strong>, we need to create a component that <strong>has Redux data as state</strong>.</p>
</div></section><section class="slide" data-pos="7-4-3">
<span class="pos">7-4-3</span>
<div class="slidecontent"><pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuoteListContainer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(){
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {<span class="hljs-attr">quotes</span>:[]};
  }
  componentDidMount() {
    store.subscribe(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>
      <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">quotes</span>: store.getState()})
    );
  }
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">QuoteList</span> <span class="hljs-attr">quotes</span>=<span class="hljs-string">{this.state.quotes}</span> /&gt;</span>;
  }
}</span>
</code></pre>
</div></section><section class="slide" data-pos="7-4-4">
<span class="pos">7-4-4</span>
<div class="slidecontent"><p>In the <code>componentDidMount</code> lifecycle hook we <strong>initiate a store subscription</strong>, which will <strong>update the component state</strong> on every change.</p>
</div></section><section class="slide num numC" data-pos="7-4-5">
<span class="pos">7-4-5</span>
<div class="slidecontent">
<p>Moving on to <code>QuoteForm</code> - that component needs to be given a <strong>callback</strong> which it <strong>invokes with new quotes</strong>. This should of course be <strong>passed along to the store</strong>.</p>
</div></section><section class="slide" data-pos="7-4-6">
<span class="pos">7-4-6</span>
<div class="slidecontent"><p>First we create <strong>bound action creators</strong> for our component to use:</p>
<pre><code>let <span class="hljs-keyword">boundActionCreators </span>= Redux.<span class="hljs-keyword">bindActionCreators(
</span>  actionCreators,
  store.<span class="hljs-keyword">dispatch
</span>)<span class="hljs-comment">;</span>
</code></pre></div></section><section class="slide" data-pos="7-4-7">
<span class="pos">7-4-7</span>
<div class="slidecontent"><p>We then make a container that passes in the bound action creator:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> QuoteFormContainer = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">QuoteForm</span> <span class="hljs-attr">callback</span>=<span class="hljs-string">{boundActionCreators.addQuote}/</span>&gt;</span>;
);</span>
</code></pre>
</div></section><section class="slide" data-pos="7-4-8">
<span class="pos">7-4-8</span>
<div class="slidecontent"><p><strong>Initialising this app</strong> is pretty straightforward:</p>
<pre><code>ReactDOM.render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">QuoteListContainer</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">QuoteFormContainer</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"container"</span>)
);
store.dispatch({<span class="hljs-attr">type</span>:<span class="hljs-string">'BOGUSEVENT'</span>}); <span class="hljs-comment">// triggers initial render</span>
</code></pre><p>Try it in a demo here: <a href="resources/site/demos/vanilla/index.html" target="_blank">Vanilla</a></p>
</div></section><section class="slide" data-pos="7-4-9">
<span class="pos">7-4-9</span>
<div class="slidecontent"><p>This vanilla solution <strong>works just fine</strong>. The only downside is that we had to <strong>access our store to create our containers</strong>;</p>
<ul>
<li><strong><code>QuoteListContainer</code></strong> needed <strong><code>store.subscribe</code></strong> and <strong><code>store.getState</code></strong>.</li>
<li><strong><code>QuoteFormContainer</code></strong> needed <strong><code>store.dispatch</code></strong>.</li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-5.</span> Examining React-Redux</h3>
      <p>Meeting the matchmaker</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="7-5-1">
<span class="pos">7-5-1</span>
<div class="slidecontent"><p>The <a href="https://github.com/reactjs/react-redux" class="link" target="_blank">React-Redux</a> provide <strong>official bindings</strong> that <strong>generates wrapper components for us</strong> for us, saving us from having to create our own and spread around references to the store.</p>
</div></section><section class="slide" data-pos="7-5-2">
<span class="pos">7-5-2</span>
<div class="slidecontent"><p><code>React-Redux</code> works through a <strong><code>.connect</code></strong> method with the following signature:</p>
<pre><code class="lang-javascript">ReactRedux.connect(
  mapStateToProps,     <span class="hljs-comment">// connecting to store state</span>
  mapDispatchToProps,  <span class="hljs-comment">// connecting to store dispatch</span>
  mergeProps           <span class="hljs-comment">// baking all props together</span>
)(ComponentToWrap)       <span class="hljs-comment">// the component to be wrapped</span>
</code></pre>
</div></section><section class="slide list" data-pos="7-5-3">
<span class="pos">7-5-3</span>
<div class="slidecontent">
<p>Let&#39;s <strong>explore the three parameters</strong> one at a time!</p>
<ul>
<li><span>a</span><code>mapStateToProps</code></li>
<li><span>b</span><code>mapDispatchToProps</code></li>
<li><span>c</span><code>mergeProps</code></li>
</ul>
</div></section><section class="slide num numA" data-pos="7-5-4">
<span class="pos">7-5-4</span>
<div class="slidecontent">
<p>First, <strong><code>mapStateToProps</code></strong>. It is a <strong>function</strong> which will be <strong>invoked with the store state</strong>, and what you <strong>return</strong> from the method will become <strong>additional props on the component</strong>.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> mapStateToProps = <span class="hljs-function"><span class="hljs-params">appstate</span> =&gt;</span> ({
  <span class="hljs-attr">numberOfPosts</span>: appstate.posts.length
});
</code></pre>
</div></section><section class="slide num numB" data-pos="7-5-5">
<span class="pos">7-5-5</span>
<div class="slidecontent">
<p>Then <strong><code>mapDispatchToProps</code></strong> It can be an object or a function.</p>
<p>If it is an <strong>object</strong> it is assumed to <strong>contain action creators</strong>. They&#39;ll be made <strong>available as props on the component</strong> which will <strong>automatically pipe what they&#39;re returning to the store dispatch</strong>.</p>
</div></section><section class="slide" data-pos="7-5-6">
<span class="pos">7-5-6</span>
<div class="slidecontent"><p>If <code>mapDispatchToProps</code> is a <strong>function</strong> then it&#39;ll be <strong>invoked with the store dispatch</strong>, and you must manually return props just like with <code>mapStateToProps</code>.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> mapDispatchToProps = <span class="hljs-function"><span class="hljs-params">dispatch</span> =&gt;</span> ({
  addPost(text) {
    <span class="hljs-keyword">let</span> action = actionCreators.addPost(text);
    dispatch(action);
  }
})
</code></pre>
</div></section><section class="slide" data-pos="7-5-7">
<span class="pos">7-5-7</span>
<div class="slidecontent"><p>Note how <strong><code>mapDispatchToProps</code></strong> serves the exact <strong>same purpose</strong> as <strong><code>bindActionCreators</code></strong>, namely <strong>passing actions</strong> from the view to the store <strong>without</strong> needing a <strong>store reference</strong>!</p>
</div></section><section class="slide num numC" data-pos="7-5-8">
<span class="pos">7-5-8</span>
<div class="slidecontent">
<p>Finally the <strong><code>mergeProps</code></strong> function handles the fact that a connected component <strong>receives props from 3 sources</strong> which must somehow be <strong>baked together</strong>:</p>
<p><img src="resources/graphviz/rr-propsources.svg" alt="bake props"></p>
</div></section><section class="slide" data-pos="7-5-9">
<span class="pos">7-5-9</span>
<div class="slidecontent"><p>If <strong><code>mergeProps</code> isn&#39;t supplied</strong> then <code>ReactRedux</code> will do the following <strong>by default</strong>:</p>
<pre><code class="lang-javascript">props = <span class="hljs-built_in">Object</span>.assign({}, parentProps, stateProps, dispatchProps)
</code></pre>
<p>For the majority of cases this is fine.</p>
</div></section><section class="slide" data-pos="7-5-10">
<span class="pos">7-5-10</span>
<div class="slidecontent"><p>But if you want control, <strong>provide <code>mergeProps</code></strong> and do your own baking. It is <strong>called with all three sources</strong> like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> mergeProps = <span class="hljs-function">(<span class="hljs-params">fromState,fromDispatch,fromParent</span>)=&gt;</span> {
  <span class="hljs-comment">// do your own baking and return it</span>
  <span class="hljs-keyword">return</span> myBakedProps;
}
</code></pre>
</div></section><section class="slide" data-pos="7-5-11">
<span class="pos">7-5-11</span>
<div class="slidecontent"><p>The protocol of the <strong><code>.connect</code></strong> method and the mapping functions is actually <strong>more versatile</strong> than we have detailed here. See the <a href="https://github.com/reactjs/react-redux" class="link" target="_blank">React-Redux</a> homepage for the full details.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-6.</span> React-Redux integration</h3>
      <p>Employing the matchmaker</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="7-6-1">
<span class="pos">7-6-1</span>
<div class="slidecontent"><p>We start with <strong>making the <code>QuoteListContainer</code></strong>.</p>
<p>Remember, <strong><code>QuoteList</code></strong> expected the array of <strong>quotes as a props</strong>, which must also be <strong>kept live</strong> as the data updates.</p>
<p>Thus we&#39;ll <strong>need to use the <code>mapStateToProps</code></strong> function.</p>
</div></section><section class="slide" data-pos="7-6-2">
<span class="pos">7-6-2</span>
<div class="slidecontent"><p>We need to <strong>map</strong> the <strong>entire app state</strong>, which is the array of quotes, <strong>to the <code>quotes</code> property</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> mapStateToQuoteListProps = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<span class="hljs-attr">quotes</span>: state});
</code></pre>
</div></section><section class="slide" data-pos="7-6-3">
<span class="pos">7-6-3</span>
<div class="slidecontent"><p>Now we <strong>create the container</strong> using the <strong><code>.connect</code></strong> method:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> QuoteListContainer = ReactRedux.connect(
  mapStateToQuoteListProps
  <span class="hljs-comment">// we don't need `mapDispatch` or a custom `mergeProps`</span>
)(QuoteList);
</code></pre>
<p>This <code>QuoteListContainer</code> will <strong>act exactly like the vanilla version</strong>, including keeping the data updated.</p>
</div></section><section class="slide" data-pos="7-6-4">
<span class="pos">7-6-4</span>
<div class="slidecontent"><p>Now for <strong><code>QuoteFormContainer</code></strong>.</p>
<p>It doesn&#39;t need to map state, but it <strong>expects the <code>callback</code> prop</strong> to be a method whose <strong>return value should be <code>dispatch</code>ed</strong>.</p>
</div></section><section class="slide" data-pos="7-6-5">
<span class="pos">7-6-5</span>
<div class="slidecontent"><p>Thus it suffices to simply <strong>rename the <code>addQuote</code> action creator</strong> to &quot;callback&quot;:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> QuoteFormContainer = ReactRedux.connect(
  <span class="hljs-literal">null</span>, <span class="hljs-comment">// don't need state</span>
  {<span class="hljs-attr">callback</span>: actionCreators.addQuote}
)(QuoteForm);
</code></pre>
</div></section><section class="slide" data-pos="7-6-6">
<span class="pos">7-6-6</span>
<div class="slidecontent"><p>If we had been <strong>allowed to edit</strong> the code of <code>QuoteForm</code> to <strong>use <code>props.addQuote</code> instead</strong> of <code>props.callback</code>, then we could have <strong>passed in the actionCreators object</strong> directly:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> QuoteFormContainer = ReactRedux.connect(
  <span class="hljs-literal">null</span>,
  actionCreators
)(QuoteForm);
</code></pre>
</div></section><section class="slide" data-pos="7-6-7">
<span class="pos">7-6-7</span>
<div class="slidecontent"><p>But, wait - now there&#39;s <strong>no single reference to the store</strong> anywhere in our code. How does <code>.connect</code> <strong>actually connect</strong> our components to the store?</p>
</div></section><section class="slide" data-pos="7-6-8">
<span class="pos">7-6-8</span>
<div class="slidecontent"><p>Here&#39;s the <strong>final piece</strong> of the puzzle: we must <strong>wrap our entire app in a <code>Provider</code></strong> component which is <strong>given a store reference</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Provider = ReactRedux.Provider;

ReactDOM.render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">QuoteListContainer</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">QuoteFormContainer</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"container"</span>)
);
</code></pre>
</div></section><section class="slide" data-pos="7-6-9">
<span class="pos">7-6-9</span>
<div class="slidecontent"><p>Behind the scenes the Provider component uses something called <strong><code>Context</code></strong> to supply the store to interested children.</p>
<p>We&#39;ll <strong>take a closer look at <code>Context</code></strong> in the <strong>Advanced React</strong> chapter.</p>
</div></section><section class="slide" data-pos="7-6-10">
<span class="pos">7-6-10</span>
<div class="slidecontent"><p>Here&#39;s a demo with this <strong>library-helped integration</strong> version of the app:
<a href="resources/site/demos/usinglib/index.html" target="_blank">Usinglib</a></p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>7-7.</span> Exercise 5</h3>
      <p>The final boss</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="7-7-1">
<span class="pos">7-7-1</span>
<div class="slidecontent"><p>As the final test of your new 1337 skillz - <strong>return to the solution you made for exercise 4</strong>, and:</p>
<ul>
<li><strong>make it use React for UI</strong> instead of the jQuery/vanilla solution you have now</li>
<li><strong>use ReactRedux</strong> as a bridge between React and Redux!</li>
</ul>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 8 / 12</span>
    <h2>Redux Thunk</h2>
    <p>slow motion actions</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p><a href="https://github.com/gaearon/redux-thunk" class="link" target="_blank">Redux-Thunk</a> has the following <strong>lineage</strong>:</p>
<p><img src="resources/graphviz/redux-thunk-lineage.svg" alt="lineage"></p>
<p>So to understand what Redux-thunk is, we will now travel this chain backwards!</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Store enhancers</li>
<li>2. Middlewares</li>
<li>3. The thunk problem</li>
<li>4. The thunk solution</li>
<li>5. Trying it out</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>8-1.</span> Store enhancers</h3>
      <p>Can&#39;t leave well enough alone</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="8-1-1">
<span class="pos">8-1-1</span>
<div class="slidecontent"><p>Store enhancers are a function that we can <strong>optionally</strong> send to <code>createStore</code> in order to <strong>change the store&#39;s behaviour</strong>:</p>
<pre><code class="lang-javascript">Redux.createStore(reducer, initialState, enhancer);
</code></pre>
</div></section><section class="slide question" data-pos="8-1-2">
<span class="pos">8-1-2</span>
<div class="slidecontent">
<p>Wait up - wasn&#39;t <strong>initialState also optional</strong>? How then would <code>Redux</code> know the difference here?</p>
<pre><code class="lang-javascript">Redux.createStore(reducer, initialState);
Redux.createStore(reducer, enhancer);
</code></pre>
</div></section><section class="slide answer" data-pos="8-1-3">
<span class="pos">8-1-3</span>
<div class="slidecontent">
<p>Easy - the <strong>initialState is an object</strong> while the <strong>enhancer is a function</strong>. Redux can figure out which signature was used through <strong>duck typing</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStore</span>(<span class="hljs-params">reducer,initial,enhancer</span>)</span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">2</span> &amp;amp;&amp;amp; <span class="hljs-keyword">typeof</span> initial === <span class="hljs-string">"function"</span>){
    enhancer = initial;
    initial = <span class="hljs-literal">undefined</span>;
  }
  <span class="hljs-comment">// now initial and reducer are guaranteed to be correct</span>
}
</code></pre>
</div></section><section class="slide" data-pos="8-1-4">
<span class="pos">8-1-4</span>
<div class="slidecontent"><p>Back to what <strong>enhancers actually do</strong>: they are the way in which <strong>third party developers can change the behaviour of Redux</strong>.</p>
<p>Think of enhancers as a <strong>plugin API</strong>!</p>
</div></section><section class="slide" data-pos="8-1-5">
<span class="pos">8-1-5</span>
<div class="slidecontent"><p>If you want to send in <strong>multiple enhancers</strong> you must first <strong>combine</strong> them:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> enhancer = Redux.combine(devTools,middleWare);
<span class="hljs-keyword">let</span> store = Redux.createStore(reducer,enhancer);
</code></pre>
</div></section><section class="slide" data-pos="8-1-6">
<span class="pos">8-1-6</span>
<div class="slidecontent"><p>Now you may have also noticed the <strong>two most common enhancers</strong>:</p>
<ul>
<li><a href="https://github.com/gaearon/redux-devtools/" class="link" target="_blank">Redux Dev Tools</a>, which allows us to <strong>undo actions</strong> and <strong>redo them again</strong>, <strong>hot reloading</strong> and other things. More on that later!</li>
<li><strong>middlewares</strong>, which is what we actually want to know more about right now!</li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>8-2.</span> Middlewares</h3>
      <p>The meddling man in the middle</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="8-2-1">
<span class="pos">8-2-1</span>
<div class="slidecontent"><p>They really should be called <strong>action middlewares</strong>, because that&#39;s what they do; they <strong>process actions before they reach the store</strong>.</p>
</div></section><section class="slide" data-pos="8-2-2">
<span class="pos">8-2-2</span>
<div class="slidecontent"><p>Without a middleware, the action from the action creator is passed straight to <code>store.dispatch</code>:</p>
<p><img src="resources/graphviz/redux-middleware-without.svg" alt="no middleware"></p>
</div></section><section class="slide" data-pos="8-2-3">
<span class="pos">8-2-3</span>
<div class="slidecontent"><p>The <strong>middleware sits in-between</strong>, <strong>processing the action</strong> before (maybe) <strong>passing it along</strong> to <code>store.dispatch</code></p>
<p><img src="resources/graphviz/redux-middleware-with.svg" alt="with middleware"></p>
</div></section><section class="slide" data-pos="8-2-4">
<span class="pos">8-2-4</span>
<div class="slidecontent"><p>We can have <strong>multiple middlewares</strong>, in which case they&#39;ll act as a chain in the order they were applied:</p>
<p><img src="resources/graphviz/redux-middleware-with-many.svg" alt="many middlewares"></p>
</div></section><section class="slide" data-pos="8-2-5">
<span class="pos">8-2-5</span>
<div class="slidecontent"><p>From the outside we <strong>can&#39;t tell any difference</strong> - we&#39;re just dispatching an action to the store as we always do:</p>
<pre><code class="lang-javascript">store.dispatch(action);
</code></pre>
</div></section><section class="slide" data-pos="8-2-6">
<span class="pos">8-2-6</span>
<div class="slidecontent"><p>To get further familiarised with the <strong>structure of middlewares</strong>, let&#39;s now see what they look like!</p>
</div></section><section class="slide" data-pos="8-2-7">
<span class="pos">8-2-7</span>
<div class="slidecontent"><p>Here&#39;s a middleware that <strong>does nothing</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noopMiddleware</span>(<span class="hljs-params">API</span>)</span>{ <span class="hljs-comment">// has `.dispatch` and `.getState`</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>)</span>{      <span class="hljs-comment">// `next` is the following middleware</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">action</span>)</span>{  <span class="hljs-comment">// here we receive the `action`</span>
      <span class="hljs-keyword">return</span> next(action);    <span class="hljs-comment">// passing the action along!</span>
    }
  }
}
</code></pre>
</div></section><section class="slide" data-pos="8-2-8">
<span class="pos">8-2-8</span>
<div class="slidecontent"><p>If we <strong>convert it to ES6</strong>, here is what we get:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> noopMiddleware = <span class="hljs-function"><span class="hljs-params">API</span> =&gt;</span> next =&gt; <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  next(action);
}
</code></pre>
</div></section><section class="slide" data-pos="8-2-9">
<span class="pos">8-2-9</span>
<div class="slidecontent"><p>Here&#39;s a <strong>logger</strong> middleware which logs actions and the resulting state to the console.</p>
<pre><code><span class="hljs-keyword">let</span> logger = <span class="hljs-function"><span class="hljs-params">middlewareAPI</span> =&gt;</span> next =&gt; <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Dispatching action:"</span>,action);
  <span class="hljs-keyword">let</span> result = next(action);
  <span class="hljs-keyword">let</span> newstate = middlewareAPI.getState();
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"State after dispatch:"</span>,newstate);
  <span class="hljs-keyword">return</span> result;
};
</code></pre><p>We&#39;ll be using this middleware in the upcoming experiments!</p>
</div></section><section class="slide" data-pos="8-2-10">
<span class="pos">8-2-10</span>
<div class="slidecontent"><p>Here&#39;s a <a href="resources/site/demos/deaf/index.html" target="_blank">Deaf</a> middleware that only <strong>passes the action along a third of the time</strong>:</p>
<pre><code><span class="hljs-keyword">let</span> deaf = <span class="hljs-function"><span class="hljs-params">middlewareAPI</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> action =&gt; {
    <span class="hljs-keyword">if</span> (!(i++%<span class="hljs-number">3</span>)) {
      next(action);
    }
  };
};
</code></pre></div></section><section class="slide" data-pos="8-2-11">
<span class="pos">8-2-11</span>
<div class="slidecontent"><p>Here&#39;s a <a href="resources/site/demos/nervous/index.html" target="_blank">Nervous</a> middleware that <strong>executes actions twice</strong> just to be sure:</p>
<pre><code><span class="hljs-keyword">let</span> nervous = <span class="hljs-function"><span class="hljs-params">middlewareAPI</span> =&gt;</span> next =&gt; <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  next(action);
  next(action);
};
</code></pre></div></section><section class="slide" data-pos="8-2-12">
<span class="pos">8-2-12</span>
<div class="slidecontent"><p>Here&#39;s an <a href="resources/site/demos/impatient/index.html" target="_blank">Impatient</a> middleware that <strong>multiplies amount by 5</strong>:</p>
<pre><code><span class="hljs-keyword">let</span> impatient = <span class="hljs-function"><span class="hljs-params">middlewareAPI</span> =&gt;</span> next =&gt; <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  action = <span class="hljs-built_in">Object</span>.assign({},action); <span class="hljs-comment">// copy</span>
  action.by *= <span class="hljs-number">5</span>;
  next(action);
};
</code></pre></div></section><section class="slide" data-pos="8-2-13">
<span class="pos">8-2-13</span>
<div class="slidecontent"><p>What would happen if we applied <strong>deaf</strong>, <strong>nervous</strong> and <strong>impatient</strong> all <strong>at the same time</strong>?</p>
<pre><code><span class="hljs-attribute">let middlewares</span> = Redux.applyMiddleware(deaf,nervous,impatient);
<span class="hljs-attribute">let store</span> = Redux.createStore(reducer,initialstate,middlewares);
</code></pre><p>We&#39;d get a store that only acts <strong>a third of the time</strong>, but when it does act it&#39;ll <strong>increase the amount by 2*5</strong>. Try this in the <a href="resources/site/demos/chaos/index.html" target="_blank">Chaos</a> demo!</p>
</div></section><section class="slide" data-pos="8-2-14">
<span class="pos">8-2-14</span>
<div class="slidecontent"><p>As you&#39;ve seen, middlewares have <strong>many potential uses</strong>. We can do <strong>flow control</strong> for actions, <strong>manipulate them</strong> and provide <strong>developer utilities</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>8-3.</span> The thunk problem</h3>
      <p>Eyes on the prize</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="8-3-1">
<span class="pos">8-3-1</span>
<div class="slidecontent"><p>So now we know what middlewares are, and that Redux Thunk is a middleware, but <strong>what problem is it meant to solve</strong>?</p>
</div></section><section class="slide" data-pos="8-3-2">
<span class="pos">8-3-2</span>
<div class="slidecontent"><p>Take a look at this flow again:</p>
<p><img src="resources/graphviz/redux-middleware-without.svg" alt="no middleware"></p>
<p>We want to be able to <strong>take what action creators return</strong> and <strong>dispatch it to the store</strong>.</p>
</div></section><section class="slide" data-pos="8-3-3">
<span class="pos">8-3-3</span>
<div class="slidecontent"><p>This has the benefit that the <strong>action creator doesn&#39;t require a store reference</strong>. We can have some outer infrastructure that ties this together for us, which <strong>separates concerns</strong> in a nice way.</p>
</div></section><section class="slide" data-pos="8-3-4">
<span class="pos">8-3-4</span>
<div class="slidecontent"><p>But what if we for example need to do some <strong>asynchronous</strong> stuff in our action creators?</p>
<p>Let&#39;s say we <strong>make a network request</strong>, and we want stuff to happen both 
when the <strong>request is made</strong> and when the <strong>data comes back</strong>.</p>
</div></section><section class="slide" data-pos="8-3-5">
<span class="pos">8-3-5</span>
<div class="slidecontent"><p>This is <strong>easy to accomplish</strong> if we have <strong>access to the store</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> loadUrl = <span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
  store.dispatch({<span class="hljs-attr">type</span>:<span class="hljs-string">'LOADING'</span>});
  myBackEnd.request(url, data =&gt; {
    store.dispatch({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'RECEIVEDATA'</span>,
      <span class="hljs-attr">data</span>: data
    });
  });
}
</code></pre>
</div></section><section class="slide" data-pos="8-3-6">
<span class="pos">8-3-6</span>
<div class="slidecontent"><p>But, again, giving the action creators access to the store <strong>ties things together</strong> more tightly than is necessary.</p>
<p>Still, we <strong>must be able</strong> to do async stuff like we just saw!</p>
</div></section><section class="slide" data-pos="8-3-7">
<span class="pos">8-3-7</span>
<div class="slidecontent"><p>And this is exactly what Redux Thunk gives us: a <strong>way to have complex action creators</strong> but <strong>without having to pass the store around</strong>!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>8-4.</span> The thunk solution</h3>
      
    </div>
  </section>
  <section class="slide" data-pos="8-4-1">
<span class="pos">8-4-1</span>
<div class="slidecontent"><p>Again, we want to...</p>
<ul>
<li>always <strong>pass what&#39;s returned from the action creators to <code>store.dispatch</code></strong></li>
<li>be able to <strong>do advanced stuff in the action creators</strong></li>
<li><strong>not having to pass around the store</strong></li>
</ul>
</div></section><section class="slide" data-pos="8-4-2">
<span class="pos">8-4-2</span>
<div class="slidecontent"><p>Redux Thunk&#39;s answer to this is as simple as it is elegant: it allows us to optionally <strong>return functions</strong> (&quot;thunks&quot;!) from the action creators <strong>instead of plain action objects</strong>!</p>
</div></section><section class="slide" data-pos="8-4-3">
<span class="pos">8-4-3</span>
<div class="slidecontent"><p>Here&#39;s what Redux Thunk does:</p>
<ul>
<li>Sit at the <strong>beginning</strong> of the middleware chain</li>
<li><strong>Examine</strong> all incoming actions</li>
<li>If they&#39;re a function, <strong>invoke</strong> them with <code>dispatch</code> and <code>getState</code></li>
<li>Otherwise <strong>pass them along</strong> to <code>next</code> as usual</li>
</ul>
<p>Sounds simple, right?</p>
</div></section><section class="slide" data-pos="8-4-4">
<span class="pos">8-4-4</span>
<div class="slidecontent"><p>It <strong>is simple</strong>. Here&#39;s the <strong>full source code</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> thunk = <span class="hljs-function"><span class="hljs-params">API</span> =&gt;</span> next =&gt; <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action === <span class="hljs-string">'function'</span>){
    <span class="hljs-keyword">return</span> action(API.dispatch,API.getState);
  }
  <span class="hljs-keyword">return</span> next(action);
};
</code></pre>
</div></section><section class="slide" data-pos="8-4-5">
<span class="pos">8-4-5</span>
<div class="slidecontent"><p>Find out more on the <a href="https://github.com/gaearon/redux-thunk" class="link" target="_blank">Redux-Thunk</a> homepage.</p>
<p>(including the fact that I lied on the last slide, since a <a href="https://twitter.com/dan_abramov/status/730053481919303685?lang=en">new API</a> was added last year)</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>8-5.</span> Trying it out</h3>
      <p>Put the pedal to the metal</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="8-5-1">
<span class="pos">8-5-1</span>
<div class="slidecontent"><p>We&#39;ll again use our venerable counter app. The action creator for increment looked like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> increment = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">amount</span>)</span>{
  <span class="hljs-keyword">return</span> {<span class="hljs-attr">type</span>: <span class="hljs-string">'INCREMENT'</span>, <span class="hljs-attr">by</span>: amount};
};
</code></pre>
<p>The action creator <strong>returns an action object</strong> containing the <strong>amount</strong>.</p>
</div></section><section class="slide" data-pos="8-5-2">
<span class="pos">8-5-2</span>
<div class="slidecontent"><p>And here&#39;s the <strong>event listener code</strong> again, showing that what is returned from <code>increment</code> is immediately dispatched to the store.</p>
<pre><code class="lang-javascript">button.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">let</span> input = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"amount"</span>),
    increase = <span class="hljs-built_in">parseInt</span>(input.value),
    action = actionCreators.increment(increase);
  store.dispatch(action);
});
</code></pre>
</div></section><section class="slide" data-pos="8-5-3">
<span class="pos">8-5-3</span>
<div class="slidecontent"><p>Let&#39;s now use Redux Thunk and <strong>remodel the action creator</strong> to make this happen when the button is clicked:</p>
<ul>
<li>We <strong>immediately dispatch</strong> a <code>WARNING</code> action, letting the user know that the counter is about to be incremented.</li>
<li>Then <strong>3 seconds later</strong> we&#39;ll dispatch the actual <code>INCREMENT</code> action.</li>
</ul>
</div></section><section class="slide" data-pos="8-5-4">
<span class="pos">8-5-4</span>
<div class="slidecontent"><p>Here&#39;s the updated action creator to accomplish this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> increment = <span class="hljs-function"><span class="hljs-params">amount</span> =&gt;</span> (dispatch,getState) =&gt; {
    dispatch({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'WARNING'</span>,
      <span class="hljs-attr">msg</span>: <span class="hljs-string">'Now '</span>+getState()+<span class="hljs-string">', will add '</span>+amount+<span class="hljs-string">'!'</span>
    });
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      dispatch({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'INCREMENT'</span>,
        <span class="hljs-attr">by</span>: amount
      });
    },<span class="hljs-number">3000</span>);
  };
};
</code></pre>
</div></section><section class="slide" data-pos="8-5-5">
<span class="pos">8-5-5</span>
<div class="slidecontent"><p>Provided that <strong>Redux Thunk sits at the beginning</strong> of the chain, it will <strong>notice that the action is a function</strong>, and so it will <strong>invoke</strong> it with <code>dispatch</code> and <code>getState</code>.</p>
</div></section><section class="slide" data-pos="8-5-6">
<span class="pos">8-5-6</span>
<div class="slidecontent"><p><strong>Try this out</strong>, together with a <strong>logger</strong> so you can see the &#39;WARNING&#39; message, in the
<a href="resources/site/demos/thunk/index.html" target="_blank">Thunk</a> demo.</p>
</div></section><section class="slide" data-pos="8-5-7">
<span class="pos">8-5-7</span>
<div class="slidecontent"><p>Should you feel the urge, a more <strong>in-depth version</strong> of this walkthrough can be found here:
<a href="http://blog.krawaller.se/posts/exploring-redux-middleware" class="link" target="_blank">Middlewares</a></p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 9 / 12</span>
    <h2>Redux level 2</h2>
    <p>Redux redux</p>
</p>
  </div>
  
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Redux devtools</li>
<li>2. Combined reducers</li>
<li>3. Caching with Reselect</li>
<li>4. Where to put logic</li>
<li>5. Flavours of state</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>9-1.</span> Redux devtools</h3>
      <p>Activating the flux capacitator</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="9-1-1">
<span class="pos">9-1-1</span>
<div class="slidecontent"><p>We hinted earlier that <strong>the Redux model allows time travel</strong>, which can be a <strong>powerful debug tool</strong>.</p>
<p>This is implemented in the <a href="https://github.com/gaearon/redux-devtools/" class="link" target="_blank">Redux Dev Tools</a>, which are available as a <strong>library</strong> or a <strong>chrome plugin</strong>.</p>
</div></section><section class="slide" data-pos="9-1-2">
<span class="pos">9-1-2</span>
<div class="slidecontent"><p><strong>Hot module replacement</strong> means that you can <strong>make changes to your code and reload the app <em>without</em> losing state</strong>.</p>
</div></section><section class="slide" data-pos="9-1-3">
<span class="pos">9-1-3</span>
<div class="slidecontent"><p><strong>Time travel</strong> is very powerful for <strong>tracking down erroneous behaviour</strong>. It also <strong>looks really cool</strong>!</p>
<p>If you <strong>install the devtools as a Chrome extension</strong>, you can see for yourself in the <a href="resources/site/demos/reduxdevtools/index.html" target="_blank">ReduxDevtools</a> demo. There we&#39;ve simply <strong>added the dev tools to the Quotes app</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>9-2.</span> Combined reducers</h3>
      <p>The more the merrier</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="9-2-1">
<span class="pos">9-2-1</span>
<div class="slidecontent"><p>In an <strong>app with lots going on</strong>, the <code>switch</code> in our reducer can quickly <strong>grow out of control</strong>.</p>
<p>The remedy is to have <strong>one reducer per key in our state</strong>, and then <strong>combine these</strong> into a single, app-wide reducer!</p>
</div></section><section class="slide" data-pos="9-2-2">
<span class="pos">9-2-2</span>
<div class="slidecontent"><p>That means we&#39;ll get a <strong>structure</strong> like this:</p>
<p><img src="resources/graphviz/combined.svg" alt="combination"></p>
</div></section><section class="slide" data-pos="9-2-3">
<span class="pos">9-2-3</span>
<div class="slidecontent"><p>We will explore that by <strong>adding more state</strong> to our previous <strong>Quotes app example</strong>, which has now received a footer with <strong>passed time</strong>:</p>
<p><img src="resources/images/quotesapp-footer.png" alt="withfooter"></p>
</div></section><section class="slide" data-pos="9-2-4">
<span class="pos">9-2-4</span>
<div class="slidecontent"><p>The <strong>updated app state</strong> looks like this: </p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> initialstate = {
  <span class="hljs-attr">quotes</span>: [<span class="hljs-string">'Carpe diem'</span>],
  <span class="hljs-attr">time</span>: <span class="hljs-number">0</span>
};
</code></pre>
<p>The quotes-related data lives in <code>state.quotes</code>, and the time-related data lives in <code>state.time</code>. We&#39;ll now make <strong>one reducer for each of these keys</strong>.</p>
</div></section><section class="slide" data-pos="9-2-5">
<span class="pos">9-2-5</span>
<div class="slidecontent"><p>Each of these reducers will <strong>act only on their part of the state</strong>, which means that we can reuse the previous reducer as a <code>quotesReducer</code>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> quotesReducer = <span class="hljs-function">(<span class="hljs-params">state,action</span>) =&gt;</span> {
  <span class="hljs-keyword">switch</span>(action.type){
    <span class="hljs-keyword">case</span> <span class="hljs-string">'ADD'</span>: <span class="hljs-keyword">return</span> state.concat(action.text);
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state || initialstate.quotes;
  }
};
</code></pre>
<p>The only change is the <strong>default <code>initialstate</code> return</strong>, which is <strong>customary in combined reducers</strong>.</p>
</div></section><section class="slide" data-pos="9-2-6">
<span class="pos">9-2-6</span>
<div class="slidecontent"><p>Now we must add a <strong><code>timeReducer</code></strong>, which will be very simple:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> timeReducer = <span class="hljs-function">(<span class="hljs-params">state,action</span>) =&gt;</span> {
  <span class="hljs-keyword">switch</span>(action.type){
    <span class="hljs-keyword">case</span> <span class="hljs-string">'TICK'</span>: <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state || initialstate.time;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="9-2-7">
<span class="pos">9-2-7</span>
<div class="slidecontent"><p>Finally these reducers are <strong>combined</strong> and passed to the store:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> reducer = Redux.combineReducers({
  <span class="hljs-attr">quotes</span>: quotesReducer,
  <span class="hljs-attr">time</span>: timeReducer
});

<span class="hljs-keyword">let</span> store = Redux.createStore(reducer);
</code></pre>
<p>Note that we <strong>no longer need to pass <code>initialstate</code> to <code>createStore</code></strong>, since we dealt with that in the separate reducers.</p>
</div></section><section class="slide" data-pos="9-2-8">
<span class="pos">9-2-8</span>
<div class="slidecontent"><p>You can try the augmented Quotes app in the <a href="resources/site/demos/combinedreducers/index.html" target="_blank">CombinedReducers</a> demo.</p>
<p>Of course, for this simple app, it would have been perfectly fine to have one reducer work on the entire state object. But as things grow more complex, <strong>having separate reducers will really increase code readability</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>9-3.</span> Caching with Reselect</h3>
      <p>Memoizing the bindings</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="9-3-1">
<span class="pos">9-3-1</span>
<div class="slidecontent"><p>A popular <strong>companion library</strong> to Redux is <a href="https://github.com/reactjs/reselect" class="link" target="_blank">Reselect</a>, which helps with:</p>
<ul>
<li>computing <strong>derived data</strong> so that you don&#39;t need to store it in Redux</li>
<li><strong>memoizing</strong> expensive lookups to make Redux more efficient</li>
</ul>
</div></section><section class="slide" data-pos="9-3-2">
<span class="pos">9-3-2</span>
<div class="slidecontent"><p>We will <strong>explore using Reselect for derived data</strong> by adding the <strong>average seconds per quote</strong> to the footer of our Quotes app:</p>
<p><img src="resources/images/quotesapp-reselect.png" alt="average"></p>
</div></section><section class="slide" data-pos="9-3-3">
<span class="pos">9-3-3</span>
<div class="slidecontent"><p>Here are the <strong>main ideas</strong> of Reselect:</p>
<ul>
<li>We work with the concept of <strong>selectors</strong>.</li>
<li>You make a selector for <strong>each piece of data you need from the state</strong>.</li>
<li>The selectors can then be <strong>combined</strong>, and these combinations will be memoised.</li>
</ul>
</div></section><section class="slide" data-pos="9-3-4">
<span class="pos">9-3-4</span>
<div class="slidecontent"><p>In our case we need to select <strong>the number of quotes</strong> and <strong>seconds passed</strong>, from which we can then select <strong>average time per quote</strong> which we show in the app.</p>
<p><img src="resources/graphviz/reselect-map.svg" alt="flow"></p>
</div></section><section class="slide" data-pos="9-3-5">
<span class="pos">9-3-5</span>
<div class="slidecontent"><p>Here&#39;s the <strong>code for <code>numQuotesSelector</code></strong>. It is a <strong>plain function</strong> that is <strong>called with the app state</strong>, and then <strong>returns the length of <code>state.quotes</code></strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> numQuotesSelector = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.quotes.length;
</code></pre>
</div></section><section class="slide" data-pos="9-3-6">
<span class="pos">9-3-6</span>
<div class="slidecontent"><p>And <strong><code>timeSelector</code></strong> is similarly simple:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> timeSelector = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.time;
</code></pre>
</div></section><section class="slide" data-pos="9-3-7">
<span class="pos">9-3-7</span>
<div class="slidecontent"><p>The interesting part comes now when we create <strong><code>averageSelector</code></strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> averageSelector = Reselect.createSelector(
  [numQuotesSelector,timeSelector],
  (numquotes,secs) =&gt; secs / numquotes
);
</code></pre>
<p><strong><code>Reselect.createSelector</code></strong> takes an <strong>array of selectors</strong> and a <strong>constructor function</strong> which is <strong>invoked with the results from the passed selectors</strong>.</p>
</div></section><section class="slide" data-pos="9-3-8">
<span class="pos">9-3-8</span>
<div class="slidecontent"><p>We can now <strong>use <code>averageSelector</code> inside <code>mapStateToProps</code></strong> when we create a container for the footer:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> mapStateToFooterProps = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({
  <span class="hljs-attr">time</span>: state.time,
  <span class="hljs-attr">avg</span>: averageSelector(state)  
});
</code></pre>
<p>See the whole thing running in the <a href="resources/site/demos/reselect/index.html" target="_blank">Reselect</a> demo!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>9-4.</span> Where to put logic</h3>
      <p>app or action creators or reducer?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="9-4-1">
<span class="pos">9-4-1</span>
<div class="slidecontent"><p>Events pass through a Redux app like this:</p>
<p><img src="resources/graphviz/redux-steps.svg" alt=""></p>
</div></section><section class="slide list" data-pos="9-4-2">
<span class="pos">9-4-2</span>
<div class="slidecontent">
<p>...which means that we often have to ask us <strong>where to put a piece of logic</strong> -</p>
<ul>
<li><span>a</span>in our <strong>components</strong>?</li>
<li><span>b</span>in our <strong>action creators</strong>?</li>
<li><span>c</span>in our <strong>reducers</strong>?</li>
</ul>
</div></section><section class="slide num numA" data-pos="9-4-3">
<span class="pos">9-4-3</span>
<div class="slidecontent">
<p>The <strong>components</strong> are <strong>rarely a good answer</strong>, unless the logic is <strong>only relevant to this particular component</strong>.</p>
</div></section><section class="slide num numB" data-pos="9-4-4">
<span class="pos">9-4-4</span>
<div class="slidecontent">
<p>The <strong>action creators</strong> are <strong>often a good answer</strong>. They can be <strong>full of side effects</strong>, and give rise to different actions depending on the circumstances.</p>
</div></section><section class="slide num numC" data-pos="9-4-5">
<span class="pos">9-4-5</span>
<div class="slidecontent">
<p>The <strong>reducers must be pure</strong>, but even apart from that, it is often advantageous to have <strong>complex logic in the action creator instead</strong>.</p>
</div></section><section class="slide" data-pos="9-4-6">
<span class="pos">9-4-6</span>
<div class="slidecontent"><p>Especially <strong>beware of <code>if-else</code> constructs</strong> in reducers - it is often more flexible to <strong>move the branching to the action creators</strong> and letting that fire different actions for each branch.</p>
<p>So <strong>don&#39;t be afraid of fat action creators</strong>, even if it means skinny reducers!</p>
</div></section><section class="slide num numD" data-pos="9-4-7">
<span class="pos">9-4-7</span>
<div class="slidecontent">
<p>There is also a secret fourth option, namely <strong>somewhere else</strong> entirely.</p>
<p><img src="resources/graphviz/redux-steps-four.svg" alt=""></p>
<p>Imagine a board game app; instead of having an action for attacking with each unit type, have a single attacking action and let a helper library do the heavy computing.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>9-5.</span> Flavours of state</h3>
      <p>Lime and chocolate don&#39;t mix</p>
</p>
    </div>
  </section>
  <section class="slide list" data-pos="9-5-1">
<span class="pos">9-5-1</span>
<div class="slidecontent">
<p>It&#39;s not immediately obvious, but when we introduce Redux to an app, we <strong>need to make choices on where to store what</strong>. There are three approaches:</p>
<ul>
<li><span>a</span>Everything in Redux</li>
<li><span>b</span>Some in React</li>
<li><span>c</span>Some also in a router</li>
</ul>
</div></section><section class="slide num numA" data-pos="9-5-2">
<span class="pos">9-5-2</span>
<div class="slidecontent">
<p>The easiest to define is to store <strong>everything in Redux</strong>. We <strong>don&#39;t use <code>setState</code> anywhere in our app</strong>, except for subscribing to Redux state.</p>
<p><img src="resources/graphviz/redux-state-pos.svg" alt=""></p>
<p><strong>Even trivial UI state</strong>, such as a flag for whether a table cell is being edited or not, goes into Redux.</p>
</div></section><section class="slide" data-pos="9-5-3">
<span class="pos">9-5-3</span>
<div class="slidecontent"><p>An advantage of this is that it <strong>allows full time travel</strong> and logging.</p>
<p>A disadvantage is that it now means you must be very careful not to <strong>mix UI and app state</strong>. They must be clearly separated within the state object.</p>
</div></section><section class="slide num numB" data-pos="9-5-4">
<span class="pos">9-5-4</span>
<div class="slidecontent">
<p>If we do allow for <strong>some state inside components</strong>, the previous truths are flipped - we <strong>can no longer do (full) time travel</strong>, but app and UI state separation is free.</p>
<p><img src="resources/graphviz/redux-state-pos-withcomp.svg" alt=""></p>
</div></section><section class="slide num numC" data-pos="9-5-5">
<span class="pos">9-5-5</span>
<div class="slidecontent">
<p>Finally, if you have a router with URL parameters, you must be wary of the fact that those <strong>URL parameters are state</strong>.</p>
<p><img src="resources/graphviz/redux-state-pos-all.svg" alt=""></p>
</div></section><section class="slide" data-pos="9-5-6">
<span class="pos">9-5-6</span>
<div class="slidecontent"><p>There are libraries to <strong>mirror parameters into Redux</strong>. The best option today is probably <a href="https://github.com/reactjs/react-router-redux">React-Router-Redux</a>, which has been semi-adopted by React-Router and will support the new v4 router.</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 10 / 12</span>
    <h2>Advanced React</h2>
    <p>The final final boss</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p>As a <strong>final challenge</strong>, let&#39;s look at <strong>levelling up our React fu</strong> even further!</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. setState take 2</li>
<li>2. The React Context API</li>
<li>3. Context in React-Redux</li>
<li>4. Firebase</li>
<li>5. Recompose</li>
<li>6. Isomorphic apps</li>
<li>7. Performance</li>
<li>8. Working with the DOM</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-1.</span> setState take 2</h3>
      <p>First blood 2</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-1-1">
<span class="pos">10-1-1</span>
<div class="slidecontent"><p>There&#39;s something we didn&#39;t tell you about <code>setState</code>; React will <strong>batch all calls</strong> that happen in the same tick.</p>
<p>In other words, <strong><code>setState</code> is asynchronous</strong>.</p>
</div></section><section class="slide question" data-pos="10-1-2">
<span class="pos">10-1-2</span>
<div class="slidecontent">
<p>In other words - <strong>what will this handler do</strong>?</p>
<pre><code class="lang-javascript">increaseTwice() {
  <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">counter</span>: <span class="hljs-keyword">this</span>.state.counter + <span class="hljs-number">1</span>});
  <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">counter</span>: <span class="hljs-keyword">this</span>.state.counter + <span class="hljs-number">1</span>});
}
</code></pre>
</div></section><section class="slide answer" data-pos="10-1-3">
<span class="pos">10-1-3</span>
<div class="slidecontent">
<p>It will actually just <strong>increase by 1</strong>.</p>
<p>See it happen in the <a href="resources/site/demos/statefail/index.html" target="_blank">StateFail</a> demo.</p>
</div></section><section class="slide list" data-pos="10-1-4">
<span class="pos">10-1-4</span>
<div class="slidecontent">
<p>So, how can we <strong>safely make several state update calls in the same tick</strong>?</p>
<p>The <code>setState</code> method offers <strong>two special syntaxes for this</strong>:</p>
<ul>
<li><span>a</span>callback</li>
<li><span>b</span>transactional</li>
</ul>
</div></section><section class="slide num numA" data-pos="10-1-5">
<span class="pos">10-1-5</span>
<div class="slidecontent">
<p>We can <strong>pass a callback as a second argument</strong>. This will only be invoked <strong>after the update is complete</strong>:</p>
<pre><code class="lang-javascript">increaseTwice() {
  <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">counter</span>: <span class="hljs-keyword">this</span>.state.counter + <span class="hljs-number">1</span>}, () =&gt; {
    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">counter</span>: <span class="hljs-keyword">this</span>.state.counter + <span class="hljs-number">1</span>});
  });
}
</code></pre>
<p>We use this in the <a href="resources/site/demos/statefailfixcallback/index.html" target="_blank">StateFailFixCallback</a> demo.</p>
</div></section><section class="slide num numB" data-pos="10-1-6">
<span class="pos">10-1-6</span>
<div class="slidecontent">
<p>We can also provide a <strong>function instead of an object</strong>. That function will be <strong>passed the current state</strong>, and expected to <strong>return a change object</strong>:</p>
<pre><code class="lang-javascript">increaseTwice() {
  <span class="hljs-keyword">this</span>.setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<span class="hljs-attr">counter</span>: state.counter + <span class="hljs-number">1</span>}));
  <span class="hljs-keyword">this</span>.setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<span class="hljs-attr">counter</span>: state.counter + <span class="hljs-number">1</span>}));
}
</code></pre>
</div></section><section class="slide" data-pos="10-1-7">
<span class="pos">10-1-7</span>
<div class="slidecontent"><p>Even though the calls are batched together and performed in the same tick, the function will be passed the <strong>previously updated state</strong> and it will work as expected.</p>
<p>See it happen in the <a href="resources/site/demos/statefailfixfunc/index.html" target="_blank">StateFailFixFunc</a> demo.</p>
</div></section><section class="slide" data-pos="10-1-8">
<span class="pos">10-1-8</span>
<div class="slidecontent"><p>This last pattern is frequently used for <strong>transactional updates to a database</strong>, from which you might recognise it.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-2.</span> The React Context API</h3>
      <p>low-level globality</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-2-1">
<span class="pos">10-2-1</span>
<div class="slidecontent"><p>Remember how we first said that a <strong>React component UI</strong> was the <strong>result of its props</strong>...</p>
<p><img src="resources/graphviz/react-component-recipe-props.svg" alt="props make UI"></p>
</div></section><section class="slide" data-pos="10-2-2">
<span class="pos">10-2-2</span>
<div class="slidecontent"><p>...and then admitted that we lied, and that the UI is in fact derived from props <strong>and state</strong>?</p>
<p><img src="resources/graphviz/react-component-recipe-state.svg" alt="props make UI"></p>
</div></section><section class="slide" data-pos="10-2-3">
<span class="pos">10-2-3</span>
<div class="slidecontent"><p>That was actually a lie too - the UI is derive from props, state <strong>and context</strong>:</p>
<p><img src="resources/graphviz/react-component-recipe-context.svg" alt="props make UI"></p>
</div></section><section class="slide" data-pos="10-2-4">
<span class="pos">10-2-4</span>
<div class="slidecontent"><p>So here&#39;s the proper <strong>signatures for the life cycle methods</strong>:</p>
<pre><code class="lang-javascript">componentWillReceiveProps(nextProps, nextContext)

shouldComponentUpdate(nextProps, nextState, nextContext)

componentWillUpdate(nextProps, nextState, nextContext)

componentDidUpdate(prevProps, prevState, prevContext)
</code></pre>
</div></section><section class="slide" data-pos="10-2-5">
<span class="pos">10-2-5</span>
<div class="slidecontent"><p>There are <strong>very few times</strong> when you actually <strong>need to use context</strong>. It corresponds to <strong>global state</strong>, which is mostly a <strong>bad idea</strong>.</p>
<p>A hint to that is that up until recently the <strong>API wasn&#39;t documented</strong> at all!</p>
</div></section><section class="slide" data-pos="10-2-6">
<span class="pos">10-2-6</span>
<div class="slidecontent"><p>So, <strong>what then is the point</strong> of context?</p>
<p>Context is mostly <strong>used in libraries</strong>. Later we&#39;ll peek at how <code>React-Redux</code> uses context to do their magic, but first we should explore the API!</p>
</div></section><section class="slide" data-pos="10-2-7">
<span class="pos">10-2-7</span>
<div class="slidecontent"><p>Ok, enough of the why - on to the how! What does the <strong>API</strong> for Context look like?</p>
</div></section><section class="slide list" data-pos="10-2-8">
<span class="pos">10-2-8</span>
<div class="slidecontent">
<p>The <strong>concept behind Context</strong> builds on the idea of <strong>providers</strong> and <strong>consumers</strong>:</p>
<ul>
<li><span>a</span>A <strong>provider</strong> component can <strong>provide</strong> context...</li>
<li><span>b</span>which <strong>consumer</strong> components positioned <strong>further up the tree</strong> can <strong>consume</strong>.</li>
</ul>
<p>Thus providers are often found at the <strong>root</strong> of the app.</p>
</div></section><section class="slide num numA" data-pos="10-2-9">
<span class="pos">10-2-9</span>
<div class="slidecontent">
<p>We&#39;ll first look at how to <strong>define a Provider</strong>. To provide context<strong> to downstream components, a Provider must do two things</strong>:</p>
<ul>
<li>Define the <strong>shape of the context</strong> in <code>childContextTypes</code>, using the same syntax as for <code>PropTypes</code> definitions.</li>
<li>Define a <code>getChildContext</code> method which should <strong>return a context matching that shape</strong>.</li>
</ul>
</div></section><section class="slide" data-pos="10-2-10">
<span class="pos">10-2-10</span>
<div class="slidecontent"><p>Here is <strong>an example Provider</strong> which will expose a <code>title</code> to all children as <code>this.context.title</code>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ContextProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">static</span> get childContextTypes() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: React.PropTypes.string
    };
  }
  getChildContext() {
    <span class="hljs-keyword">return</span> {<span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.props.headline};
  }
  render(){
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.children;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="10-2-11">
<span class="pos">10-2-11</span>
<div class="slidecontent"><p>The <strong><code>childContextTypes</code> definition object</strong> is served as a <strong>static property</strong>, exactly like <code>propTypes</code> and <code>defaultProps</code>.</p>
</div></section><section class="slide num numB" data-pos="10-2-12">
<span class="pos">10-2-12</span>
<div class="slidecontent">
<p>And now the <strong>Consumers</strong>! Since we <strong>don&#39;t want to spam every component</strong> with context provided by upstream providers, Consumers have to <strong>actively opt in</strong> to gain access to the context data.</p>
<p>This is done through defining <code>contextTypes</code>, again in the same way as we did for <code>propTypes</code>.</p>
</div></section><section class="slide" data-pos="10-2-13">
<span class="pos">10-2-13</span>
<div class="slidecontent"><p>Here is an <strong>example Consumer</strong> to catch the context from our previous Provider:</p>
<pre><code class="lang-javascript">let ContextConsumer = (props, context) =&gt; &lt;h4&gt;{context.title}&lt;/h4&gt;;

ContextConsumer.contextTypes = {
  title: React.PropTypes.string
};
</code></pre>
</div></section><section class="slide" data-pos="10-2-14">
<span class="pos">10-2-14</span>
<div class="slidecontent"><p>Our example components could be rendered something like this:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Of global importance"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Consumer</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span>,
</code></pre><p>The important thing is that the <strong>Consumer must be positioned inside the Provider</strong>.</p>
</div></section><section class="slide" data-pos="10-2-15">
<span class="pos">10-2-15</span>
<div class="slidecontent"><p>You can <strong>play around</strong> with the above example in the
<a href="resources/site/demos/context/index.html" target="_blank">Context</a> demo.</p>
</div></section><section class="slide" data-pos="10-2-16">
<span class="pos">10-2-16</span>
<div class="slidecontent"><p>More details are in the <strong>official documentation</strong> for the Context API:
<a href="https://facebook.github.io/react/docs/context.html" class="link" target="_blank">Context</a></p>
</div></section><section class="slide" data-pos="10-2-17">
<span class="pos">10-2-17</span>
<div class="slidecontent"><p>As said before, <strong>Context is a bit experimental</strong> (even though it is now officially documented).</p>
<p>See this <a href="https://medium.com/react-ecosystem/how-to-handle-react-context-a7592dfdcbc" class="link" target="_blank">Context blog post</a> for a closer look as to <strong>why context is dangerous</strong>.</p>
</div></section><section class="slide" data-pos="10-2-18">
<span class="pos">10-2-18</span>
<div class="slidecontent"><p>A final note; context is an <strong>excellent place for style objects</strong> if you are using inline styles as in the <a href="resources/site/demos/style/index.html" target="_blank">Style</a> demo!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-3.</span> Context in React-Redux</h3>
      <p>A real-life case study</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-3-1">
<span class="pos">10-3-1</span>
<div class="slidecontent"><p>We&#39;ll now walk through implementing a <strong>home-made version of React-Redux</strong>, in order to understand how it works.</p>
<p>In other words, we&#39;ll make our own <strong><code>Provider</code> component</strong> and <strong><code>connect</code> function</strong>!</p>
</div></section><section class="slide" data-pos="10-3-2">
<span class="pos">10-3-2</span>
<div class="slidecontent"><p>As you might suspect, the top-level <strong>Provider</strong> that we fed the <strong>store</strong> simply <strong>exposes this to the context</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Provider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">static</span> get childContextTypes(){
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">store</span>: React.PropTypes.object };
  }
  getChildContext(){
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">store</span>: <span class="hljs-keyword">this</span>.props.store };
  }
  render(){
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.children;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="10-3-3">
<span class="pos">10-3-3</span>
<div class="slidecontent"><p>That was easy enough - <code>connect</code> will be slightly harder!</p>
</div></section><section class="slide" data-pos="10-3-4">
<span class="pos">10-3-4</span>
<div class="slidecontent"><p>Remember;</p>
<ol>
<li>the <strong>connect function</strong> is called with <code>mapState</code>, <code>mapDispatch</code> and <code>bakeProps</code>.</li>
<li>That <strong>returns</strong> a <strong>wrapper function</strong> which is called with the component we want to wrap...</li>
<li>...which finally <strong>returns</strong> the generated <strong>container class</strong> which will be called with some props from the parent.</li>
</ol>
</div></section><section class="slide" data-pos="10-3-5">
<span class="pos">10-3-5</span>
<div class="slidecontent"><p>Here&#39;s a <strong>diagram</strong> of this flow:</p>
<p><img src="resources/graphviz/react-context-connect-chain.svg" alt="connect chain"></p>
</div></section><section class="slide" data-pos="10-3-6">
<span class="pos">10-3-6</span>
<div class="slidecontent"><p>Here&#39;s the <strong>same chain in code format</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> connect = <span class="hljs-function">(<span class="hljs-params">mapState,mapDispatch,bake</span>) =&gt;</span> Component =&gt; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Container</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// container definition here</span>
}
</code></pre>
<p>Now we&#39;ll walk through how we define <code>Container</code>!</p>
</div></section><section class="slide list" data-pos="10-3-7">
<span class="pos">10-3-7</span>
<div class="slidecontent">
<p>We need to do a <strong>number of things</strong> in there;</p>
<ul>
<li><span>a</span>catch <code>store</code> from the context</li>
<li><span>b</span>subscribe to store data</li>
<li><span>c</span>render the child</li>
</ul>
</div></section><section class="slide num numA" data-pos="10-3-8">
<span class="pos">10-3-8</span>
<div class="slidecontent">
<p>First off, the definition will <strong>use the Context API</strong> to fetch a <strong>reference to the store</strong> passed down from the <strong>Provider</strong>: </p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Container</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">static</span> get contextTypes: { <span class="hljs-attr">store</span>: React.PropTypes.object },

  <span class="hljs-comment">// rest of definition can now access `this.context.store`</span>
}
</code></pre>
</div></section><section class="slide" data-pos="10-3-9">
<span class="pos">10-3-9</span>
<div class="slidecontent"><p>Side note; you&#39;ve now seen <strong>all Context-related code</strong>. But we&#39;ll follow through anyway since that will help <strong>dispel eventual magic</strong> and <strong>further our understanding of React itself</strong>!</p>
</div></section><section class="slide num numB" data-pos="10-3-10">
<span class="pos">10-3-10</span>
<div class="slidecontent">
<p>We&#39;ll use the <strong>same approach</strong> as in our <strong>vanilla Redux integration</strong> - we make our wrapper <strong>save the store data in its state</strong> every time the store is updated:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Container</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(){
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {<span class="hljs-attr">childprops</span>:{}};
  }
  componentDidMount() {
    <span class="hljs-keyword">let</span> store = <span class="hljs-keyword">this</span>.context.store;
    <span class="hljs-keyword">let</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ ... }; <span class="hljs-comment">// &lt;-- shown soon</span>
    store.subscribe(callback);
    callback();
  }
  <span class="hljs-comment">// rest removed</span>
}
</code></pre>
</div></section><section class="slide" data-pos="10-3-11">
<span class="pos">10-3-11</span>
<div class="slidecontent"><p>Here&#39;s the <strong>callback</strong> we run when the store updates!</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> callback = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> childprops = bake(
    mapState(store.getState()),
    mapDispatch(store.dispatch),
    <span class="hljs-keyword">this</span>.props
  );
  <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">childprops</span>:childprops});
};
</code></pre>
<p>It simply <strong>bakes the new child props</strong> and <strong>saves them to state</strong>!</p>
</div></section><section class="slide num numC" data-pos="10-3-12">
<span class="pos">10-3-12</span>
<div class="slidecontent">
<p>Now we can simply <strong>pass on</strong> <code>this.state.childprops</code> as properties to &#39;Component&#39; in the render method:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Container</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// ...rest removed ...</span>
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.state.childprops</span>} /&gt;</span>;
  }
}</span>
</code></pre>
</div></section><section class="slide" data-pos="10-3-13">
<span class="pos">10-3-13</span>
<div class="slidecontent"><p>Now we&#39;ve <strong>fully implemented React-Redux</strong>!</p>
<p>Well, except that we <strong>always</strong> expect <code>connect</code> to be <strong>called like this</strong>:</p>
<pre><code class="lang-javascript">connect(mapStateFunction,mapDispatchFunction,bakeFunction);
</code></pre>
</div></section><section class="slide" data-pos="10-3-14">
<span class="pos">10-3-14</span>
<div class="slidecontent"><p>You can <strong>try out</strong> this homemade React-Redux version applied to our old quotes app in the
<a href="resources/site/demos/homemade/index.html" target="_blank">Homemade</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-4.</span> Firebase</h3>
      <p>Live updates from the cloud</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-4-1">
<span class="pos">10-4-1</span>
<div class="slidecontent"><p><span class='freeimg'><img src="resources/images/firebase-logo.png" alt="firebase"></span></p>
<p><a href="https://firebase.google.com/" class="link" target="_blank">Firebase</a> is a <strong>cloud-based database</strong>. It stores data in a <strong>JSON format</strong> and offers <strong>realtime updates</strong>, which makes it an <strong>ideal match with React</strong>!</p>
</div></section><section class="slide" data-pos="10-4-2">
<span class="pos">10-4-2</span>
<div class="slidecontent"><p>The <strong>basic idea is simple</strong>: After having <strong>set up our database</strong> at the Firebase homepage, we use their web lib to <strong>initialize a local connection</strong>:</p>
<pre><code class="lang-javascript">firebase.initializeApp({
  <span class="hljs-attr">apiKey</span>: <span class="hljs-string">"&lt;mysecretkey&gt;"</span>,
  <span class="hljs-attr">databaseURL</span>: <span class="hljs-string">"https://&lt;databasename&gt;.firebaseio.com"</span>
});
</code></pre>
</div></section><section class="slide" data-pos="10-4-3">
<span class="pos">10-4-3</span>
<div class="slidecontent"><p>We then <strong>create a reference</strong> to a spot in our database. Given data that looks like this:</p>
<pre><code class="lang-json">{
  blog: {
    comments: {
      // lots of stuff
    }
  },
  // and below lots of other stuffs
}
</code></pre>
<p>...we could connect to <code>blog.comments</code> like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> ref = firebase.database().ref(<span class="hljs-string">"blog/comments"</span>)
</code></pre>
</div></section><section class="slide" data-pos="10-4-4">
<span class="pos">10-4-4</span>
<div class="slidecontent"><p>With that reference we can <strong>add a change listener</strong>:</p>
<pre><code class="lang-javascript">DB.on(<span class="hljs-string">'value'</span>, snapshot =&gt; {
  <span class="hljs-keyword">let</span> data = snapshot.val();
  <span class="hljs-comment">// now do something with `data`</span>
});
</code></pre>
<p>Now our <strong>callback will be called whenever new data is pushed from the Firebase servers</strong>.</p>
</div></section><section class="slide" data-pos="10-4-5">
<span class="pos">10-4-5</span>
<div class="slidecontent"><p>We can also <strong>add new data</strong> at the reference point:</p>
<pre><code class="lang-javascript">ref.push({
  <span class="hljs-attr">author</span>: <span class="hljs-string">'John Doe'</span>,
  <span class="hljs-attr">msg</span>: <span class="hljs-string">'What trickery is this?!'</span>
});
</code></pre>
<p>And of course there are similar functionality for <strong>editing</strong> and <strong>deleting</strong>.</p>
</div></section><section class="slide" data-pos="10-4-6">
<span class="pos">10-4-6</span>
<div class="slidecontent"><p>As previously hinted, <strong>Firebase is a very good fit for React</strong>. To highlight this, see how easy it is to build a <strong>chat application</strong> in the <a href="resources/site/demos/firebase/index.html" target="_blank">Firebase</a> demo.</p>
<p>There is also a <strong>more advanced version</strong>, <a href="resources/site/demos/firebase2/index.html" target="_blank">Firebase2</a>, which lets you pick a username and chat in different rooms.</p>
</div></section><section class="slide" data-pos="10-4-7">
<span class="pos">10-4-7</span>
<div class="slidecontent"><p>A final warning: after <strong>Google bought Firebase</strong> in the <strong>spring of 2016</strong> there&#39;s been some <strong>major API updates</strong>, so be aware that material found online <strong>might be out of date</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-5.</span> Recompose</h3>
      <p>A React utility belt</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-5-1">
<span class="pos">10-5-1</span>
<div class="slidecontent"><p><a href="https://facebook.github.io/react-native/" class="link" target="_blank">Recompose</a> is branded as a &quot;lodash but for React&quot;. The primary use case is to <strong>transform components defined as plain functions</strong>.</p>
<p>The end result is that you get <strong>advanced components</strong> that <strong>would normally require the <code>React.createClass</code></strong> syntax, but without abandoning the convenient plain functions.</p>
</div></section><section class="slide" data-pos="10-5-2">
<span class="pos">10-5-2</span>
<div class="slidecontent"><p>As an example, take a look at this <strong>simple Clicker demo app</strong>:</p>
<pre><code><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Clicker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span> () {
    <span class="hljs-keyword">super</span>()
    <span class="hljs-keyword">this</span>.state = {<span class="hljs-attr">count</span>: <span class="hljs-number">3</span>}
    <span class="hljs-keyword">this</span>.more = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">count</span>: <span class="hljs-keyword">this</span>.state.count + <span class="hljs-number">1</span>})
  }
  render () {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{this.state.count} bottles of beer on the wall<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.more}</span>&gt;</span>Buy more<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }
}
</code></pre></div></section><section class="slide" data-pos="10-5-3">
<span class="pos">10-5-3</span>
<div class="slidecontent"><p>This can be <strong>expressed in Recompose</strong> like this instead:</p>
<pre><code><span class="hljs-keyword">let</span> enhance = withState(<span class="hljs-string">'count'</span>, <span class="hljs-string">'more'</span>, <span class="hljs-number">3</span>)
<span class="hljs-keyword">let</span> Clicker = enhance(<span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{props.count} bottles of beer on the wall<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> props.more(n =&gt; n + 1)}&gt;Buy more<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
));
</code></pre><p>As another example, let&#39;s say we have a <strong><code>User</code></strong> plain function component with a <strong>very expensive render</strong>:</p>
<pre><code>let <span class="hljs-keyword">User</span> <span class="hljs-title">= props</span> =&gt; <span class="hljs-tag">&lt;div&gt;</span>User: {props.name}<span class="hljs-tag">&lt;/div&gt;</span>;
</code></pre></div></section><section class="slide" data-pos="10-5-4">
<span class="pos">10-5-4</span>
<div class="slidecontent"><p>Normally, to make sure <code>User</code> doesn&#39;t rerender when non-vital props are changed, we would have to use a class and implement <strong><code>shouldComponentUpdate</code></strong>.</p>
</div></section><section class="slide" data-pos="10-5-5">
<span class="pos">10-5-5</span>
<div class="slidecontent"><p>But using <strong>Recompose</strong> we can <strong>instead do this</strong>:</p>
<pre><code><span class="hljs-attribute">let PerformantUser</span> = Recompose.onlyUpdateForKeys([<span class="hljs-string">'name'</span>])(User);
</code></pre><p>Although the &quot;double invocation&quot; can look weird the <strong>functionality is clear</strong>, and we can keep the clean definition of <code>User</code>.</p>
</div></section><section class="slide" data-pos="10-5-6">
<span class="pos">10-5-6</span>
<div class="slidecontent"><p>The usefulness of Recompose can be discussed, but if nothing else, using it will <strong>improve your understanding</strong> for <strong>how components are defined</strong>!</p>
<p>There are some more examples in the <a href="resources/site/demos/recompose/index.html" target="_blank">Recompose</a> demo.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-6.</span> Isomorphic apps</h3>
      <p>because buzzword</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-6-1">
<span class="pos">10-6-1</span>
<div class="slidecontent"><p>First off; by <strong>isomorphic apps</strong>, or <strong>universal apps</strong>, we mean apps that <strong>can be rendered outside the browser</strong>.</p>
<p>Specifically this often means <strong>rendering on the server</strong>, which means that the <strong>initial rendering is much faster</strong>.</p>
</div></section><section class="slide" data-pos="10-6-2">
<span class="pos">10-6-2</span>
<div class="slidecontent"><p>With React this is easy, since <strong>rendering outputs a virtual tree</strong> describing the UI. </p>
<p>This tree can then be <strong>digested by whatever system</strong>. So far we&#39;ve usually used <strong>ReactDOM</strong>, which takes the virtual tree and created DOM nodes:</p>
<p><img src="resources/graphviz/renderingtargets.svg" alt=""></p>
</div></section><section class="slide" data-pos="10-6-3">
<span class="pos">10-6-3</span>
<div class="slidecontent"><p>But we can also use <strong>other rendering targets</strong>:</p>
<p><img src="resources/graphviz/renderingtargetsmany.svg" alt=""></p>
<p>As you can see, <a href="https://facebook.github.io/react/docs/react-dom-server.html">ReactDOMServer</a> <strong>outputs a string</strong>, which makes it very useful on the server.</p>
</div></section><section class="slide" data-pos="10-6-4">
<span class="pos">10-6-4</span>
<div class="slidecontent"><p>Building on the idea of being able to <strong>render on the server</strong> is <a href="https://zeit.co/blog/next">NextJS</a>, a very interesting mini-framework for <strong>isomorphic apps</strong> built on top of React.</p>
<p>The creator, Guillermo Rauch, made a <strong><a href="https://www.youtube.com/watch?v=evaMpdSiZKk">good overview of NextJS</a></strong> at ReactConf 2017.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-7.</span> Performance</h3>
      <p>because the fastest app wins</p>
</p>
    </div>
  </section>
  <section class="slide list" data-pos="10-7-1">
<span class="pos">10-7-1</span>
<div class="slidecontent">
<p>Let&#39;s go over some libraries and concepts that <strong>help improve React performance</strong>!</p>
<ul>
<li><span>a</span>the <strong><code>shouldComponentUpdate</code></strong> method</li>
<li><span>b</span>the <strong><code>React-Perimeter</code></strong> library</li>
<li><span>c</span>the <strong><code>React-virtualized</code></strong> library</li>
<li><span>d</span>the <strong><code>React Fiber</code></strong> rewrite</li>
<li><span>e</span>the <strong><code>React-Canvas</code></strong> library</li>
</ul>
</div></section><section class="slide num numA" data-pos="10-7-2">
<span class="pos">10-7-2</span>
<div class="slidecontent">
<p>We&#39;ve already mentioned <strong><code>shouldComponentUpdate</code></strong> as a <strong>lifecycle method</strong>, which lets us <strong>short-circuit the rerender</strong>.</p>
<p>But we repeat it here since it is the <strong>single most important thing</strong> you can do to improve app performance.</p>
</div></section><section class="slide" data-pos="10-7-3">
<span class="pos">10-7-3</span>
<div class="slidecontent"><p>The logic behind when to short-circuit is <strong>very context specific</strong>, but React contains a ready-made <a href="https://facebook.github.io/react/docs/react-api.html#react.purecomponent">PureComponent class to inherit from</a> (or a <a href="https://facebook.github.io/react/docs/pure-render-mixin.html">PureRender mixin</a> if you&#39;re not using classes) that implements a <strong>good default</strong>: it <strong>returns false if state and props are the same</strong>.</p>
</div></section><section class="slide" data-pos="10-7-4">
<span class="pos">10-7-4</span>
<div class="slidecontent"><p>Note that the <strong>comparison is shallow</strong>, so for complex data structures we <strong>might need additional logic</strong>.</p>
<p>Also consider using something like <a href="https://facebook.github.io/immutable-js/">ImmutableJS</a> which <strong>helps make identical objects have the same reference</strong>.</p>
<p>This <strong>saves you from having to do recursive comparisons</strong>, and can be a significant performance boost.</p>
</div></section><section class="slide num numB" data-pos="10-7-5">
<span class="pos">10-7-5</span>
<div class="slidecontent">
<p>The <a href="https://github.com/aweary/react-perimeter">React-Perimeter library</a> can further help us to increase perceived performance.</p>
<p>It lets us <strong>execute logic</strong> when the <strong>cursor breaches the perimeter</strong> of a given component.</p>
<p>This <strong>can be used for a lot of things</strong>, but it is <strong>especially interesting for performance enhancements</strong>.</p>
</div></section><section class="slide" data-pos="10-7-6">
<span class="pos">10-7-6</span>
<div class="slidecontent"><p>Here&#39;s a <strong>simple example</strong> from the official page:</p>
<pre><code><span class="hljs-keyword">import</span> perimeter <span class="hljs-keyword">from</span> <span class="hljs-string">'react-perimeter'</span>

<span class="hljs-keyword">const</span> LoadMoreButton = (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Perimeter</span>
      <span class="hljs-attr">onBreach</span>=<span class="hljs-string">{this.prefetch}</span>
      <span class="hljs-attr">padding</span>=<span class="hljs-string">{80}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.fetch}</span>&gt;</span>Load more<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Perimeter</span>&gt;</span></span>
);
</code></pre></div></section><section class="slide" data-pos="10-7-7">
<span class="pos">10-7-7</span>
<div class="slidecontent"><p>Also note how <code>React-Perimeter</code> is a <strong>prime example of the power of the component abstraction</strong>!</p>
</div></section><section class="slide num numC" data-pos="10-7-8">
<span class="pos">10-7-8</span>
<div class="slidecontent">
<p>The <a href="https://github.com/bvaughn/react-virtualized"><code>React-Virtualized</code> library</a> contains <strong>ready-made components</strong> for dealing with <strong>huge lists</strong>, which is a common performance bottleneck.</p>
<p>It accomplishes this through <strong>windowing</strong>, in essence not rendering stuff that isn&#39;t on screen.</p>
</div></section><section class="slide num numD" data-pos="10-7-9">
<span class="pos">10-7-9</span>
<div class="slidecontent">
<p>For React v16, the team did a <strong>complete rewrite of the core reconciliation engine</strong>. This rewrite was called <strong><code>React Fiber</code></strong>, and is in essence an <strong>implementation of the call stack in a render sense</strong>.</p>
<p>We don&#39;t have to change a thing to capitalise on this - just by <strong>upgrading to v16</strong>, everything will be slightly faster!</p>
</div></section><section class="slide" data-pos="10-7-10">
<span class="pos">10-7-10</span>
<div class="slidecontent"><p>The inner workings of the Fiber rewrite are rather fascinating - for an entrypoint, see <a href="https://www.youtube.com/watch?v=ZCuYPiUIONs&amp;t=6s">Lin Clark&#39;s talk</a> from ReactConf 2017.</p>
</div></section><section class="slide num numE" data-pos="10-7-11">
<span class="pos">10-7-11</span>
<div class="slidecontent">
<p>The <a href="https://github.com/Flipboard/react-canvas">React-Canvas</a> library is really just <strong>another rendering target</strong>, much like React-SVG and the others we mentioned previously.</p>
</div></section><section class="slide" data-pos="10-7-12">
<span class="pos">10-7-12</span>
<div class="slidecontent"><p>However, for <strong>complex components</strong>, using a canvas element can mean a <strong>performance boost</strong>. </p>
<p>This is not an app-wide decision - you can <strong>render a particularily heavy component onto a canvas</strong>, but leave the surrounding app as a regular DOM app.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>10-8.</span> Working with the DOM</h3>
      <p>DOM DOM DOM</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="10-8-1">
<span class="pos">10-8-1</span>
<div class="slidecontent"><p>We&#39;ve already touched on it several times during the course: since <strong>React wants ownership of the DOM</strong>, it can be awkward when <strong>others want to play with the DOM too</strong>.</p>
</div></section><section class="slide" data-pos="10-8-2">
<span class="pos">10-8-2</span>
<div class="slidecontent"><p>This can be <strong>especially problematic</strong> when you want to <strong>include DOM-operating libraries in a React app</strong>.</p>
<p>For example, the <a href="https://d3js.org/">D3 animation library</a>, which expects to be fed a DOM element to render the beautiful graphs into. How do we fit this into React?</p>
</div></section><section class="slide" data-pos="10-8-3">
<span class="pos">10-8-3</span>
<div class="slidecontent"><p>A good, general case solution is to use <a href="https://github.com/Olical/react-faux-dom">React-faux-DOM</a>. It <strong>creates a faux DOM element</strong> which you can give to a DOM manipulation library.</p>
<p><img src="resources/graphviz/faux-dom.svg" alt=""></p>
<p>The fake node has a <code>.toReact</code> method which <strong>converts it to Virtual DOM</strong>, ready to be rendered by React!</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 11 / 12</span>
    <h2>Appendix - ES6 features</h2>
    <p>The nitty gritty</p>
</p>
  </div>
  
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. Versatile object definitions</li>
<li>2. Destructuring and rest</li>
<li>3. Versatile function definitions</li>
<li>4. Spreads</li>
<li>5. Modules</li>
<li>6. Classes</li>
<li>7. Decorators</li>
<li>8. Miscellaneous</li>
<li>9. Exercise - trying it out</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-1.</span> Versatile object definitions</h3>
      <p>defining objects like a boss</p>
</p>
    </div>
  </section>
  <section class="slide list" data-pos="11-1-1">
<span class="pos">11-1-1</span>
<div class="slidecontent">
<p>In ES2015 we got five small but nice features for <strong>defining objects in a smoother way</strong>:</p>
<ul>
<li><span>a</span>dynamic keys</li>
<li><span>b</span>automatic same-key-value</li>
<li><span>c</span>method shorthand</li>
<li><span>d</span>getters</li>
<li><span>e</span>setters</li>
</ul>
</div></section><section class="slide num numA" data-pos="11-1-2">
<span class="pos">11-1-2</span>
<div class="slidecontent">
<p>If we wanted to create an <strong>object with a dynamic key</strong> we had to go about it in a roundabout way before:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> obj = {};
obj[dynamicKey] = someValue;
</code></pre>
</div></section><section class="slide" data-pos="11-1-3">
<span class="pos">11-1-3</span>
<div class="slidecontent"><p>Now, instead, we can use the <strong>dynamic key syntax</strong> by wrapping it in brackets:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> obj = {[dynamicKey]: someValue};
</code></pre>
</div></section><section class="slide num numB" data-pos="11-1-4">
<span class="pos">11-1-4</span>
<div class="slidecontent">
<p>Also, if our value is in a <strong>variable with the same name as the intended key</strong>, like here:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> person = {
  <span class="hljs-attr">name</span>: name,
  <span class="hljs-attr">age</span>: age
};
</code></pre>
</div></section><section class="slide" data-pos="11-1-5">
<span class="pos">11-1-5</span>
<div class="slidecontent"><p>...ES2015 introduces a <strong>shorthand syntax</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> person = {name, age};
</code></pre>
</div></section><section class="slide num numC" data-pos="11-1-6">
<span class="pos">11-1-6</span>
<div class="slidecontent">
<p>And if we define an <strong>object with a method</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">method</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg1,arg2</span>)</span>{
    <span class="hljs-comment">// do advanced stuff</span>
  }
};
</code></pre>
</div></section><section class="slide" data-pos="11-1-7">
<span class="pos">11-1-7</span>
<div class="slidecontent"><p>...ES2015 lets us be less verbose by using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Method_definitions">method shorthand syntax</a>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> obj = {
  method(arg1,arg2){
    <span class="hljs-comment">// do advanced stuff</span>
  }
};
</code></pre>
</div></section><section class="slide" data-pos="11-1-8">
<span class="pos">11-1-8</span>
<div class="slidecontent"><p>This can also be <strong>combined with the dynamic key syntax</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> obj = {
  [methodName](arg1,arg2){
    <span class="hljs-comment">// do advanced stuff</span>
  }
};
</code></pre>
</div></section><section class="slide num numD" data-pos="11-1-9">
<span class="pos">11-1-9</span>
<div class="slidecontent">
<p>Finally, ES2015 also introduced <strong>getters and setters</strong>.</p>
<p>Let&#39;s look at <strong>getters</strong> first. They are very useful for dealing with <strong>computed properties</strong>.</p>
</div></section><section class="slide" data-pos="11-1-10">
<span class="pos">11-1-10</span>
<div class="slidecontent"><p>Say we&#39;re working with <strong>user objects</strong> like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> user = {
  <span class="hljs-attr">firstName</span>: <span class="hljs-string">"John"</span>,
  <span class="hljs-attr">lastName</span>: <span class="hljs-string">"Doe"</span>
};
</code></pre>
<p>Now we want to implement a <strong>computed property <code>fullName</code></strong>.</p>
</div></section><section class="slide" data-pos="11-1-11">
<span class="pos">11-1-11</span>
<div class="slidecontent"><p>Here&#39;s an <strong>ES3 solution</strong> doing it as a <strong>method</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> user = {
  <span class="hljs-attr">firstName</span>: <span class="hljs-string">"John"</span>,
  <span class="hljs-attr">lastName</span>: <span class="hljs-string">"Doe"</span>,
  <span class="hljs-attr">fullName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firstName + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.lastName;
  }
}

user.fullName(); <span class="hljs-comment">// John Doe</span>
</code></pre>
</div></section><section class="slide" data-pos="11-1-12">
<span class="pos">11-1-12</span>
<div class="slidecontent"><p>By using an <strong>ES2015 getter</strong> we can access the computed property normally instead:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> user = {
  <span class="hljs-attr">firstName</span>: <span class="hljs-string">"John"</span>,
  <span class="hljs-attr">lastName</span>: <span class="hljs-string">"Doe"</span>,
  get fullName() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firstName + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.lastName;
  }
}

user.fullName; <span class="hljs-comment">// John Doe, without invocation!</span>
</code></pre>
<p>Cf. <a href="https://en.wikipedia.org/wiki/Uniform_access_principle">uniform access principle</a>.</p>
</div></section><section class="slide num numE" data-pos="11-1-13">
<span class="pos">11-1-13</span>
<div class="slidecontent">
<p>A <strong>setter</strong> let&#39;s you <strong>act upon prop mutation</strong>, for example <strong>logging</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> user = {
  set userName(str) {
    log(<span class="hljs-keyword">this</span>._userName + <span class="hljs-string">" changed name to "</span> + str);
    <span class="hljs-keyword">this</span>._userName = str;
  }
}

user.userName = <span class="hljs-string">"Steve"</span>; <span class="hljs-comment">// Bob changed name to Steve</span>
</code></pre>
</div></section><section class="slide" data-pos="11-1-14">
<span class="pos">11-1-14</span>
<div class="slidecontent"><p>...or <strong>validation</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> user = {
  set userName(str) {
    <span class="hljs-keyword">if</span> (str.match(<span class="hljs-regexp">/[^a-z]/</span>)){
      <span class="hljs-keyword">throw</span> <span class="hljs-string">"Name can only contain lowercase letters!"</span>;
    }
    <span class="hljs-keyword">this</span>._userName = str;
  }
}

user.userName = <span class="hljs-string">"Bob the 1 and only"</span>; <span class="hljs-comment">// Name can only contain..</span>
</code></pre>
</div></section><section class="slide question" data-pos="11-1-15">
<span class="pos">11-1-15</span>
<div class="slidecontent">
<p>Did you note that we used a <strong>different property name</strong> inside the setter? The setter was for <code>userName</code>, but inside it we instead set <code>_userName</code>.</p>
<p>Why do you think that is?</p>
</div></section><section class="slide answer" data-pos="11-1-16">
<span class="pos">11-1-16</span>
<div class="slidecontent">
<p>If we mutated the same property inside the setter then that would trigger the setter to be called, which would mutate the property, which would trigger the setter, etc. We would end up in an <strong>infinite loop</strong>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-2.</span> Destructuring and rest</h3>
      <p>cherry-picking the raisins from the cookie</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="11-2-1">
<span class="pos">11-2-1</span>
<div class="slidecontent"><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">Destructuring</a> is a way to pick values from nested structures without having to do the manual digging.</p>
</div></section><section class="slide" data-pos="11-2-2">
<span class="pos">11-2-2</span>
<div class="slidecontent"><p>Let&#39;s say we have an <strong>array of <code>contenders</code></strong>, each represented by an object.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> contenders = [
  {<span class="hljs-attr">name</span>: <span class="hljs-string">"David"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">37</span>},
  {<span class="hljs-attr">name</span>: <span class="hljs-string">"Carl"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>}
  <span class="hljs-comment">/* and a few others */</span>
];
</code></pre>
<p>They are <strong>sorted by position</strong> so the first contender won, etc.</p>
</div></section><section class="slide" data-pos="11-2-3">
<span class="pos">11-2-3</span>
<div class="slidecontent"><p>If we wanted the <strong>name of the winner</strong> we would do something like this in ES5:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> winnersName = contenders[<span class="hljs-number">0</span>].name;
</code></pre>
</div></section><section class="slide" data-pos="11-2-4">
<span class="pos">11-2-4</span>
<div class="slidecontent"><p>With <strong>destructuring</strong>, we can instead do this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> [{<span class="hljs-attr">name</span>: winnersName}] = contenders;
</code></pre>
<p>Or, combined with the <strong>same-key-value shorthand</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> [{name}] = contenders;
</code></pre>
</div></section><section class="slide" data-pos="11-2-5">
<span class="pos">11-2-5</span>
<div class="slidecontent"><p>Destructuring also allows us to use the powerful <strong>rest</strong> element which can <strong>lump up many array elements into one</strong>, making for some very succinct code:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> [winner, ...losers] = contenders;
</code></pre>
</div></section><section class="slide" data-pos="11-2-6">
<span class="pos">11-2-6</span>
<div class="slidecontent"><p>Note that the rest element <strong>has to be the last one in the array</strong>, so this wouldn&#39;t work:</p>
<pre><code><span class="hljs-keyword">let</span> [...others, superloser] = contenders; <span class="hljs-comment">// syntax error</span>
</code></pre></div></section><section class="slide question" data-pos="11-2-7">
<span class="pos">11-2-7</span>
<div class="slidecontent">
<p>Wait.. Theoretically, <strong>the rest could be placed <em>anywhere</em></strong>, as long as there&#39;s just one. The parser should still be able to figure out what&#39;s what!</p>
<p>Right?</p>
</div></section><section class="slide answer" data-pos="11-2-8">
<span class="pos">11-2-8</span>
<div class="slidecontent">
<p>True. But that would <strong>require lookahead</strong>, which is <strong>complex and more taxing</strong>. And so the choice was made to only allow the rest element in the last position.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-3.</span> Versatile function definitions</h3>
      <p>defining function like a boss</p>
</p>
    </div>
  </section>
  <section class="slide list" data-pos="11-3-1">
<span class="pos">11-3-1</span>
<div class="slidecontent">
<p>ES2015 provides <strong>several neat features for defining functions</strong>:</p>
<ul>
<li><span>a</span>default parameter values</li>
<li><span>b</span>rest parameters</li>
<li><span>c</span>destructuring parameters</li>
<li><span>d</span>arrow functions</li>
</ul>
</div></section><section class="slide num numA" data-pos="11-3-2">
<span class="pos">11-3-2</span>
<div class="slidecontent">
<p><strong>Default parameter values</strong> exist in many languages, and was popularised in JS through <a href="">CoffeeScript</a>.</p>
<p>The idea is to <strong>handle optional parameters</strong> in a smoother way.</p>
</div></section><section class="slide" data-pos="11-3-3">
<span class="pos">11-3-3</span>
<div class="slidecontent"><p>Creating a <strong>function with an optional parameter</strong> in ES3 meant we had to do a sometimes tedious dance of initialization:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makePerson</span>(<span class="hljs-params">name, age</span>) </span>{
  <span class="hljs-keyword">var</span> age = age || <span class="hljs-string">'unknown'</span>;
  <span class="hljs-comment">// do complex stuff</span>
}
</code></pre>
</div></section><section class="slide" data-pos="11-3-4">
<span class="pos">11-3-4</span>
<div class="slidecontent"><p>With <strong>default parameter values</strong> we can instead do this: </p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makePerson</span>(<span class="hljs-params">name, age = <span class="hljs-string">'unknown'</span></span>) </span>{
  <span class="hljs-comment">// do complex stuff</span>
}
</code></pre>
</div></section><section class="slide num numB" data-pos="11-3-5">
<span class="pos">11-3-5</span>
<div class="slidecontent">
<p>The second new feature, <strong>rest parameters</strong>, is a way of capturing multiple arguments into a single variable like a rest element in a destructuring.</p>
<p>This can often save us from having to do awkward stuff with the not-quite-an-array <code>arguments</code> object.</p>
</div></section><section class="slide" data-pos="11-3-6">
<span class="pos">11-3-6</span>
<div class="slidecontent"><p>Imagine a <code>competition</code> function that is called with all contenders one by one:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">competition</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> contenders = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
  <span class="hljs-keyword">var</span> winner = contenders[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> losers = contenders.slice(<span class="hljs-number">1</span>);
  <span class="hljs-comment">// do something with winner and losers</span>
}
</code></pre>
</div></section><section class="slide" data-pos="11-3-7">
<span class="pos">11-3-7</span>
<div class="slidecontent"><p>Using rest parameters, this function simply becomes:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">competition</span>(<span class="hljs-params">winner, ...losers</span>) </span>{
  <span class="hljs-comment">// do something with winner and losers</span>
}
</code></pre>
</div></section><section class="slide" data-pos="11-3-8">
<span class="pos">11-3-8</span>
<div class="slidecontent"><p>Note that the rest parameter <strong>has to be the last parameter</strong>, just like the rest element, and for the same reason.</p>
</div></section><section class="slide num numC" data-pos="11-3-9">
<span class="pos">11-3-9</span>
<div class="slidecontent">
<p>Remember <strong>destructuring</strong>? We can <strong>use that in signatures</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">introduce</span>(<span class="hljs-params">{name, age}</span>) </span>{
  <span class="hljs-built_in">console</span>.log(name,<span class="hljs-string">"is"</span>,age,<span class="hljs-string">"years old"</span>);
}
<span class="hljs-keyword">var</span> me = {<span class="hljs-attr">name</span>: <span class="hljs-string">"David"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">37</span>};
introduce(me); <span class="hljs-comment">// David is 37 years old</span>
</code></pre>
</div></section><section class="slide num numD" data-pos="11-3-10">
<span class="pos">11-3-10</span>
<div class="slidecontent">
<p>Finally - know how <strong>defining anonymous functions</strong> in JS is rather verbose?</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> mcboatify = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Boaty Mc"</span>+arg+<span class="hljs-string">"Face"</span>;
};
</code></pre>
</div></section><section class="slide" data-pos="11-3-11">
<span class="pos">11-3-11</span>
<div class="slidecontent"><p>With <strong>arrow functions</strong> things feel less heavy:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> mcboatify = <span class="hljs-function">(<span class="hljs-params">arg</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Boaty Mc"</span> + arg + <span class="hljs-string">"Face"</span>;
};
</code></pre>
</div></section><section class="slide" data-pos="11-3-12">
<span class="pos">11-3-12</span>
<div class="slidecontent"><p>They can become smaller still - if we have <strong>exactly one parameter</strong>, we can <strong>omit the parenthesis</strong> in the signature:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> mcboatify = <span class="hljs-function"><span class="hljs-params">arg</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Boaty Mc"</span> + arg + <span class="hljs-string">"Face"</span>;
};
</code></pre>
</div></section><section class="slide" data-pos="11-3-13">
<span class="pos">11-3-13</span>
<div class="slidecontent"><p>Finally, if you <strong>just want to return an expression</strong>, we can <strong>skip brackets and the return keyword</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> mcboatify = <span class="hljs-function"><span class="hljs-params">arg</span> =&gt;</span> <span class="hljs-string">"Boaty Mc"</span> + arg + <span class="hljs-string">"Face"</span>;
</code></pre>
<p>Now the function body consists of a single expression, which will be implicitly returned.</p>
</div></section><section class="slide" data-pos="11-3-14">
<span class="pos">11-3-14</span>
<div class="slidecontent"><p>Note however that if you want to use the <strong>single expression form with an object literal</strong>, we have to <strong>wrap it in parenthesis</strong> to distinguish it from a regular function block:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> createUser = <span class="hljs-function">(<span class="hljs-params">name,age</span>)=&gt;</span> ({name,age})
</code></pre>
</div></section><section class="slide" data-pos="11-3-15">
<span class="pos">11-3-15</span>
<div class="slidecontent"><p>Arrow functions are not only less heavy to write, they are also lighter for the interpreter since they <strong>don&#39;t get an implicit context parameter</strong>.</p>
</div></section><section class="slide" data-pos="11-3-16">
<span class="pos">11-3-16</span>
<div class="slidecontent"><p>Which means that if you refer to <code>this</code> inside an arrow function, it is the <strong>same <code>this</code> as on the outside</strong>.</p>
<pre><code><span class="hljs-keyword">var</span> me = <span class="hljs-keyword">this</span>;
setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span> === me); <span class="hljs-comment">// true</span>
}, <span class="hljs-number">10</span>);
setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span> === me); <span class="hljs-comment">// false</span>
}, <span class="hljs-number">10</span>);
</code></pre></div></section><section class="slide" data-pos="11-3-17">
<span class="pos">11-3-17</span>
<div class="slidecontent"><p>As a final note; arrow functions can beautifully describe the flow for <strong>nested higher order callbacks</strong>. Take this convoluted old code:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiplier</span>(<span class="hljs-params">func,times</span>)</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; times; i = i + <span class="hljs-number">1</span>){
      func();
    }
  };
}
</code></pre>
</div></section><section class="slide" data-pos="11-3-18">
<span class="pos">11-3-18</span>
<div class="slidecontent"><p>With arrow functions, that becomes:</p>
<pre><code><span class="hljs-keyword">var</span> multiplier = (<span class="hljs-function"><span class="hljs-keyword">func</span>,<span class="hljs-title">times</span>)=&gt; <span class="hljs-params">()</span></span>=&gt; {
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; times; i = i + <span class="hljs-number">1</span>){
    <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>;
  }
}
</code></pre></div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-4.</span> Spreads</h3>
      <p>the dark side of rests</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="11-4-1">
<span class="pos">11-4-1</span>
<div class="slidecontent"><p>You have already seen how we use <strong>rest</strong> element/parameter to capture several array elements into a single variable:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> [winner, ...losers] = competitors;
</code></pre>
</div></section><section class="slide" data-pos="11-4-2">
<span class="pos">11-4-2</span>
<div class="slidecontent"><p>Now imagine <strong>the opposite scenario</strong> - we have the <code>winner</code> and <code>losers</code> variables, and want to define <code>competitors</code>. In ES3 this is done like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> competitors = [winner].concat(losers);
</code></pre>
</div></section><section class="slide" data-pos="11-4-3">
<span class="pos">11-4-3</span>
<div class="slidecontent"><p>ES2015 gives us a new options - <strong>spreads</strong>! It looks exactly like rest, but we use it on the <em>right side</em> instead (or when we <em>call</em> a function as opposed to when we define it):</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> competitors = [winner, ...losers];
</code></pre>
<p>We say that we <em>spread</em> the contents of the expression into the outer array.</p>
</div></section><section class="slide" data-pos="11-4-4">
<span class="pos">11-4-4</span>
<div class="slidecontent"><p>Spreads gives us a less verbose way to <strong>copy an object and add properties to it</strong>, which is otherwise done like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> augmentedObj = <span class="hljs-built_in">Object</span>.assign({}, oldObj, newProps);
</code></pre>
</div></section><section class="slide" data-pos="11-4-5">
<span class="pos">11-4-5</span>
<div class="slidecontent"><p>With spreads we can instead do this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> augmentedObj = {...oldObj, ...newProps};
</code></pre>
</div></section><section class="slide" data-pos="11-4-6">
<span class="pos">11-4-6</span>
<div class="slidecontent"><p>Note that while spreads and rests <em>with arrays</em> are in the spec for ES2015, <strong>object spread is still a Stage 3 proposal</strong> (November 2017).</p>
<p>It is <strong>expected to be accepted into an upcoming release</strong> of the language, and is already supported by Babel and the like.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-5.</span> Modules</h3>
      <p>getting into the import/export business</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="11-5-1">
<span class="pos">11-5-1</span>
<div class="slidecontent"><p><strong>Node gave us modules</strong> through the <code>require</code> and <code>module.exports</code> globals it provides.</p>
<p>But with ES2015, we got <strong>native modules</strong> for the very first time!</p>
</div></section><section class="slide" data-pos="11-5-2">
<span class="pos">11-5-2</span>
<div class="slidecontent"><p>While <strong>Node modules</strong> followed the <strong>CommonJS module standard</strong>, what was implemented in the language follows <strong>another syntax</strong>, named <strong>ES modules</strong>.</p>
<p>But the <strong>concepts are the same</strong>. While you would do this in <strong>CommonJS</strong>...</p>
<pre><code>// file1.js
module.exports = <span class="hljs-meta">{..}</span>;

//file2.js
<span class="hljs-keyword">var</span> lib = require(<span class="hljs-string">"./file1.js"</span>);
</code></pre></div></section><section class="slide" data-pos="11-5-3">
<span class="pos">11-5-3</span>
<div class="slidecontent"><p>...you would do this with <strong>ES modules</strong>:</p>
<pre><code>// file1.js
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> lib = <span class="hljs-meta">{..}</span>;

//file2.js
<span class="hljs-keyword">import</span> lib <span class="hljs-keyword">from</span> './file1.js'
</code></pre><p>We have to <strong>name our exports</strong> here, otherwise things are <strong>pretty similar</strong>.</p>
</div></section><section class="slide" data-pos="11-5-4">
<span class="pos">11-5-4</span>
<div class="slidecontent"><p>There are <strong>other differences too</strong>, so for the full scope you should <strong>check the MDN docs</strong> for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">import</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export">export</a></p>
</div></section><section class="slide" data-pos="11-5-5">
<span class="pos">11-5-5</span>
<div class="slidecontent"><p>Note that even though this is now <strong>part of the language</strong>, there are <strong>no browsers that implement the functionality yet</strong>.</p>
<p>This is mainly because it <strong>wouldn&#39;t be practical</strong> - we&#39;d get a <strong>gazillion http requests for small files</strong>.</p>
</div></section><section class="slide" data-pos="11-5-6">
<span class="pos">11-5-6</span>
<div class="slidecontent"><p>And since we <strong>likely have a build step anyway</strong> to do minification and transpiling and similar, you can easily <strong>bundle your code into a single file</strong>, too.</p>
<p>But, with the advent of HTTP2, <strong>who knows what the future will hold</strong>!</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-6.</span> Classes</h3>
      <p>Waiter, there are classes in my JS!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="11-6-1">
<span class="pos">11-6-1</span>
<div class="slidecontent"><p>Before ES2015, JavaScript used to famously <strong>lack classes</strong>.</p>
<p>This was <strong>not an oversight</strong>. Consider what <strong>classes are normally used for</strong>:</p>
<ul>
<li><strong>resusing functionality</strong> and </li>
<li>setting up <strong>hierarchies</strong></li>
</ul>
</div></section><section class="slide" data-pos="11-6-2">
<span class="pos">11-6-2</span>
<div class="slidecontent"><p>In <strong>JavaScript</strong> this is addressed by</p>
<ul>
<li>simply <strong>grabbing methods</strong> and/or <strong>mixing objects</strong></li>
<li><strong>prototypal &quot;inheritance&quot;</strong>, which should really be called delegation</li>
</ul>
</div></section><section class="slide" data-pos="11-6-3">
<span class="pos">11-6-3</span>
<div class="slidecontent"><p>This means that <strong>classes didn&#39;t really serve a purpose</strong>. Yet they were <strong>still frequently used</strong>, through the weird, bolted-on <strong><code>new</code></strong> syntax which <strong>makes functions behave like constructors</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">"David"</span>, <span class="hljs-number">1979</span>);
</code></pre>
</div></section><section class="slide" data-pos="11-6-4">
<span class="pos">11-6-4</span>
<div class="slidecontent"><p>But to really make this <strong>behave like normal classes</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> lucas = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">"Lucas"</span>);
lucas instanceOf Dog; <span class="hljs-comment">// true</span>
lucas instanceOf Animal; <span class="hljs-comment">// true</span>
lucas.bark(); <span class="hljs-comment">// Lucas goes woof!</span>
</code></pre>
</div></section><section class="slide" data-pos="11-6-5">
<span class="pos">11-6-5</span>
<div class="slidecontent"><p>...then lots of <strong>jumping through hoops</strong> had to be done:</p>
<pre><code class="lang-javascript">Dog.prototype = <span class="hljs-keyword">new</span> Animal();
Dog.prototype.constructor = Animal;
Dog.prototype.bark = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name, <span class="hljs-string">"goes woof!"</span>);
}
</code></pre>
</div></section><section class="slide" data-pos="11-6-6">
<span class="pos">11-6-6</span>
<div class="slidecontent"><p>To <strong>facilitate &quot;class&quot; use</strong> in JavaScript, <strong>ES2015 introduced the <code>class</code></strong> syntax:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
  bark() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name, <span class="hljs-string">"goes woof!"</span>);
  }
}
</code></pre>
<p>Note how <strong>method shorthands</strong> are available in class declarations too!</p>
</div></section><section class="slide" data-pos="11-6-7">
<span class="pos">11-6-7</span>
<div class="slidecontent"><p>But it is important to note that this does <strong>not mean that JavaScript has actual classes</strong>.</p>
<p>Under the hood the same weird <code>prototype</code> and <code>constructor</code> dance happens.</p>
</div></section><section class="slide list" data-pos="11-6-8">
<span class="pos">11-6-8</span>
<div class="slidecontent">
<p>Still, since the <strong>syntax hides the mismatch</strong>, it can be a <strong>convenient way to package functionality</strong>. Specifically:</p>
<ul>
<li><span>a</span>constructor</li>
<li><span>b</span>methods</li>
<li><span>c</span>properties</li>
</ul>
</div></section><section class="slide num numA" data-pos="11-6-9">
<span class="pos">11-6-9</span>
<div class="slidecontent">
<p>First off, what <strong>used to go in the fake constructor</strong>...</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Animal</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">this</span>.name = name;
}
</code></pre>
</div></section><section class="slide" data-pos="11-6-10">
<span class="pos">11-6-10</span>
<div class="slidecontent"><p>...is now placed in a literal <strong><code>constructor</code> method</strong> in the class declaration:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
  <span class="hljs-keyword">constructor</span>(name) {
    <span class="hljs-keyword">this</span>.name = name;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="11-6-11">
<span class="pos">11-6-11</span>
<div class="slidecontent"><p>If you want <strong>the inherited constructor to be invoked too</strong>, you must <strong>do so yourself</strong> with the new <strong><code>super</code> keyword</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
  <span class="hljs-keyword">constructor</span>(name) {
    <span class="hljs-keyword">super</span>(name);
    <span class="hljs-keyword">this</span>.nickname = name + <span class="hljs-string">'y boy'</span>;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="11-6-12">
<span class="pos">11-6-12</span>
<div class="slidecontent"><p>Since <strong>React components inherit from <code>React.Component</code></strong>, that means that if we have a constructor in our components we <strong>must always call <code>super</code></strong>.</p>
</div></section><section class="slide num numB" data-pos="11-6-13">
<span class="pos">11-6-13</span>
<div class="slidecontent">
<p>And you&#39;ve <strong>already seen methods</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
  <span class="hljs-keyword">constructor</span>() { ... }
  bark() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name,<span class="hljs-string">"goes woof!"</span>);
  }
}
</code></pre>
<p>Similar to object methods, <strong><code>this</code></strong> (normally) <strong>points to the instance</strong>.</p>
</div></section><section class="slide num numC" data-pos="11-6-14">
<span class="pos">11-6-14</span>
<div class="slidecontent">
<p>Finally, as you saw, <strong>properties are normally initialised in the constructor</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
  <span class="hljs-keyword">constructor</span>(name) {
    <span class="hljs-keyword">this</span>.name = name;
  }
}
</code></pre>
</div></section><section class="slide" data-pos="11-6-15">
<span class="pos">11-6-15</span>
<div class="slidecontent"><p>...but when we use <strong>TypeScript</strong> - more on that soon - we can also <strong>initialise properties directly on the class declaration</strong>:</p>
<pre><code class="lang-typescript"><span class="hljs-keyword">class</span> Dog {
  numberOfLegs = <span class="hljs-number">4</span>;
}
</code></pre>
<p>This is <strong>likely to become a part of JavaScript syntax</strong> too.</p>
</div></section><section class="slide" data-pos="11-6-16">
<span class="pos">11-6-16</span>
<div class="slidecontent"><p>So, to <strong>recap</strong>:</p>
<ul>
<li>classes are just a <strong>light syntactic sugar</strong> introduced in ES2015</li>
<li>we normally <strong>don&#39;t need them in JavaScript</strong></li>
<li>but they are a <strong>convenient way to bundle related functionality</strong></li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-7.</span> Decorators</h3>
      <p>dewhatnow?</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="11-7-1">
<span class="pos">11-7-1</span>
<div class="slidecontent"><p>The <strong>situation around decorators is rather confusing</strong>;</p>
<ul>
<li>There is a <a href="http://tc39.github.io/proposal-decorators/">proposal</a> to add it as a language feature</li>
<li>There is a slightly different <a href="https://www.typescriptlang.org/docs/handbook/decorators.html">implementation in TypeScript</a></li>
<li>There is the parallel idea in <strong><code>Reflect</code></strong></li>
<li>There is <a href="https://github.com/wycats/javascript-decorators/issues/48">disagreement</a> on whether decorators are a good idea at all</li>
<li>There is (was?) something called <a href="http://blog.thoughtram.io/angular/2015/05/03/the-difference-between-annotations-and-decorators.html">annotations</a> that is sort of the same... yet not</li>
</ul>
</div></section><section class="slide" data-pos="11-7-2">
<span class="pos">11-7-2</span>
<div class="slidecontent"><p>Focusing on the <strong>TypeScript implementation</strong> which is the most common, decorators are a way of decorating a class...</p>
<ul>
<li><strong>declaration</strong></li>
<li><strong>property</strong></li>
<li><strong>getter</strong> or <strong>setter</strong></li>
<li><strong>method</strong></li>
<li><strong>method parameter</strong></li>
</ul>
</div></section><section class="slide" data-pos="11-7-3">
<span class="pos">11-7-3</span>
<div class="slidecontent"><p>As a simple example, imagine that we have a <strong><code>debounce</code> function</strong> that <strong>throttles other functions</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">fn</span>) </span>{
  <span class="hljs-comment">// ... create a throttled version of `fn`...</span>
  <span class="hljs-keyword">return</span> throttledFn;
}
</code></pre>
</div></section><section class="slide" data-pos="11-7-4">
<span class="pos">11-7-4</span>
<div class="slidecontent"><p>And then we have a class with a <strong>method that is very expensive</strong> to call:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myClass</span> </span>{
  myExpensiveMethod: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// lots of heavy lifting here</span>
  }
}
</code></pre>
</div></section><section class="slide" data-pos="11-7-5">
<span class="pos">11-7-5</span>
<div class="slidecontent"><p><strong>Without decorators</strong> we would do this:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myClass</span> </span>{
  myExpensiveMethod: debounce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// lots of heavy lifting here</span>
  })
}
</code></pre>
</div></section><section class="slide" data-pos="11-7-6">
<span class="pos">11-7-6</span>
<div class="slidecontent"><p><strong>With decorators</strong>, instead, we use the <code>@</code> syntax:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myClass</span> </span>{
  @debounce
  myExpensiveMethod: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// lots of heavy lifting here</span>
  }
}
</code></pre>
<p>The <strong>end result is the same thing</strong>.</p>
</div></section><section class="slide" data-pos="11-7-7">
<span class="pos">11-7-7</span>
<div class="slidecontent"><p>We can also have <strong>decorators that take additional arguments</strong>. For instance <code>debounce</code> could accept a <strong>minimum number of milliseconds</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myClass</span> </span>{
  @debounce(<span class="hljs-number">300</span>)
  myExpensiveMethod: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// lots of heavy lifting here</span>
  }
}
</code></pre>
<p>In other words, <strong>decorators are just a light syntax sugar</strong>.</p>
</div></section><section class="slide" data-pos="11-7-8">
<span class="pos">11-7-8</span>
<div class="slidecontent"><p>If you want to <strong>dig deeper into decorators</strong>, check out...</p>
<ul>
<li>The <a href="https://www.typescriptlang.org/docs/handbook/decorators.html">decorator section</a> of the TypeScript handbook</li>
<li>This <a href="https://github.com/arolson101/typescript-decorators">concice and clear explanation</a> with examples and interactive links</li>
</ul>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-8.</span> Miscellaneous</h3>
      <p>odds and ends</p>
</p>
    </div>
  </section>
  <section class="slide list" data-pos="11-8-1">
<span class="pos">11-8-1</span>
<div class="slidecontent">
<p>There&#39;s three more things worth mentioning:</p>
<ul>
<li><span>a</span>declaring variables with <strong><code>let</code></strong></li>
<li><span>b</span>declaring variables with <strong><code>const</code></strong></li>
<li><span>c</span><strong>template strings</strong></li>
</ul>
</div></section><section class="slide num numA" data-pos="11-8-2">
<span class="pos">11-8-2</span>
<div class="slidecontent">
<p>Variables in JavaScript have <strong>functional scope</strong>.</p>
<p>Even if you declare them inside an <strong>if-block in the middle of a function</strong>, the variable is still <strong>visible throughout the entire function</strong>.</p>
</div></section><section class="slide" data-pos="11-8-3">
<span class="pos">11-8-3</span>
<div class="slidecontent"><p>So when you write this...</p>
<pre><code>function myFunc(arg,<span class="hljs-class"><span class="hljs-keyword">lib</span>){</span>
  <span class="hljs-keyword">if</span> (arg === <span class="hljs-number">42</span>){
    var ret = <span class="hljs-class"><span class="hljs-keyword">lib</span>.<span class="hljs-title">method</span>() + 7;</span>
    <span class="hljs-keyword">return</span> ret;
  }
  /<span class="hljs-regexp">/ do sth else
}</span>
</code></pre></div></section><section class="slide" data-pos="11-8-4">
<span class="pos">11-8-4</span>
<div class="slidecontent"><p>...this is what (conceptually) happens:</p>
<pre><code>function myFunc(arg,<span class="hljs-class"><span class="hljs-keyword">lib</span>){</span>
  var ret;
  <span class="hljs-keyword">if</span> (arg === <span class="hljs-number">42</span>){
    ret = <span class="hljs-class"><span class="hljs-keyword">lib</span>.<span class="hljs-title">method</span>() + 7;</span>
    <span class="hljs-keyword">return</span> ret;
  }
  /<span class="hljs-regexp">/ do sth else
}</span>
</code></pre><p>In other words, the <strong>declaration is hoisted to the top</strong>.</p>
</div></section><section class="slide" data-pos="11-8-5">
<span class="pos">11-8-5</span>
<div class="slidecontent"><p>This is generally considered a <strong>design mistake</strong>, and can give rise to <strong>weird bugs</strong>.</p>
<p>ES6 therefore introduces <strong><code>let</code> as an alternative to <code>var</code></strong> for declaring variables, and the <strong>only difference</strong> is that <strong><code>let</code> has block scope</strong>.</p>
</div></section><section class="slide num numB" data-pos="11-8-6">
<span class="pos">11-8-6</span>
<div class="slidecontent">
<p>In most languages there&#39;s a way to <strong>define constants</strong>, meaning a <strong>variable that cannot change</strong>.</p>
<p>This is <strong>missing from JavaScript</strong>.</p>
</div></section><section class="slide" data-pos="11-8-7">
<span class="pos">11-8-7</span>
<div class="slidecontent"><p>A common &quot;hack&quot; is to <strong>name constants in all capitals</strong>:</p>
<pre><code>var SOME_CONST = <span class="hljs-number">42</span><span class="hljs-comment">;</span>
</code></pre><p>But this has <strong>no technical significance</strong>, it is just a hint.</p>
</div></section><section class="slide" data-pos="11-8-8">
<span class="pos">11-8-8</span>
<div class="slidecontent"><p>ES6 therefore introduces <strong><code>const</code> as another alternative to <code>var</code></strong>, and the <strong>only difference</strong> is that you <strong>cannot reassign the value</strong>.</p>
<pre><code>const answer = <span class="hljs-number">42</span><span class="hljs-comment">;</span>
<span class="hljs-attribute">answer</span> = <span class="hljs-number">43</span><span class="hljs-comment">; // throws an error</span>
</code></pre></div></section><section class="slide num numC" data-pos="11-8-9">
<span class="pos">11-8-9</span>
<div class="slidecontent">
<p>Finally, <strong>template strings</strong>!</p>
<pre><code><span class="hljs-keyword">let</span> userTempl = <span class="hljs-string">`
  First name: <span class="hljs-subst">${user.fname}</span>
  Last name: <span class="hljs-subst">${user.lname}</span>
`</span>;
</code></pre></div></section><section class="slide" data-pos="11-8-10">
<span class="pos">11-8-10</span>
<div class="slidecontent"><p>As you saw, template strings...</p>
<ul>
<li>are <strong>defined inside two backticks</strong></li>
<li>can <strong>contain linebreaks</strong></li>
<li>allow <strong>interpolation inside ${}</strong></li>
</ul>
</div></section><section class="slide" data-pos="11-8-11">
<span class="pos">11-8-11</span>
<div class="slidecontent"><p>There&#39;s also a <strong>semi-secret way to invoke functions with templates</strong>. Here&#39;s an example from <a href="https://github.com/yoshuawuyts/choo">Choo</a>:</p>
<pre><code><span class="xml">html`
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>
    Count: $</span><span class="hljs-template-variable">{state.counter.count}</span><span class="xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">$</span></span></span><span class="hljs-template-variable">{() =&gt; send('counter:increment')}</span><span class="xml"><span class="hljs-tag">&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>`</span>
</code></pre><p>The <strong><code>html</code> function is invoked</strong> with the templates and interpolated values.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>11-9.</span> Exercise - trying it out</h3>
      <p>Toe into the water</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="11-9-1">
<span class="pos">11-9-1</span>
<div class="slidecontent"><p>As a <strong>light-weight exercise</strong>, let&#39;s <strong>try some of the ES6 stuff out</strong>!</p>
</div></section><section class="slide list" data-pos="11-9-2">
<span class="pos">11-9-2</span>
<div class="slidecontent">
<p>We&#39;ll do this in <strong>two different parts</strong>:</p>
<ul>
<li><span>a</span>writing and <strong>running ES6 code</strong></li>
<li><span>b</span>checking <strong>how it translates to ES5</strong></li>
</ul>
</div></section><section class="slide num numA" data-pos="11-9-3">
<span class="pos">11-9-3</span>
<div class="slidecontent">
<p>An easy way to <strong>run ES6 code</strong> is by using <a href="http://es6fiddle.net/">es6fiddle.net</a>. Write <strong>ES6 code in the left column</strong>, and see the <strong>output to the right</strong>.</p>
<p><img src="resources/images/es6fiddle.png" alt=""></p>
</div></section><section class="slide" data-pos="11-9-4">
<span class="pos">11-9-4</span>
<div class="slidecontent"><p>Through a dropdown you can access a number of <strong>ready-made examples</strong> which are a good starting point for experimenting.</p>
</div></section><section class="slide num numB" data-pos="11-9-5">
<span class="pos">11-9-5</span>
<div class="slidecontent">
<p>To see the <strong>ES5 equivalent</strong>, we&#39;ll use <a href="https://babeljs.io/repl">babeljs.io/repl</a>. The right column here shows <strong>ES5 translation instead of output</strong>.</p>
<p><img src="resources/images/babelrepl.png" alt=""></p>
</div></section><section class="slide" data-pos="11-9-6">
<span class="pos">11-9-6</span>
<div class="slidecontent"><p>A good way to get started is to <strong>copy the ES6fiddle examples</strong> and <strong>see what they translate to</strong>!</p>
</div></section>
</section>

  </div>
  
</div>
<div class="chaptercontainer">
  <div class="chapterstart">
    <span>chapter 12 / 12</span>
    <h2>Appendix - Graveyard</h2>
    <p>Where old syntax goes to die</p>
</p>
  </div>
  <section class="slide">

<div class="slidecontent"><p>In this appendix chapter you&#39;ll find some React syntaxes that have been <strong>deprecated</strong>, for one reason or another.</p>
</div></section>
  <div class="chaptersectionlist">
  <h3>Sections in this chapter:</h3>
  <ul>
    <li>1. createClass syntax</li>
<li>2. Declaring props</li>
<li>3. Mixins</li>
  </ul>
</div>

  <div class="chaptersections">
    <section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>12-1.</span> createClass syntax</h3>
      <p>Pass-down garments</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="12-1-1">
<span class="pos">12-1-1</span>
<div class="slidecontent"><p>Remember how we first showed you the <strong>plain function</strong> syntax for defining components...</p>
<pre><code class="lang-javascript">let User = props =&gt; &lt;div&gt;Name: {props.name}&lt;/div&gt;;

User.propTypes = {
  name: React.PropTypes.string.isRequired
};
</code></pre>
</div></section><section class="slide" data-pos="12-1-2">
<span class="pos">12-1-2</span>
<div class="slidecontent"><p>...and then admitted that there are in fact <strong>two definition syntaxes</strong>?</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
  <span class="hljs-keyword">static</span> get propTypes(){
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">name</span>: React.PropTypes.string.isRequired
    }
  }
}
</code></pre>
</div></section><section class="slide" data-pos="12-1-3">
<span class="pos">12-1-3</span>
<div class="slidecontent"><p>We lied again - there are <strong>three syntaxes</strong>. We can also use the <code>createClass</code> constructor:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> User = React.createClass({
  <span class="hljs-attr">propTypes</span>: { <span class="hljs-attr">name</span>: React.PropTypes.string.isRequired },
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
});
</code></pre>
<p>This <strong>was used for non-PFC:s before ES6 introduced classes</strong> and made the class syntax possible.</p>
</div></section><section class="slide" data-pos="12-1-4">
<span class="pos">12-1-4</span>
<div class="slidecontent"><p>It is <strong>pretty similar</strong> to real classes, with <strong>a few differences</strong>:</p>
<ul>
<li>There&#39;s no constructor, so we <strong>provide starting state from a <code>getInitialState</code> method</strong></li>
<li>Methods are <strong>autobound to the instance</strong>. Convenient but can have performance impact</li>
<li>Some <strong>inconsistencies with static stuff</strong></li>
</ul>
<p>See them in the <a href="resources/site/demos/createclass/index.html" target="_blank">createClass</a> demo</p>
</div></section><section class="slide" data-pos="12-1-5">
<span class="pos">12-1-5</span>
<div class="slidecontent"><p>As alluded to earlier; this syntax was <strong>used before classes were available</strong>.</p>
<p>For a long time <strong>both approaches existed side by side</strong>, but <code>React.createClass</code> <a href="https://github.com/facebook/react/pull/9232" class="link" target="_blank">was removed from React</a> and put into a separate module.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>12-2.</span> Declaring props</h3>
      <p>Dear santa, I want...</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="12-2-1">
<span class="pos">12-2-1</span>
<div class="slidecontent"><p>React provides components with a way to <strong>declare what props they expect</strong>. This serves two purposes:</p>
<ul>
<li>To <strong>safeguard</strong> against faulty use (in dev mode) by <strong>throwing an error</strong> (or give a warning depending on settings) if something is missing or of the wrong type</li>
<li>To <strong>document</strong> how the component is supposed to be used</li>
</ul>
</div></section><section class="slide" data-pos="12-2-2">
<span class="pos">12-2-2</span>
<div class="slidecontent"><p>This declaration, called <strong><code>propTypes</code></strong>, is an <strong>object</strong> with constants describing the needed props:</p>
<pre><code class="lang-javascript">{
  <span class="hljs-attr">name</span>: React.PropTypes.string.isRequired,
  <span class="hljs-attr">role</span>: React.PropTypes.oneOf([<span class="hljs-string">'admin'</span>,<span class="hljs-string">'contributor'</span>,<span class="hljs-string">'user'</span>])
}
</code></pre>
<p>See the <strong>full documentation</strong> of this powerful API here: <a href="https://facebook.github.io/react/docs/reusable-components.html#prop-validation" class="link" target="_blank">Proptypes</a></p>
</div></section><section class="slide list" data-pos="12-2-3">
<span class="pos">12-2-3</span>
<div class="slidecontent">
<p>These declarations are then added as a <strong>static property</strong> to the class. There are <strong>three different syntaxes</strong> for doing that:</p>
<ul>
<li><span>a</span>as a prop on the class itself</li>
<li><span>b</span>as a static getter</li>
<li><span>c</span>as a static prop (experimental syntax)</li>
</ul>
</div></section><section class="slide num numA" data-pos="12-2-4">
<span class="pos">12-2-4</span>
<div class="slidecontent">
<p>We can <strong>add the declaration directly onto the class</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}
User.propTypes = {
  <span class="hljs-attr">name</span>: React.PropTypes.string.isRequired
}
</code></pre>
<p>This <strong>also works for PFC:s</strong> (pure function components).</p>
</div></section><section class="slide num numB" data-pos="12-2-5">
<span class="pos">12-2-5</span>
<div class="slidecontent">
<p>Alternatively we can return it from a <strong>class method</strong> if we use <strong><code>static</code> and <code>get</code></strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
  <span class="hljs-keyword">static</span> get propTypes(){
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">name</span>: React.PropTypes.string.isRequired
    }
  }
}
</code></pre>
</div></section><section class="slide num numC" data-pos="12-2-6">
<span class="pos">12-2-6</span>
<div class="slidecontent">
<p>There is also a <a href="https://github.com/tc39/proposal-class-public-fields" class="link" target="_blank">proposal</a> to allow declaring <strong>static props</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Name: {this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
  <span class="hljs-keyword">static</span> propTypes = {
    <span class="hljs-attr">name</span>: React.PropTypes.string.isRequired
  }
}
</code></pre>
<p>To use this we need a <a href="https://www.npmjs.com/package/babel-plugin-transform-class-properties" class="link" target="_blank">babel plugin</a> (or Typescript).</p>
</div></section><section class="slide" data-pos="12-2-7">
<span class="pos">12-2-7</span>
<div class="slidecontent"><p>We can also provide a <strong><code>defaultProps</code></strong> object where the <strong>keys are prop names</strong> and the <strong>values are defaults</strong>:</p>
<pre><code class="lang-javascript">{
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Anonymous'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-string">'Unknown'</span>
}
</code></pre>
<p>The <code>defaultProps</code> is <strong>attached as a static prop</strong> exactly like <code>propTypes</code>.</p>
</div></section><section class="slide" data-pos="12-2-8">
<span class="pos">12-2-8</span>
<div class="slidecontent"><p><strong>Try this all out</strong> in the <a href="resources/site/demos/proptypes/index.html" target="_blank">Proptypes</a> demo.</p>
</div></section><section class="slide" data-pos="12-2-9">
<span class="pos">12-2-9</span>
<div class="slidecontent"><p>A final word; the <code>PropTypes</code> API is somewhat <strong>falling out of grace</strong>. It used to live inside <code>react</code>, but since v15.5 you have to get it from a <strong>separate module</strong>:</p>
<pre><code><span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">'prop-types'</span>;
</code></pre></div></section><section class="slide" data-pos="12-2-10">
<span class="pos">12-2-10</span>
<div class="slidecontent"><p>The reason is simple; <strong>static analysers with typechecking</strong> have grown in popularity, and if we&#39;re using such a solution, it makes more sense to <strong>declare our props using that</strong>.</p>
<p>Most common of these are <a href="https://flow.org/">Flow</a> and <a href="https://www.typescriptlang.org/">TypeScript</a>.</p>
</div></section>
</section>
<section class="chaptersection">
  <section class="sectionheader">
    <div>
      <h3><span>12-3.</span> Mixins</h3>
      <p>Mixing it up</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="12-3-1">
<span class="pos">12-3-1</span>
<div class="slidecontent"><p><strong>Mixins</strong> are <strong>objects</strong> with <strong>pre-made functionality</strong> that we can <strong>mix into components</strong>.</p>
<p>This API <strong>only works with the <code>React.createClass</code> syntax</strong>, and not with the newer class components!</p>
</div></section><section class="slide" data-pos="12-3-2">
<span class="pos">12-3-2</span>
<div class="slidecontent"><p>We use mixins by supplying them to the <strong><code>mixins</code> property</strong> in the <strong>component definition</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Component = React.createClass({
  <span class="hljs-attr">mixins</span>: [amixin, anothermixin, athirdmixin],
  <span class="hljs-comment">// rest of component follows</span>
});
</code></pre>
<p>Now <strong>all methods in the mixins</strong> will be <strong>available on instances of <code>Component</code></strong>.</p>
</div></section><section class="slide" data-pos="12-3-3">
<span class="pos">12-3-3</span>
<div class="slidecontent"><p>Let&#39;s make a <strong>ticker</strong> mixin which...</p>
<ul>
<li><strong>inits</strong> a <strong>state variable</strong> called <strong><code>tick</code></strong> to <strong>0</strong></li>
<li><strong>increases</strong> that variable <strong>every second</strong></li>
</ul>
</div></section><section class="slide" data-pos="12-3-4">
<span class="pos">12-3-4</span>
<div class="slidecontent"><p>Here&#39;s the <strong>code</strong> to accomplish this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> ticker = {
  getInitialState() { <span class="hljs-keyword">return</span> {<span class="hljs-attr">tick</span>:<span class="hljs-number">0</span>}; },
  tick() {
    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">tick</span>:<span class="hljs-keyword">this</span>.state.tick + <span class="hljs-number">1</span>});
  },
  componentDidMount() {
    <span class="hljs-keyword">this</span>._ticker = setInterval(<span class="hljs-keyword">this</span>.tick,<span class="hljs-number">1000</span>);
  },
  componentWillUnmount() {
    clearInterval(<span class="hljs-keyword">this</span>._ticker);
  }
};
</code></pre>
</div></section><section class="slide" data-pos="12-3-5">
<span class="pos">12-3-5</span>
<div class="slidecontent"><p>We can now easily make a <strong>Timer component</strong> by <strong>mixing in ticker</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Timer = React.createClass({
  <span class="hljs-attr">mixins</span>: [ticker],
  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      Seconds since start: {this.state.tick}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
});
</code></pre>
<p><strong>Try this out</strong> in the <a href="resources/site/demos/mixin/index.html" target="_blank">Mixin</a> demo.</p>
</div></section><section class="slide question" data-pos="12-3-6">
<span class="pos">12-3-6</span>
<div class="slidecontent">
<p>But, hang on - what is <strong>different</strong> from simply <strong>merging the objects ourselves</strong>?</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> Component = React.createClass(<span class="hljs-built_in">Object</span>.assign(
  {}, amixin, anothermixin, athirdmixin, {
  <span class="hljs-comment">// rest of component follows</span>
});
</code></pre>
</div></section><section class="slide answer" data-pos="12-3-7">
<span class="pos">12-3-7</span>
<div class="slidecontent">
<p>The React <strong>mixin API</strong> takes care of <strong>merging lifecycle methods</strong>.</p>
<p>Recall that <strong>ticker</strong> needed to use both <strong><code>getInitialState</code></strong> and <strong><code>componentDidMount</code></strong>, as well as <strong><code>componentWillUnmount</code></strong> for cleanup.</p>
<p>If our component used any of those and we <strong>merged the objects ourselves</strong>, there would be a <strong>clash</strong>!</p>
</div></section><section class="slide" data-pos="12-3-8">
<span class="pos">12-3-8</span>
<div class="slidecontent"><p>A <strong>powerful pattern</strong> that allows for <strong>customisable mixins</strong> is to use <strong>mixin factories</strong>.</p>
<p>While a <strong>regular mixin</strong> is an <strong>object</strong>, a <strong>mixin factory</strong> is a <strong>function</strong> that takes <strong>option parameters</strong> and <strong>returns</strong> a corresponding <strong>mixin object</strong>.</p>
<p><img src="resources/graphviz/react-mixin-factory.svg" alt="mixin factory"></p>
</div></section><section class="slide" data-pos="12-3-9">
<span class="pos">12-3-9</span>
<div class="slidecontent"><p>As an example, here&#39;s a <strong>version of <code>ticker</code></strong> that let&#39;s us  <strong>specify the interval</strong>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> MakeTicker = <span class="hljs-function">(<span class="hljs-params">interval</span>)=&gt;</span> ({
  getInitialState(){ <span class="hljs-keyword">return</span> {<span class="hljs-attr">tick</span>:<span class="hljs-number">0</span>}; },
  tick() {
    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">tick</span>:<span class="hljs-keyword">this</span>.state.tick + <span class="hljs-number">1</span>});
  },
  componentDidMount() {
    <span class="hljs-keyword">this</span>._ticker = setInterval(<span class="hljs-keyword">this</span>.tick,interval);
  },
  componentWillUnmount() {
    clearInterval(<span class="hljs-keyword">this</span>._ticker);
  }
});
</code></pre>
</div></section><section class="slide" data-pos="12-3-10">
<span class="pos">12-3-10</span>
<div class="slidecontent"><p>You can <strong>try</strong> the customisable ticker in the <a href="resources/site/demos/mixinfactory/index.html" target="_blank">Mixin Factory</a> demo.</p>
<p>Also, remember the <a href="resources/site/demos/lifecycle/index.html" target="_blank">Lifecycle</a> demo? We remade that as a <strong>more advanced mixin factory demo</strong> called <a href="resources/site/demos/mixinfactory2/index.html" target="_blank">Mixin&nbsp;Factory&nbsp;2</a>.</p>
</div></section><section class="slide" data-pos="12-3-11">
<span class="pos">12-3-11</span>
<div class="slidecontent"><p>It is <strong>rarely useful</strong> to <strong>make your own mixins</strong>. The <strong>most common use case</strong> is to have <strong>library-supplied mixins</strong> that <strong>act as an API bridge</strong> for the component.</p>
</div></section><section class="slide" data-pos="12-3-12">
<span class="pos">12-3-12</span>
<div class="slidecontent"><p>Dan Abramov makes the same point in <a href="https://facebook.github.io/react/blog/2016/07/13/mixins-considered-harmful.html" class="link">this official React blog post</a> where he <strong>adviced against mixin usage</strong>.</p>
</div></section>
</section>

  </div>
  
</div>

  </div>
  <div id="indexes">
    <div class="lookupindex linklist">
  <h2>External links</h2>
  <div class="lookuplist">
    <div><span>10-2-16</span><span>Context</span><a href="https://facebook.github.io/react/docs/context.html">https://facebook.github.io/react/docs/context.html</a></div><div><span>10-2-17</span><span>Context blog post</span><a href="https://medium.com/react-ecosystem/how-to-handle-react-context-a7592dfdcbc">https://medium.com/react-ecosystem/how-to-handle-react-context-a7592dfdcbc</a></div><div><span>10-4-1</span><span>Firebase</span><a href="https://firebase.google.com/">https://firebase.google.com/</a></div><div><span>10-5-1</span><span>Recompose</span><a href="https://facebook.github.io/react-native/">https://facebook.github.io/react-native/</a></div><div><span>10-6-3</span><span>ReactDOMServer</span><a href="https://facebook.github.io/react/docs/react-dom-server.html">https://facebook.github.io/react/docs/react-dom-server.html</a></div><div><span>10-6-4</span><span>NextJS</span><a href="https://zeit.co/blog/next">https://zeit.co/blog/next</a></div><div><span>10-6-4</span><span>good overview of NextJS</span><a href="https://www.youtube.com/watch?v=evaMpdSiZKk">https://www.youtube.com/watch?v=evaMpdSiZKk</a></div><div><span>10-7-3</span><span>PureComponent class to inherit from</span><a href="https://facebook.github.io/react/docs/react-api.html#react.purecomponent">https://facebook.github.io/react/docs/react-api.html#react.purecomponent</a></div><div><span>10-7-3</span><span>PureRender mixin</span><a href="https://facebook.github.io/react/docs/pure-render-mixin.html">https://facebook.github.io/react/docs/pure-render-mixin.html</a></div><div><span>10-7-4</span><span>ImmutableJS</span><a href="https://facebook.github.io/immutable-js/">https://facebook.github.io/immutable-js/</a></div><div><span>10-7-5</span><span>React-Perimeter library</span><a href="https://github.com/aweary/react-perimeter">https://github.com/aweary/react-perimeter</a></div><div><span>10-7-10</span><span>Lin Clark&#39;s talk</span><a href="https://www.youtube.com/watch?v=ZCuYPiUIONs&amp;t=6s">https://www.youtube.com/watch?v=ZCuYPiUIONs&amp;t=6s</a></div><div><span>10-7-11</span><span>React-Canvas</span><a href="https://github.com/Flipboard/react-canvas">https://github.com/Flipboard/react-canvas</a></div><div><span>10-8-2</span><span>D3 animation library</span><a href="https://d3js.org/">https://d3js.org/</a></div><div><span>10-8-3</span><span>React-faux-DOM</span><a href="https://github.com/Olical/react-faux-dom">https://github.com/Olical/react-faux-dom</a></div><div><span>1-1-2</span><span>krawaller</span><a href="http://twitter.com/krawaller">http://twitter.com/krawaller</a></div><div><span>1-4-11</span><span>create-react-app</span><a href="https://github.com/facebookincubator/create-react-app">https://github.com/facebookincubator/create-react-app</a></div><div><span>1-5-8</span><span>here</span><a href="https://tc39.github.io/process-document/">https://tc39.github.io/process-document/</a></div><div><span>1-5-9</span><span>Stage 0 list</span><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">https://github.com/tc39/proposals/blob/master/finished-proposals.md</a></div><div><span>1-5-9</span><span>Stage 1-3</span><a href="https://github.com/tc39/proposals">https://github.com/tc39/proposals</a></div><div><span>1-5-9</span><span>Stage 4</span><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">https://github.com/tc39/proposals/blob/master/finished-proposals.md</a></div><div><span>1-5-11</span><span>Exploring ES2016 and ES2017</span><a href="https://leanpub.com/exploring-es2016-es2017">https://leanpub.com/exploring-es2016-es2017</a></div><div><span>1-5-11</span><span>Exploring ES6</span><a href="https://leanpub.com/exploring-es6">https://leanpub.com/exploring-es6</a></div><div><span>1-5-19</span><span>JavaScript Garden</span><a href="http://bonsaiden.github.io/JavaScript-Garden/">http://bonsaiden.github.io/JavaScript-Garden/</a></div><div><span>1-5-19</span><span>MDN</span><a href="https://developer.mozilla.org/en-US/">https://developer.mozilla.org/en-US/</a></div><div><span>1-5-19</span><span>MDN:s reintroduction to JS</span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript</a></div><div><span>11-1-7</span><span>method shorthand syntax</span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Method_definitions">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Method_definitions</a></div><div><span>11-1-12</span><span>uniform access principle</span><a href="https://en.wikipedia.org/wiki/Uniform_access_principle">https://en.wikipedia.org/wiki/Uniform_access_principle</a></div><div><span>11-2-1</span><span>Destructuring</span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment</a></div><div><span>11-5-4</span><span>export</span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export</a></div><div><span>11-5-4</span><span>import</span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import</a></div><div><span>11-7-1</span><span>annotations</span><a href="http://blog.thoughtram.io/angular/2015/05/03/the-difference-between-annotations-and-decorators.html">http://blog.thoughtram.io/angular/2015/05/03/the-difference-between-annotations-and-decorators.html</a></div><div><span>11-7-1</span><span>disagreement</span><a href="https://github.com/wycats/javascript-decorators/issues/48">https://github.com/wycats/javascript-decorators/issues/48</a></div><div><span>11-7-1</span><span>implementation in TypeScript</span><a href="https://www.typescriptlang.org/docs/handbook/decorators.html">https://www.typescriptlang.org/docs/handbook/decorators.html</a></div><div><span>11-7-1</span><span>proposal</span><a href="http://tc39.github.io/proposal-decorators/">http://tc39.github.io/proposal-decorators/</a></div><div><span>11-7-8</span><span>concice and clear explanation</span><a href="https://github.com/arolson101/typescript-decorators">https://github.com/arolson101/typescript-decorators</a></div><div><span>11-7-8</span><span>decorator section</span><a href="https://www.typescriptlang.org/docs/handbook/decorators.html">https://www.typescriptlang.org/docs/handbook/decorators.html</a></div><div><span>11-8-11</span><span>Choo</span><a href="https://github.com/yoshuawuyts/choo">https://github.com/yoshuawuyts/choo</a></div><div><span>11-9-3</span><span>es6fiddle.net</span><a href="http://es6fiddle.net/">http://es6fiddle.net/</a></div><div><span>11-9-5</span><span>babeljs.io/repl</span><a href="https://babeljs.io/repl">https://babeljs.io/repl</a></div><div><span>12-1-5</span><span>was removed from React</span><a href="https://github.com/facebook/react/pull/9232">https://github.com/facebook/react/pull/9232</a></div><div><span>12-2-2</span><span>Proptypes</span><a href="https://facebook.github.io/react/docs/reusable-components.html#prop-validation">https://facebook.github.io/react/docs/reusable-components.html#prop-validation</a></div><div><span>12-2-6</span><span>babel plugin</span><a href="https://www.npmjs.com/package/babel-plugin-transform-class-properties">https://www.npmjs.com/package/babel-plugin-transform-class-properties</a></div><div><span>12-2-6</span><span>proposal</span><a href="https://github.com/tc39/proposal-class-public-fields">https://github.com/tc39/proposal-class-public-fields</a></div><div><span>12-2-10</span><span>Flow</span><a href="https://flow.org/">https://flow.org/</a></div><div><span>12-2-10</span><span>TypeScript</span><a href="https://www.typescriptlang.org/">https://www.typescriptlang.org/</a></div><div><span>12-3-12</span><span>this official React blog post</span><a href="https://facebook.github.io/react/blog/2016/07/13/mixins-considered-harmful.html">https://facebook.github.io/react/blog/2016/07/13/mixins-considered-harmful.html</a></div><div><span>2-1-3</span><span>Handlebars</span><a href="http://handlebarsjs.com">http://handlebarsjs.com</a></div><div><span>2-2-1</span><span>JSConfEU 2013</span><a href="https://www.youtube.com/watch?v=x7cQ3mrcKaY">https://www.youtube.com/watch?v=x7cQ3mrcKaY</a></div><div><span>2-2-1</span><span>JSConfUS 2013</span><a href="https://www.youtube.com/watch?v=GW0rj4sNH2w">https://www.youtube.com/watch?v=GW0rj4sNH2w</a></div><div><span>2-5-3</span><span>Browserify</span><a href="http://browserify.org/">http://browserify.org/</a></div><div><span>2-5-3</span><span>Node</span><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></div><div><span>2-5-3</span><span>Webpack</span><a href="https://webpack.github.io/">https://webpack.github.io/</a></div><div><span>2-5-3</span><span>npm</span><a href="https://www.npmjs.com/">https://www.npmjs.com/</a></div><div><span>2-5-5</span><span>Babel</span><a href="https://babeljs.io/">https://babeljs.io/</a></div><div><span>2-5-11</span><span>CycleJS</span><a href="http://cycle.js.org/">http://cycle.js.org/</a></div><div><span>2-6-12</span><span>detailed explanation</span><a href="https://github.com/acdlite/react-fiber-architecture">https://github.com/acdlite/react-fiber-architecture</a></div><div><span>2-9-5</span><span>React Devtools</span><a href="https://github.com/facebook/react-devtools">https://github.com/facebook/react-devtools</a></div><div><span>4-3-4</span><span>Events</span><a href="https://facebook.github.io/react/docs/events.html">https://facebook.github.io/react/docs/events.html</a></div><div><span>4-6-11</span><span>Forms</span><a href="https://facebook.github.io/react/docs/forms.html">https://facebook.github.io/react/docs/forms.html</a></div><div><span>4-8-7</span><span>React-Styleable</span><a href="https://github.com/pluralsight/react-styleable">https://github.com/pluralsight/react-styleable</a></div><div><span>4-8-8</span><span>Aphrodite</span><a href="https://github.com/Khan/aphrodite">https://github.com/Khan/aphrodite</a></div><div><span>5-1-2</span><span>Flux</span><a href="https://facebook.github.io/flux/">https://facebook.github.io/flux/</a></div><div><span>5-1-5</span><span>Redux</span><a href="http://redux.js.org/">http://redux.js.org/</a></div><div><span>5-6-2</span><span>Redux</span><a href="http://redux.js.org/">http://redux.js.org/</a></div><div><span>5-6-3</span><span>Egghead Redux course</span><a href="https://egghead.io/series/getting-started-with-redux">https://egghead.io/series/getting-started-with-redux</a></div><div><span>5-6-4</span><span>Learn Redux</span><a href="https://learnredux.com/">https://learnredux.com/</a></div><div><span>5-6-5</span><span>Awesome Redux</span><a href="https://github.com/xgrommx/awesome-redux">https://github.com/xgrommx/awesome-redux</a></div><div><span>7-5-1</span><span>React-Redux</span><a href="https://github.com/reactjs/react-redux">https://github.com/reactjs/react-redux</a></div><div><span>7-5-11</span><span>React-Redux</span><a href="https://github.com/reactjs/react-redux">https://github.com/reactjs/react-redux</a></div><div><span>8-1-6</span><span>Redux Dev Tools</span><a href="https://github.com/gaearon/redux-devtools/">https://github.com/gaearon/redux-devtools/</a></div><div><span>8-4-5</span><span>Redux-Thunk</span><a href="https://github.com/gaearon/redux-thunk">https://github.com/gaearon/redux-thunk</a></div><div><span>8-4-5</span><span>new API</span><a href="https://twitter.com/dan_abramov/status/730053481919303685?lang=en">https://twitter.com/dan_abramov/status/730053481919303685?lang=en</a></div><div><span>8-5-7</span><span>Middlewares</span><a href="http://blog.krawaller.se/posts/exploring-redux-middleware">http://blog.krawaller.se/posts/exploring-redux-middleware</a></div><div><span>9-1-1</span><span>Redux Dev Tools</span><a href="https://github.com/gaearon/redux-devtools/">https://github.com/gaearon/redux-devtools/</a></div><div><span>9-3-1</span><span>Reselect</span><a href="https://github.com/reactjs/reselect">https://github.com/reactjs/reselect</a></div><div><span>9-5-6</span><span>React-Router-Redux</span><a href="https://github.com/reactjs/react-router-redux">https://github.com/reactjs/react-router-redux</a></div>
  </div>
</div>
<div class="lookupindex demolist demolistbyslide">
  <h2>Demo references (by slide)</h2>
  <div class="lookuplist">
    <div><span class="demoslidenum">10-1-3</span><span></span><span class="demoid">statefail/index</span></div><div><span class="demoslidenum">10-1-5</span><span></span><span class="demoid">statefailfixcallback/index</span></div><div><span class="demoslidenum">10-1-7</span><span></span><span class="demoid">statefailfixfunc/index</span></div><div><span class="demoslidenum">10-2-15</span><span></span><span class="demoid">context/index</span></div><div><span class="demoslidenum">10-2-18</span><span></span><span class="demoid">style/index</span></div><div><span class="demoslidenum">10-3-14</span><span></span><span class="demoid">homemade/index</span></div><div><span class="demoslidenum">10-4-6</span><span></span><span class="demoid">firebase/index</span><span class="demorefspace">, </span><span class="demoid">firebase2/index</span></div><div><span class="demoslidenum">10-5-6</span><span></span><span class="demoid">recompose/index</span></div><div><span class="demoslidenum">12-1-4</span><span></span><span class="demoid">createclass/index</span></div><div><span class="demoslidenum">12-2-8</span><span></span><span class="demoid">proptypes/index</span></div><div><span class="demoslidenum">12-3-10</span><span></span><span class="demoid">mixinfactory/index</span><span class="demorefspace">, </span><span class="demoid">lifecycle/index</span><span class="demorefspace">, </span><span class="demoid">mixinfactory2/index</span></div><div><span class="demoslidenum">12-3-5</span><span></span><span class="demoid">mixin/index</span></div><div><span class="demoslidenum">2-3-2</span><span></span><span class="demoid">helloworld/index</span></div><div><span class="demoslidenum">2-3-3</span><span></span><span class="demoid">hellosomeone/index</span></div><div><span class="demoslidenum">2-6-7</span><span></span><span class="demoid">virtualdom/index</span></div><div><span class="demoslidenum">2-7-3</span><span></span><span class="demoid">nestedcomponents/index</span></div><div><span class="demoslidenum">2-9-1</span><span></span><span class="demoid">nestedcomponents/index</span></div><div><span class="demoslidenum">2-9-4</span><span></span><span class="demoid">hellosomeone/index</span></div><div><span class="demoslidenum">3-1-6</span><span></span><span class="demoid">react16/index</span></div><div><span class="demoslidenum">3-10-5</span><span></span><span class="demoid">renderlist/index</span></div><div><span class="demoslidenum">3-7-2</span><span></span><span class="demoid">conditionalreturn/index</span></div><div><span class="demoslidenum">3-7-3</span><span></span><span class="demoid">conditionalreturn2/index</span></div><div><span class="demoslidenum">3-7-5</span><span></span><span class="demoid">onlyiftrue/index</span></div><div><span class="demoslidenum">3-7-7</span><span></span><span class="demoid">conditionalreturnfail/index</span></div><div><span class="demoslidenum">4-2-12</span><span></span><span class="demoid">state/index</span></div><div><span class="demoslidenum">4-3-15</span><span></span><span class="demoid">events/index</span></div><div><span class="demoslidenum">4-4-6</span><span></span><span class="demoid">lifecycle/index</span></div><div><span class="demoslidenum">4-4-9</span><span></span><span class="demoid">errorcatching/index</span></div><div><span class="demoslidenum">4-5-2</span><span></span><span class="demoid">refcomponent/index</span></div><div><span class="demoslidenum">4-5-5</span><span></span><span class="demoid">refjquery/index</span></div><div><span class="demoslidenum">4-5-7</span><span></span><span class="demoid">refinput/index</span></div><div><span class="demoslidenum">4-5-8</span><span></span><span class="demoid">refbystring/index</span></div><div><span class="demoslidenum">4-6-13</span><span></span><span class="demoid">select/index</span></div><div><span class="demoslidenum">4-6-4</span><span></span><span class="demoid">petrifiedinput/index</span></div><div><span class="demoslidenum">4-6-6</span><span></span><span class="demoid">refinput/index</span></div><div><span class="demoslidenum">4-6-7</span><span></span><span class="demoid">uncontrolled/index</span></div><div><span class="demoslidenum">4-6-8</span><span></span><span class="demoid">controlled/index</span></div><div><span class="demoslidenum">4-7-6</span><span></span><span class="demoid">communication/index</span></div><div><span class="demoslidenum">4-7-7</span><span></span><span class="demoid">communication2/index</span><span class="demorefspace">, </span><span class="demoid">communication3/index</span><span class="demorefspace">, </span><span class="demoid">state/index</span></div><div><span class="demoslidenum">4-8-4</span><span></span><span class="demoid">style/index</span></div><div><span class="demoslidenum">4-8-7</span><span></span><span class="demoid">styleable/index</span></div><div><span class="demoslidenum">6-11-4</span><span></span><span class="demoid">redux/index</span></div><div><span class="demoslidenum">7-4-8</span><span></span><span class="demoid">vanilla/index</span></div><div><span class="demoslidenum">7-6-10</span><span></span><span class="demoid">usinglib/index</span></div><div><span class="demoslidenum">8-2-10</span><span></span><span class="demoid">deaf/index</span></div><div><span class="demoslidenum">8-2-11</span><span></span><span class="demoid">nervous/index</span></div><div><span class="demoslidenum">8-2-12</span><span></span><span class="demoid">impatient/index</span></div><div><span class="demoslidenum">8-2-13</span><span></span><span class="demoid">chaos/index</span></div><div><span class="demoslidenum">8-5-6</span><span></span><span class="demoid">thunk/index</span></div><div><span class="demoslidenum">9-1-3</span><span></span><span class="demoid">reduxdevtools/index</span></div><div><span class="demoslidenum">9-2-8</span><span></span><span class="demoid">combinedreducers/index</span></div><div><span class="demoslidenum">9-3-8</span><span></span><span class="demoid">reselect/index</span></div>
  </div>
</div>
<div class="lookupindex demolist">
  <h2>Demo references (alphabetical)</h2>
  <div class="lookuplist">
    <div><span class="demoid">chaos/index</span><span></span><span class="demoslidenum">8-2-13</span></div><div><span class="demoid">combinedreducers/index</span><span></span><span class="demoslidenum">9-2-8</span></div><div><span class="demoid">communication/index</span><span></span><span class="demoslidenum">4-7-6</span></div><div><span class="demoid">communication2/index</span><span></span><span class="demoslidenum">4-7-7</span></div><div><span class="demoid">communication3/index</span><span></span><span class="demoslidenum">4-7-7</span></div><div><span class="demoid">conditionalreturn/index</span><span></span><span class="demoslidenum">3-7-2</span></div><div><span class="demoid">conditionalreturn2/index</span><span></span><span class="demoslidenum">3-7-3</span></div><div><span class="demoid">conditionalreturnfail/index</span><span></span><span class="demoslidenum">3-7-7</span></div><div><span class="demoid">context/index</span><span></span><span class="demoslidenum">10-2-15</span></div><div><span class="demoid">controlled/index</span><span></span><span class="demoslidenum">4-6-8</span></div><div><span class="demoid">createclass/index</span><span></span><span class="demoslidenum">12-1-4</span></div><div><span class="demoid">deaf/index</span><span></span><span class="demoslidenum">8-2-10</span></div><div><span class="demoid">errorcatching/index</span><span></span><span class="demoslidenum">4-4-9</span></div><div><span class="demoid">events/index</span><span></span><span class="demoslidenum">4-3-15</span></div><div><span class="demoid">firebase/index</span><span></span><span class="demoslidenum">10-4-6</span></div><div><span class="demoid">firebase2/index</span><span></span><span class="demoslidenum">10-4-6</span></div><div><span class="demoid">hellosomeone/index</span><span></span><span class="demoslidenum">2-3-3</span><span class="demorefspace">, </span><span class="demoslidenum">2-9-4</span></div><div><span class="demoid">helloworld/index</span><span></span><span class="demoslidenum">2-3-2</span></div><div><span class="demoid">homemade/index</span><span></span><span class="demoslidenum">10-3-14</span></div><div><span class="demoid">impatient/index</span><span></span><span class="demoslidenum">8-2-12</span></div><div><span class="demoid">lifecycle/index</span><span></span><span class="demoslidenum">4-4-6</span><span class="demorefspace">, </span><span class="demoslidenum">12-3-10</span></div><div><span class="demoid">mixin/index</span><span></span><span class="demoslidenum">12-3-5</span></div><div><span class="demoid">mixinfactory/index</span><span></span><span class="demoslidenum">12-3-10</span></div><div><span class="demoid">mixinfactory2/index</span><span></span><span class="demoslidenum">12-3-10</span></div><div><span class="demoid">nervous/index</span><span></span><span class="demoslidenum">8-2-11</span></div><div><span class="demoid">nestedcomponents/index</span><span></span><span class="demoslidenum">2-7-3</span><span class="demorefspace">, </span><span class="demoslidenum">2-9-1</span></div><div><span class="demoid">onlyiftrue/index</span><span></span><span class="demoslidenum">3-7-5</span></div><div><span class="demoid">petrifiedinput/index</span><span></span><span class="demoslidenum">4-6-4</span></div><div><span class="demoid">proptypes/index</span><span></span><span class="demoslidenum">12-2-8</span></div><div><span class="demoid">react16/index</span><span></span><span class="demoslidenum">3-1-6</span></div><div><span class="demoid">recompose/index</span><span></span><span class="demoslidenum">10-5-6</span></div><div><span class="demoid">redux/index</span><span></span><span class="demoslidenum">6-11-4</span></div><div><span class="demoid">reduxdevtools/index</span><span></span><span class="demoslidenum">9-1-3</span></div><div><span class="demoid">refbystring/index</span><span></span><span class="demoslidenum">4-5-8</span></div><div><span class="demoid">refcomponent/index</span><span></span><span class="demoslidenum">4-5-2</span></div><div><span class="demoid">refinput/index</span><span></span><span class="demoslidenum">4-5-7</span><span class="demorefspace">, </span><span class="demoslidenum">4-6-6</span></div><div><span class="demoid">refjquery/index</span><span></span><span class="demoslidenum">4-5-5</span></div><div><span class="demoid">renderlist/index</span><span></span><span class="demoslidenum">3-10-5</span></div><div><span class="demoid">reselect/index</span><span></span><span class="demoslidenum">9-3-8</span></div><div><span class="demoid">select/index</span><span></span><span class="demoslidenum">4-6-13</span></div><div><span class="demoid">state/index</span><span></span><span class="demoslidenum">4-2-12</span><span class="demorefspace">, </span><span class="demoslidenum">4-7-7</span></div><div><span class="demoid">statefail/index</span><span></span><span class="demoslidenum">10-1-3</span></div><div><span class="demoid">statefailfixcallback/index</span><span></span><span class="demoslidenum">10-1-5</span></div><div><span class="demoid">statefailfixfunc/index</span><span></span><span class="demoslidenum">10-1-7</span></div><div><span class="demoid">style/index</span><span></span><span class="demoslidenum">4-8-4</span><span class="demorefspace">, </span><span class="demoslidenum">10-2-18</span></div><div><span class="demoid">styleable/index</span><span></span><span class="demoslidenum">4-8-7</span></div><div><span class="demoid">thunk/index</span><span></span><span class="demoslidenum">8-5-6</span></div><div><span class="demoid">uncontrolled/index</span><span></span><span class="demoslidenum">4-6-7</span></div><div><span class="demoid">usinglib/index</span><span></span><span class="demoslidenum">7-6-10</span></div><div><span class="demoid">vanilla/index</span><span></span><span class="demoslidenum">7-4-8</span></div><div><span class="demoid">virtualdom/index</span><span></span><span class="demoslidenum">2-6-7</span></div>
  </div>
</div>

  </div>
</div>

</body>
</html>
